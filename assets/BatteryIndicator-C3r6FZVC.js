import{c as P,I as F,u as B,J as U,K as k,r as p,k as m,w as D,L as O,M as A,h as j,l as g,m as w,q as z,T as G,n as o,x as R,t as h,F as y,G as r,N as f,V as q,O as E,s as a,P as J,Q as K,R as L,S as I,U as Q,W as $}from"./index-BqIkdNH5.js";const H={class:"flex items-center w-[5.5rem] h-12 text-white justify-center"},X=o("span",{class:"absolute text-sm text-yellow-400 -bottom-[2px] -right-[7px] mdi mdi-alert-circle"},null,-1),Y=[X],Z={class:"flex flex-col w-[4rem] select-none text-sm font-semibold leading-4 text-end"},ee={class:"w-full"},te={class:"font-mono"},oe=o("span",null," V",-1),ae={class:"w-full"},se={class:"font-mono"},le=o("span",null," A",-1),ne={class:"font-mono"},re=o("span",null," W",-1),ue={class:"text-red-500 text-center text-sm w-[full]"},i=500,pe=P({__name:"BatteryIndicator",props:{miniWidget:{}},setup(S){const e=F(S).miniWidget,V={showCurrent:!0,showPower:!0,toggleInterval:1e3},t=B(),_=U(),C=k(),v=p(!0),d=p(void 0),c=p(""),x=p(void 0),l=p(e.value.options.toggleInterval??V.toggleInterval),M=m(()=>{var u;return((u=t==null?void 0:t.powerSupply)==null?void 0:u.voltage)===void 0?NaN:Math.abs(t.powerSupply.voltage)>=100?t.powerSupply.voltage.toFixed(0):t.powerSupply.voltage.toFixed(1)}),T=m(()=>{var u;return((u=t==null?void 0:t.powerSupply)==null?void 0:u.current)===void 0?NaN:Math.abs(t.powerSupply.current)>=100?t.powerSupply.current.toFixed(0):t.powerSupply.current.toFixed(1)}),W=m(()=>t.instantaneousWatts!==void 0?t.instantaneousWatts.toFixed(1):NaN),N=m(()=>"mdi-battery"),b=()=>{(d.value||x.value)&&(clearInterval(d.value),clearTimeout(x.value)),l.value<i?(e.value.options.toggleInterval=i,c.value=`Interval must be at least ${i}ms.`):e.value.options.toggleInterval=l.value,!e.value.options.showCurrent&&!e.value.options.showPower&&(e.value.options.showCurrent=!0,e.value.options.showPower=!0,c.value="At least one of the options must be enabled."),e.value.options.showCurrent&&e.value.options.showPower?d.value=setInterval(()=>{v.value=!v.value},e.value.options.toggleInterval):v.value=e.value.options.showCurrent,x.value=setTimeout(()=>{c.value="",l.value<i&&(l.value=i)},5e3)};return D([()=>e.value.options,l],b,{deep:!0}),O(()=>{e.value.options=Object.assign({},V,e.value.options),b(),A.registerUsage("Instantaneous Watts")}),j(()=>{d.value===void 0&&clearInterval(d.value)}),(u,s)=>(g(),w(y,null,[z((g(),w("div",H,[o("span",{class:R(["relative w-[1.5rem] mdi battery-icon",[N.value]])},Y,2),o("div",Z,[o("div",ee,[o("span",te,h(M.value),1),oe]),o("div",ae,[v.value?(g(),w(y,{key:0},[o("span",se,h(T.value),1),le],64)):(g(),w(y,{key:1},[o("span",ne,h(W.value),1),re],64))])])])),[[G,"Battery information"]]),r($,{modelValue:a(_).miniWidgetManagerVars(a(e).hash).configMenuOpen,"onUpdate:modelValue":s[3]||(s[3]=n=>a(_).miniWidgetManagerVars(a(e).hash).configMenuOpen=n),width:"auto"},{default:f(()=>[r(q,{class:"pa-4 text-white w-[20rem]",style:E([{"border-radius":"15px"},a(C).globalGlassMenuStyles])},{default:f(()=>[r(J,{class:"text-center"},{default:f(()=>[K("Battery Indicator Config")]),_:1}),r(L,{class:"flex flex-col gap-y-4"},{default:f(()=>[r(I,{modelValue:a(e).options.showCurrent,"onUpdate:modelValue":s[0]||(s[0]=n=>a(e).options.showCurrent=n),label:"Show Current","hide-details":""},null,8,["modelValue"]),r(I,{modelValue:a(e).options.showPower,"onUpdate:modelValue":s[1]||(s[1]=n=>a(e).options.showPower=n),label:"Show Power","hide-details":""},null,8,["modelValue"]),r(Q,{modelValue:l.value,"onUpdate:modelValue":s[2]||(s[2]=n=>l.value=n),modelModifiers:{number:!0},label:"Toggle Interval (ms)",type:"number",min:i,step:"100",density:"compact",variant:"outlined",disabled:!a(e).options.showCurrent||!a(e).options.showPower},null,8,["modelValue","disabled"]),o("p",ue,h(c.value),1)]),_:1})]),_:1},8,["style"])]),_:1},8,["modelValue"])],64))}});export{pe as default};
