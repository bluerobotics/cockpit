import{c as P,J as F,u as B,y as U,K as k,r as p,k as c,w as D,L as j,M as O,h as N,l as f,m as g,G as A,T as z,n as o,v as G,t as w,H as r,N as x,V as R,O as q,q as a,P as E,Q as H,R as J,S as I,U as K,W as L,F as Q}from"./index-Cng7UUBi.js";const $={class:"flex items-center w-[95px] h-12 text-white justify-center"},X={class:"relative right-0 flex flex-col w-[4rem] select-none text-sm font-semibold leading-4 text-end -mr-2"},Y={class:"w-full"},Z={class:"flex justify-end gap-x-1 items-center"},ee={class:"font-mono"},te={class:"w-full"},se={key:0,class:"flex justify-end gap-x-1 items-center"},oe={class:"font-mono mt-[2px]"},ae={key:1,class:"flex justify-end gap-x-1 items-center text-yellow-100"},le={class:"font-mono mt-[2px]"},ne={class:"text-red-500 text-center text-sm w-[full]"},u=500,ue=P({__name:"BatteryIndicator",props:{miniWidget:{}},setup(S){const e=F(S).miniWidget,h={showCurrent:!0,showPower:!0,toggleInterval:1e3},s=B(),V=U(),C=k(),v=p(!0),d=p(void 0),m=p(""),y=p(void 0),l=p(e.value.options.toggleInterval??h.toggleInterval),M=c(()=>{var i;return((i=s==null?void 0:s.powerSupply)==null?void 0:i.voltage)===void 0?"--":Math.abs(s.powerSupply.voltage)>=100?s.powerSupply.voltage.toFixed(0):s.powerSupply.voltage.toFixed(1)}),_=c(()=>{var i;return((i=s==null?void 0:s.powerSupply)==null?void 0:i.current)===void 0?"--":Math.abs(s.powerSupply.current)>=100?s.powerSupply.current.toFixed(0):s.powerSupply.current.toFixed(1)}),T=c(()=>s.instantaneousWatts!==void 0?s.instantaneousWatts.toFixed(1):"--"),W=c(()=>"mdi-battery"),b=()=>{(d.value||y.value)&&(clearInterval(d.value),clearTimeout(y.value)),l.value<u?(e.value.options.toggleInterval=u,m.value=`Interval must be at least ${u}ms.`):e.value.options.toggleInterval=l.value,!e.value.options.showCurrent&&!e.value.options.showPower&&(e.value.options.showCurrent=!0,e.value.options.showPower=!0,m.value="At least one of the options must be enabled."),e.value.options.showCurrent&&e.value.options.showPower?d.value=setInterval(()=>{v.value=!v.value},e.value.options.toggleInterval):v.value=e.value.options.showCurrent,y.value=setTimeout(()=>{m.value="",l.value<u&&(l.value=u)},5e3)};return D([()=>e.value.options,l],b,{deep:!0}),j(()=>{e.value.options=Object.assign({},h,e.value.options),b(),O.registerUsage("Instantaneous Watts")}),N(()=>{d.value===void 0&&clearInterval(d.value)}),(i,t)=>(f(),g(Q,null,[A((f(),g("div",$,[o("span",{class:G(["relative w-[1.5rem] mdi battery-icon left-0 mr-3",[W.value]])},t[4]||(t[4]=[o("span",{class:"absolute text-sm text-yellow-400 -bottom-[3px] left-[4px] mdi mdi-alert-circle"},null,-1)]),2),o("div",X,[o("div",Y,[o("div",Z,[o("span",ee,w(M.value),1),t[5]||(t[5]=o("div",{class:"w-[15px] mr-[1px] -ml-[1px]"},"V",-1))])]),o("div",te,[v.value?(f(),g("div",se,[o("span",oe,w(_.value),1),t[6]||(t[6]=o("div",{class:"w-[15px]"},"A",-1))])):(f(),g("div",ae,[o("span",le,w(T.value),1),t[7]||(t[7]=o("div",{class:"w-[15px]"},"W",-1))]))])])])),[[z,"Battery information"]]),r(L,{modelValue:a(V).miniWidgetManagerVars(a(e).hash).configMenuOpen,"onUpdate:modelValue":t[3]||(t[3]=n=>a(V).miniWidgetManagerVars(a(e).hash).configMenuOpen=n),width:"auto"},{default:x(()=>[r(R,{class:"pa-4 text-white w-[20rem]",style:q([{"border-radius":"15px"},a(C).globalGlassMenuStyles])},{default:x(()=>[r(E,{class:"text-center"},{default:x(()=>t[8]||(t[8]=[H("Battery Indicator Config")])),_:1}),r(J,{class:"flex flex-col gap-y-4"},{default:x(()=>[r(I,{modelValue:a(e).options.showCurrent,"onUpdate:modelValue":t[0]||(t[0]=n=>a(e).options.showCurrent=n),label:"Show Current","hide-details":""},null,8,["modelValue"]),r(I,{modelValue:a(e).options.showPower,"onUpdate:modelValue":t[1]||(t[1]=n=>a(e).options.showPower=n),label:"Show Power","hide-details":""},null,8,["modelValue"]),r(K,{modelValue:l.value,"onUpdate:modelValue":t[2]||(t[2]=n=>l.value=n),modelModifiers:{number:!0},label:"Toggle Interval (ms)",type:"number",min:u,step:"100",density:"compact",variant:"outlined",disabled:!a(e).options.showCurrent||!a(e).options.showPower},null,8,["modelValue","disabled"]),o("p",ne,w(m.value),1)]),_:1})]),_:1},8,["style"])]),_:1},8,["modelValue"])],64))}});export{ue as default};
