import{c as L,y,k as M,J as D,r as V,w as r,av as S,o as O,h as W,aw as x,ax as C,l as E,m as _,n as N,H as T,N as B,Q as j,q as l,v as k,ah as z,O as I,ay as P,_ as U}from"./index-CGYrVuGW.js";const q=L({__name:"Dropdown",props:{miniWidget:{}},setup(b){var m,c;const t=y();let d;const u=b,s=M(()=>{var a;return((a=e.value.options.layout)==null?void 0:a.selectorOptions)||[]}),e=D(u).miniWidget,p=V(s.value.find(a=>{var i;return a.value===((i=u.miniWidget.options.lastSelected)==null?void 0:i.value)})||s.value[0]),n=V(((m=u.miniWidget.options.lastSelected)==null?void 0:m.value)||((c=s.value[0])==null?void 0:c.value));r(()=>t.miniWidgetManagerVars(e.value.hash).configMenuOpen,a=>{a===!0&&(t.showElementPropsDrawer(e.value.hash),setTimeout(()=>{t.miniWidgetManagerVars(e.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0}),r(p,a=>{t.updateElementOptions(e.value.hash,{...e.value.options,lastSelected:a})});const w=a=>{if(t.editingMode)return;const i=s.value.find(o=>o.value===a);i&&(n.value=a,e.value.options.dataLakeVariable&&P(e.value.options.dataLakeVariable.id,a),t.setMiniWidgetLastValue(e.value.hash,i.value))};r(()=>{var a;return(a=e.value.options.dataLakeVariable)==null?void 0:a.name},a=>{a&&v()},{immediate:!0});const v=()=>{e.value.options.dataLakeVariable&&(d=S(e.value.options.dataLakeVariable.name,a=>{n.value=a}),n.value=t.getMiniWidgetLastValue(e.value.hash))};return O(()=>{var a;(!e.value.options||Object.keys(e.value.options).length===0)&&(e.value.isCustomElement=!0,t.updateElementOptions(e.value.hash,{layout:{selectorOptions:[],align:"start",width:168},variableType:"string",dataLakeVariable:void 0})),e.value.options.dataLakeVariable&&v(),((a=e.value.options.lastSelected)==null?void 0:a.name)!==""&&(p.value=e.value.options.lastSelected)}),W(()=>{e.value.options.dataLakeVariable&&(x(e.value.options.dataLakeVariable.id),d&&C(e.value.options.dataLakeVariable.name,d))}),(a,i)=>{var o,h,f;return E(),_("div",{class:k(["flex w-full",((o=l(t).elementToShowOnDrawer)==null?void 0:o.hash)===l(e).hash&&l(t).editingMode?"bg-[#00000010] ":"border-0"]),style:I({width:"100%",justifyContent:(h=l(e).options.layout)==null?void 0:h.align}),onClick:i[1]||(i[1]=g=>l(t).editingMode&&l(t).showElementPropsDrawer(l(e).hash))},[N("div",null,[T(z,{modelValue:n.value,"onUpdate:modelValue":[i[0]||(i[0]=g=>n.value=g),w],items:s.value,"item-title":"name","item-value":"value",theme:"dark",density:"compact",variant:"filled","min-width":((f=l(e).options.layout)==null?void 0:f.width)||168,"hide-details":"",class:k(["text-white",{"pointer-events-none":l(t).editingMode}])},{default:B(()=>i[2]||(i[2]=[j(" > ")])),_:1},8,["modelValue","items","min-width","class"])])],6)}}}),J=U(q,[["__scopeId","data-v-378b27ef"]]);export{J as default};
