import{c as T,e as C,aQ as _,r as O,w as y,h as E,o as I,aN as U,j as z,m as w,n as D,p as B,q as j,v as P,z as o,x as F,B as q,y as M,I as K,ac as Q,aK as R,a5 as W,aO as $,_ as A}from"./index-DsGX2IEg.js";const G=T({__name:"Slider",props:{miniWidget:{}},setup(x){const l=C(),a=_(x).miniWidget,u=O(0);let i,n;const r=e=>{var s;let t;e==null||isNaN(Number(e))?t=((s=a.value.options.layout)==null?void 0:s.minValue)||0:t=Number(e),u.value=t};y(()=>l.miniWidgetManagerVars(a.value.hash).configMenuOpen,e=>{e===!0&&(l.showElementPropsDrawer(a.value.hash),setTimeout(()=>{l.miniWidgetManagerVars(a.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0});const S=E(()=>{var e,t;return((t=(e=a.value.options)==null?void 0:e.dataLakeVariable)==null?void 0:t.persistent)===!0}),d=()=>{a.value.options.dataLakeVariable&&(i=Q(a.value.options.dataLakeVariable.id,e=>{n&&new Date().getTime()-n.getTime()<100||(n=new Date,r(e))}),r(R(a.value.options.dataLakeVariable.id)))};y(()=>{var e;return(e=a.value.options.dataLakeVariable)==null?void 0:e.id},(e,t)=>{t&&i&&W(t,i),e&&d()});const N=e=>{if(!l.editingMode&&a.value.options.dataLakeVariable){const t=Number(e.toFixed(1));l.setMiniWidgetLastValue(a.value.hash,t),$(a.value.options.dataLakeVariable.id,t)}};return I(()=>{var e;(!a.value.options||Object.keys(a.value.options).length===0)&&(a.value.isCustomElement=!0,l.updateElementOptions(a.value.hash,{layout:{label:"",minValue:0,maxValue:100,showTooltip:!0,color:"#FFFFFF",coloredLabel:!1,labelWidth:((e=a.value.options.layout)==null?void 0:e.labelWidth)||0},variableType:"number",dataLakeVariable:void 0})),a.value.options.dataLakeVariable?(a.value.options.dataLakeVariable.allowUserToChangeValue||U({...a.value.options.dataLakeVariable,allowUserToChangeValue:!0}),d()):r(l.getMiniWidgetLastValue(a.value.hash))}),z(()=>{a.value.options.dataLakeVariable&&i&&W(a.value.options.dataLakeVariable.id,i)}),(e,t)=>{var s,p,m,b,V,c,v,h,g,f,L;return D(),w("div",{class:M(["slider-container",((s=o(l).elementToShowOnDrawer)==null?void 0:s.hash)===o(a).hash&&o(l).editingMode?"bg-[#00000010] ":"border-0"]),onClick:t[1]||(t[1]=k=>o(l).editingMode&&o(l).showElementPropsDrawer(o(a).hash))},[B("div",{style:F({minWidth:((p=o(a).options.layout)==null?void 0:p.labelWidth)+"px"})},[((m=o(a).options.layout)==null?void 0:m.label)!==""?(D(),w("p",{key:0,style:F({color:(b=o(a).options.layout)!=null&&b.coloredLabel?(V=o(a).options.layout)==null?void 0:V.color:"#FFFFFF"}),class:"mr-3 mb-[3px]"},q((c=o(a).options.layout)==null?void 0:c.label),5)):P("",!0)],4),j(K,{"model-value":u.value,min:(v=o(a).options.layout)==null?void 0:v.minValue,max:(h=o(a).options.layout)==null?void 0:h.maxValue,"thumb-label":(g=o(a).options.layout)==null?void 0:g.showTooltip,"hide-details":"",class:M(["min-w-20",{"pointer-events-none":o(l).editingMode||!S.value,"scale-75":((f=o(a).options.layout)==null?void 0:f.size)==="small"}]),color:((L=o(a).options.layout)==null?void 0:L.color)||"white","onUpdate:modelValue":t[0]||(t[0]=k=>N(k))},null,8,["model-value","min","max","thumb-label","color","class"])],2)}}}),X=A(G,[["__scopeId","data-v-c8a1cdfd"]]);export{X as default};
