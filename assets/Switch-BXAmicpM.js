import{c as k,y as L,J as w,r as y,w as c,aw as F,o as M,h as W,ax as D,ay as x,l as h,m as v,H as C,q as i,v as V,a5 as S,t as E,s as O,az as T}from"./index-r1_IRsML.js";const _={key:0,class:"ml-3 mb-[3px] whitespace-nowrap"},B=k({__name:"Switch",props:{miniWidget:{}},setup(b){const a=L(),s=b,e=w(s).miniWidget,o=y(!0);let r;c(()=>a.miniWidgetManagerVars(e.value.hash).configMenuOpen,t=>{t===!0&&(a.showElementPropsDrawer(e.value.hash),setTimeout(()=>{a.miniWidgetManagerVars(e.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0}),c(()=>{var t;return(t=e.value.options.dataLakeVariable)==null?void 0:t.name},t=>{t&&u()},{immediate:!0});const u=()=>{e.value.options.dataLakeVariable&&(r=F(e.value.options.dataLakeVariable.name,t=>{o.value=t}),o.value=a.getMiniWidgetLastValue(e.value.hash))},f=()=>{a.editingMode||e.value.options.dataLakeVariable&&(a.setMiniWidgetLastValue(e.value.hash,o.value),T(e.value.options.dataLakeVariable.name,o.value))};return M(()=>{var t,n,l;(!s.miniWidget.options||Object.keys(s.miniWidget.options).length===0)&&(e.value.isCustomElement=!0,a.updateElementOptions(s.miniWidget.hash,{layout:{align:((t=e.value.options.layout)==null?void 0:t.align)||"center",color:((n=e.value.options.layout)==null?void 0:n.color)||"#FFFFFF",label:((l=e.value.options.layout)==null?void 0:l.label)||""},variableType:"boolean",dataLakeVariable:void 0,toggled:!0}),o.value=!0),u()}),W(()=>{e.value.options.dataLakeVariable&&(D(e.value.options.dataLakeVariable.id),r&&x(e.value.options.dataLakeVariable.name,r))}),(t,n)=>{var l,d,p,m;return h(),v("div",{class:V(["flex items-center h-[30px] px-4",((l=i(a).elementToShowOnDrawer)==null?void 0:l.hash)===i(e).hash&&i(a).editingMode?"bg-[#00000010] ":"border-0"]),onClick:n[1]||(n[1]=g=>i(a).editingMode&&i(a).showElementPropsDrawer(i(e).hash))},[C(S,{modelValue:o.value,"onUpdate:modelValue":n[0]||(n[0]=g=>o.value=g),"hide-details":"",color:((d=i(e).options.layout)==null?void 0:d.color)||"#FFFFFF",class:V([{"pointer-events-none":i(a).editingMode},"min-w-[35px]"]),onChange:f},null,8,["modelValue","color","class"]),((p=i(e).options.layout)==null?void 0:p.label)!==""?(h(),v("p",_,E((m=i(e).options.layout)==null?void 0:m.label),1)):O("",!0)],2)}}});export{B as default};
