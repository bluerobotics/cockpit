import{c as b,y as L,k as M,J as y,r as f,w as g,o as S,au as D,h as O,av as W,aw as x,l as C,m as E,n as _,H as N,N as T,Q as B,q as l,v as V,ah as j,O as z,ax as I,_ as P}from"./index-aVHeS6ni.js";const U=b({__name:"Dropdown",props:{miniWidget:{}},setup(w){var p,m;const i=L();let u;const r=w,n=M(()=>{var a;return((a=e.value.options.layout)==null?void 0:a.selectorOptions)||[]}),e=y(r).miniWidget,o=f(n.value.find(a=>{var t;return a.value===((t=r.miniWidget.options.lastSelected)==null?void 0:t.value)})||n.value[0]),v=f(((p=r.miniWidget.options.lastSelected)==null?void 0:p.value)||((m=n.value[0])==null?void 0:m.value));g(()=>i.miniWidgetManagerVars(e.value.hash).configMenuOpen,a=>{a===!0&&(i.showElementPropsDrawer(e.value.hash),setTimeout(()=>{i.miniWidgetManagerVars(e.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0}),g(o,a=>{i.updateElementOptions(e.value.hash,{...e.value.options,lastSelected:a})});const k=a=>{if(i.editingMode)return;const t=n.value.find(s=>s.value===a);t&&(v.value=a,e.value.options.dataLakeVariable&&I(e.value.options.dataLakeVariable.id,a),i.setMiniWidgetLastValue(e.value.hash,t.value))};return S(()=>{var a;if((!e.value.options||Object.keys(e.value.options).length===0)&&(e.value.isCustomElement=!0,i.updateElementOptions(e.value.hash,{layout:{selectorOptions:[],align:"start",width:168},variableType:"string",dataLakeVariable:void 0})),e.value.options.dataLakeVariable){u=D(e.value.options.dataLakeVariable.name,s=>{o.value=n.value.find(d=>d.value===s)});const t=i.getMiniWidgetLastValue(e.value.hash);o.value=n.value.find(s=>s.value===t)}((a=e.value.options.lastSelected)==null?void 0:a.name)!==""&&(o.value=e.value.options.lastSelected)}),O(()=>{e.value.options.dataLakeVariable&&(W(e.value.options.dataLakeVariable.id),u&&x(e.value.options.dataLakeVariable.name,u))}),(a,t)=>{var s,d,c;return C(),E("div",{class:V(["flex w-full",((s=l(i).elementToShowOnDrawer)==null?void 0:s.hash)===l(e).hash&&l(i).editingMode?"bg-[#00000010] ":"border-0"]),style:z({width:"100%",justifyContent:(d=l(e).options.layout)==null?void 0:d.align}),onClick:t[1]||(t[1]=h=>l(i).editingMode&&l(i).showElementPropsDrawer(l(e).hash))},[_("div",null,[N(j,{modelValue:v.value,"onUpdate:modelValue":[t[0]||(t[0]=h=>v.value=h),k],items:n.value,"item-title":"name","item-value":"value",theme:"dark",density:"compact",variant:"filled","min-width":((c=l(e).options.layout)==null?void 0:c.width)||168,"hide-details":"",class:V(["text-white",{"pointer-events-none":l(i).editingMode}])},{default:T(()=>t[2]||(t[2]=[B(" > ")])),_:1},8,["modelValue","items","min-width","class"])])],6)}}}),H=P(U,[["__scopeId","data-v-2e79badc"]]);export{H as default};
