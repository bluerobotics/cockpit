import{c as w,y as M,J as y,r as D,w as v,k as F,o as W,aM as x,h as C,l as c,m as h,H as S,s as T,x as V,v as o,ad as E,t as O,a9 as B,aJ as U,a1 as b,aN as _}from"./index-XwGkCBRu.js";const N={key:0,class:"ml-3 mb-[3px] whitespace-nowrap"},J=w({__name:"Switch",props:{miniWidget:{}},setup(k){const i=M(),r=k,a=y(r).miniWidget,l=D(!0);let n;v(()=>i.miniWidgetManagerVars(a.value.hash).configMenuOpen,e=>{e===!0&&(i.showElementPropsDrawer(a.value.hash),setTimeout(()=>{i.miniWidgetManagerVars(a.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0});const f=F(()=>{var e,t;return((t=(e=a.value.options)==null?void 0:e.dataLakeVariable)==null?void 0:t.persistent)===!0}),u=()=>{a.value.options.dataLakeVariable&&(n=B(a.value.options.dataLakeVariable.id,e=>{l.value=!!e}),l.value=!!U(a.value.options.dataLakeVariable.id))};v(()=>{var e;return(e=a.value.options.dataLakeVariable)==null?void 0:e.id},(e,t)=>{t&&n&&b(t,n),e&&u()});const L=()=>{i.editingMode||a.value.options.dataLakeVariable&&(i.setMiniWidgetLastValue(a.value.hash,l.value),_(a.value.options.dataLakeVariable.id,l.value))};return W(()=>{var e,t,s;(!r.miniWidget.options||Object.keys(r.miniWidget.options).length===0)&&(a.value.isCustomElement=!0,i.updateElementOptions(r.miniWidget.hash,{layout:{align:((e=a.value.options.layout)==null?void 0:e.align)||"center",color:((t=a.value.options.layout)==null?void 0:t.color)||"#FFFFFF",label:((s=a.value.options.layout)==null?void 0:s.label)||""},variableType:"boolean",dataLakeVariable:void 0,toggled:!0}),l.value=!0),a.value.options.dataLakeVariable?(a.value.options.dataLakeVariable.allowUserToChangeValue||x({...a.value.options.dataLakeVariable,allowUserToChangeValue:!0}),u()):l.value=i.getMiniWidgetLastValue(a.value.hash)}),C(()=>{a.value.options.dataLakeVariable&&n&&b(a.value.options.dataLakeVariable.id,n)}),(e,t)=>{var s,d,p,g;return h(),c("div",{class:V(["flex items-center h-[30px] px-4",((s=o(i).elementToShowOnDrawer)==null?void 0:s.hash)===o(a).hash&&o(i).editingMode?"bg-[#00000010] ":"border-0"]),onClick:t[1]||(t[1]=m=>o(i).editingMode&&o(i).showElementPropsDrawer(o(a).hash))},[S(E,{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=m=>l.value=m),"hide-details":"",color:((d=o(a).options.layout)==null?void 0:d.color)||"#FFFFFF",class:V([{"pointer-events-none":o(i).editingMode||!f.value},"min-w-[35px]"]),onChange:L},null,8,["modelValue","color","class"]),((p=o(a).options.layout)==null?void 0:p.label)!==""?(h(),c("p",N,O((g=o(a).options.layout)==null?void 0:g.label),1)):T("",!0)],2)}}});export{J as default};
