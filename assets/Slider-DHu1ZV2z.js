import{c as T,y as C,aP as _,r as E,w as y,k as O,o as U,aM as I,h as z,l as w,m as D,n as B,H as P,s as j,v as o,N as F,t as H,x as M,aQ as J,a9 as Q,aJ as R,a1 as W,aN as $,_ as q}from"./index-zsJg7nFZ.js";const A=T({__name:"Slider",props:{miniWidget:{}},setup(x){const l=C(),a=_(x).miniWidget,u=E(0);let i,n;const r=e=>{var s;let t;e==null||isNaN(Number(e))?t=((s=a.value.options.layout)==null?void 0:s.minValue)||0:t=Number(e),u.value=t};y(()=>l.miniWidgetManagerVars(a.value.hash).configMenuOpen,e=>{e===!0&&(l.showElementPropsDrawer(a.value.hash),setTimeout(()=>{l.miniWidgetManagerVars(a.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0});const N=O(()=>{var e,t;return((t=(e=a.value.options)==null?void 0:e.dataLakeVariable)==null?void 0:t.persistent)===!0}),d=()=>{a.value.options.dataLakeVariable&&(i=Q(a.value.options.dataLakeVariable.id,e=>{n&&new Date().getTime()-n.getTime()<100||(n=new Date,r(e))}),r(R(a.value.options.dataLakeVariable.id)))};y(()=>{var e;return(e=a.value.options.dataLakeVariable)==null?void 0:e.id},(e,t)=>{t&&i&&W(t,i),e&&d()});const S=e=>{if(!l.editingMode&&a.value.options.dataLakeVariable){const t=Number(e.toFixed(1));l.setMiniWidgetLastValue(a.value.hash,t),$(a.value.options.dataLakeVariable.id,t)}};return U(()=>{var e;(!a.value.options||Object.keys(a.value.options).length===0)&&(a.value.isCustomElement=!0,l.updateElementOptions(a.value.hash,{layout:{label:"",minValue:0,maxValue:100,showTooltip:!0,color:"#FFFFFF",coloredLabel:!1,labelWidth:((e=a.value.options.layout)==null?void 0:e.labelWidth)||0},variableType:"number",dataLakeVariable:void 0})),a.value.options.dataLakeVariable?(a.value.options.dataLakeVariable.allowUserToChangeValue||I({...a.value.options.dataLakeVariable,allowUserToChangeValue:!0}),d()):r(l.getMiniWidgetLastValue(a.value.hash))}),z(()=>{a.value.options.dataLakeVariable&&i&&W(a.value.options.dataLakeVariable.id,i)}),(e,t)=>{var s,p,m,b,V,c,v,h,g,f,k;return D(),w("div",{class:M(["slider-container",((s=o(l).elementToShowOnDrawer)==null?void 0:s.hash)===o(a).hash&&o(l).editingMode?"bg-[#00000010] ":"border-0"]),onClick:t[1]||(t[1]=L=>o(l).editingMode&&o(l).showElementPropsDrawer(o(a).hash))},[B("div",{style:F({minWidth:((p=o(a).options.layout)==null?void 0:p.labelWidth)+"px"})},[((m=o(a).options.layout)==null?void 0:m.label)!==""?(D(),w("p",{key:0,style:F({color:(b=o(a).options.layout)!=null&&b.coloredLabel?(V=o(a).options.layout)==null?void 0:V.color:"#FFFFFF"}),class:"mr-3 mb-[3px]"},H((c=o(a).options.layout)==null?void 0:c.label),5)):j("",!0)],4),P(J,{"model-value":u.value,min:(v=o(a).options.layout)==null?void 0:v.minValue,max:(h=o(a).options.layout)==null?void 0:h.maxValue,"thumb-label":(g=o(a).options.layout)==null?void 0:g.showTooltip,"hide-details":"",class:M(["min-w-20",{"pointer-events-none":o(l).editingMode||!N.value,"scale-75":((f=o(a).options.layout)==null?void 0:f.size)==="small"}]),color:((k=o(a).options.layout)==null?void 0:k.color)||"white","onUpdate:modelValue":t[0]||(t[0]=L=>S(L))},null,8,["model-value","min","max","thumb-label","color","class"])],2)}}}),X=q(A,[["__scopeId","data-v-c8a1cdfd"]]);export{X as default};
