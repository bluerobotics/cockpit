import{A as z}from"./AlertIcon-P1MmqIrd.js";import{c as U,e as A,aT as R,r as j,w as F,h as r,o as $,j as q,m as T,n as m,p as W,q as C,s as Q,v as S,z as t,y as c,x as N,B as G,E as H,P as J,I as K,Q as X,ag as Y,aM as Z,ac as E,aR as ee,_ as ae}from"./index-BU8gSU8w.js";const te=U({__name:"Slider",props:{miniWidget:{}},setup(I){const i=A(),e=R(I).miniWidget,v=j(0);let l,u;const d=a=>{var n;let o;a==null||isNaN(Number(a))?o=((n=e.value.options.layout)==null?void 0:n.minValue)||0:o=Number(a),v.value=o};F(()=>i.miniWidgetManagerVars(e.value.hash).configMenuOpen,a=>{a===!0&&(i.showElementPropsDrawer(e.value.hash),setTimeout(()=>{i.miniWidgetManagerVars(e.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0});const _=r(()=>!s.value&&!i.editingMode&&i.isRealMiniWidget(e.value.hash)),s=r(()=>{var a;return!!((a=e.value.options.dataLakeVariable)!=null&&a.id)}),b=r(()=>{var a;return((a=e.value.options.dataLakeVariable)==null?void 0:a.allowUserToChangeValue)===!0}),B=r(()=>s.value&&b.value&&!i.editingMode),h=()=>{e.value.options.dataLakeVariable&&(l=Y(e.value.options.dataLakeVariable.id,a=>{u&&new Date().getTime()-u.getTime()<100||(u=new Date,d(a))}),d(Z(e.value.options.dataLakeVariable.id)))};F(()=>{var a;return(a=e.value.options.dataLakeVariable)==null?void 0:a.id},(a,o)=>{o&&l&&E(o,l),a&&h()});const O=a=>{if(!i.editingMode&&e.value.options.dataLakeVariable){const o=Number(a.toFixed(1));i.setMiniWidgetLastValue(e.value.hash,o),ee(e.value.options.dataLakeVariable.id,o)}};return $(()=>{var a;(!e.value.options||Object.keys(e.value.options).length===0)&&(e.value.isCustomElement=!0,i.updateElementOptions(e.value.hash,{layout:{label:"",minValue:0,maxValue:100,showTooltip:!0,color:"#FFFFFF",coloredLabel:!1,labelWidth:((a=e.value.options.layout)==null?void 0:a.labelWidth)||0},variableType:"number",dataLakeVariable:void 0})),e.value.options.dataLakeVariable?h():d(i.getMiniWidgetLastValue(e.value.hash))}),q(()=>{e.value.options.dataLakeVariable&&l&&E(e.value.options.dataLakeVariable.id,l)}),(a,o)=>{var n,V,g,k,y,f;return m(),T("div",{class:c(["slider-container",((n=t(i).elementToShowOnDrawer)==null?void 0:n.hash)===t(e).hash&&t(i).editingMode?"bg-[#00000010] ":"border-0"]),onClick:o[2]||(o[2]=p=>t(i).editingMode&&t(i).showElementPropsDrawer(t(e).hash))},[W("div",{style:N({minWidth:((V=t(e).options.layout)==null?void 0:V.labelWidth)+"px"})},[((g=t(e).options.layout)==null?void 0:g.label)!==""?(m(),T("p",{key:0,style:N({color:(k=t(e).options.layout)!=null&&k.coloredLabel?(y=t(e).options.layout)==null?void 0:y.color:"#FFFFFF"}),class:c(["mr-3 mb-[3px]",{"opacity-50":!s.value}])},G((f=t(e).options.layout)==null?void 0:f.label),7)):S("",!0)],4),C(X,{text:"This element is in display mode. To make it interactive, create or select a user-controlled data-lake variable",location:"top","open-delay":"500",disabled:b.value||!s.value},{activator:H(({props:p})=>{var L,w,M,x,D;return[W("div",J(p,{style:{display:"contents"}}),[C(K,{"model-value":v.value,min:(L=t(e).options.layout)==null?void 0:L.minValue,max:(w=t(e).options.layout)==null?void 0:w.maxValue,"thumb-label":(M=t(e).options.layout)==null?void 0:M.showTooltip,"hide-details":"",class:c(["min-w-20",{"scale-75":((x=t(e).options.layout)==null?void 0:x.size)==="small","opacity-30":!s.value,"pointer-events-none":!B.value}]),color:((D=t(e).options.layout)==null?void 0:D.color)||"white","onUpdate:modelValue":o[0]||(o[0]=P=>O(P))},null,8,["model-value","min","max","thumb-label","color","class"])],16)]}),_:1},8,["disabled"]),_.value?(m(),Q(z,{key:0,icon:"mdi-connection",color:"#b9af1d",animation:"pulse",class:"absolute center ml-16 mt-[10px]",tooltip:"This element isn't connected to a data-lake variable yet. Click here to configure it.",onClick:o[1]||(o[1]=p=>t(i).showElementPropsDrawer(t(e).hash))})):S("",!0)],2)}}}),se=ae(te,[["__scopeId","data-v-9abd7022"]]);export{se as default};
