import{c as P,J as F,u as B,y as U,K as k,r as p,k as c,w as D,L as j,M as O,h as N,l as g,m as w,G as A,H as r,T as z,n as s,x as G,t as f,N as x,V as R,O as E,v as a,P as H,Q as J,R as K,S as I,U as L,W as Q,F as $}from"./index-Bts4qd0i.js";const q={class:"flex items-center w-[95px] h-12 text-white justify-center"},X={class:"relative right-0 flex flex-col w-[4rem] select-none text-sm font-semibold leading-4 text-end -mr-2"},Y={class:"w-full"},Z={class:"flex justify-end gap-x-1 items-center"},ee={class:"font-mono"},te={class:"w-full"},oe={key:0,class:"flex justify-end gap-x-1 items-center"},se={class:"font-mono mt-[2px]"},ae={key:1,class:"flex justify-end gap-x-1 items-center text-yellow-100"},le={class:"font-mono mt-[2px]"},ne={class:"text-red-500 text-center text-sm w-[full]"},u=500,ue=P({__name:"BatteryIndicator",props:{miniWidget:{}},setup(S){const e=F(S).miniWidget,h={showCurrent:!0,showPower:!0,toggleInterval:1e3},o=B(),V=U(),C=k(),v=p(!0),d=p(void 0),m=p(""),y=p(void 0),l=p(e.value.options.toggleInterval??h.toggleInterval),_=c(()=>{var i;return((i=o==null?void 0:o.powerSupply)==null?void 0:i.voltage)===void 0?"--":Math.abs(o.powerSupply.voltage)>=100?o.powerSupply.voltage.toFixed(0):o.powerSupply.voltage.toFixed(1)}),M=c(()=>{var i;return((i=o==null?void 0:o.powerSupply)==null?void 0:i.current)===void 0?"--":Math.abs(o.powerSupply.current)>=100?o.powerSupply.current.toFixed(0):o.powerSupply.current.toFixed(1)}),T=c(()=>o.instantaneousWatts!==void 0?o.instantaneousWatts.toFixed(1):"--"),W=c(()=>"mdi-battery"),b=()=>{(d.value||y.value)&&(clearInterval(d.value),clearTimeout(y.value)),l.value<u?(e.value.options.toggleInterval=u,m.value=`Interval must be at least ${u}ms.`):e.value.options.toggleInterval=l.value,!e.value.options.showCurrent&&!e.value.options.showPower&&(e.value.options.showCurrent=!0,e.value.options.showPower=!0,m.value="At least one of the options must be enabled."),e.value.options.showCurrent&&e.value.options.showPower?d.value=setInterval(()=>{v.value=!v.value},e.value.options.toggleInterval):v.value=e.value.options.showCurrent,y.value=setTimeout(()=>{m.value="",l.value<u&&(l.value=u)},5e3)};return D([()=>e.value.options,l],b,{deep:!0}),j(()=>{e.value.options=Object.assign({},h,e.value.options),b(),O.registerUsage("Instantaneous Watts")}),N(()=>{d.value===void 0&&clearInterval(d.value)}),(i,t)=>(w(),g($,null,[A((w(),g("div",q,[s("span",{class:G(["relative w-[1.5rem] mdi battery-icon left-0 mr-3",[W.value]])},t[4]||(t[4]=[s("span",{class:"absolute text-sm text-yellow-400 -bottom-[3px] left-[4px] mdi mdi-alert-circle"},null,-1)]),2),s("div",X,[s("div",Y,[s("div",Z,[s("span",ee,f(_.value),1),t[5]||(t[5]=s("div",{class:"w-[15px] mr-[1px] -ml-[1px]"},"V",-1))])]),s("div",te,[v.value?(w(),g("div",oe,[s("span",se,f(M.value),1),t[6]||(t[6]=s("div",{class:"w-[15px]"},"A",-1))])):(w(),g("div",ae,[s("span",le,f(T.value),1),t[7]||(t[7]=s("div",{class:"w-[15px]"},"W",-1))]))])])])),[[z,"Battery information"]]),r(Q,{modelValue:a(V).miniWidgetManagerVars(a(e).hash).configMenuOpen,"onUpdate:modelValue":t[3]||(t[3]=n=>a(V).miniWidgetManagerVars(a(e).hash).configMenuOpen=n),width:"auto"},{default:x(()=>[r(R,{class:"pa-4 text-white w-[20rem]",style:E([{"border-radius":"15px"},a(C).globalGlassMenuStyles])},{default:x(()=>[r(H,{class:"text-center"},{default:x(()=>t[8]||(t[8]=[J("Battery Indicator Config")])),_:1,__:[8]}),r(K,{class:"flex flex-col gap-y-4"},{default:x(()=>[r(I,{modelValue:a(e).options.showCurrent,"onUpdate:modelValue":t[0]||(t[0]=n=>a(e).options.showCurrent=n),label:"Show Current","hide-details":""},null,8,["modelValue"]),r(I,{modelValue:a(e).options.showPower,"onUpdate:modelValue":t[1]||(t[1]=n=>a(e).options.showPower=n),label:"Show Power","hide-details":""},null,8,["modelValue"]),r(L,{modelValue:l.value,"onUpdate:modelValue":t[2]||(t[2]=n=>l.value=n),modelModifiers:{number:!0},label:"Toggle Interval (ms)",type:"number",min:u,step:"100",density:"compact",variant:"outlined",disabled:!a(e).options.showCurrent||!a(e).options.showPower},null,8,["modelValue","disabled"]),s("p",ne,f(m.value),1)]),_:1})]),_:1},8,["style"])]),_:1},8,["modelValue"])],64))}});export{ue as default};
