import{c as y,e as S,h as V,t as O,r as b,w as d,o as W,j as _,m as x,n as E,p as C,q as j,y as k,z as s,ap as z,x as B,aO as T,ac as I,aK as N,a5 as L,_ as P}from"./index-qrUBhjZ5.js";const U=y({__name:"Dropdown",props:{miniWidget:{}},setup(w){var m,c;const i=S();let n;const r=w,l=V(()=>{var a;return((a=e.value.options.layout)==null?void 0:a.selectorOptions)||[]}),e=O(r).miniWidget,p=b(l.value.find(a=>{var t;return a.value===((t=r.miniWidget.options.lastSelected)==null?void 0:t.value)})||l.value[0]),o=b(((m=r.miniWidget.options.lastSelected)==null?void 0:m.value)||((c=l.value[0])==null?void 0:c.value));d(()=>i.miniWidgetManagerVars(e.value.hash).configMenuOpen,a=>{a===!0&&(i.showElementPropsDrawer(e.value.hash),setTimeout(()=>{i.miniWidgetManagerVars(e.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0}),d(p,a=>{i.updateElementOptions(e.value.hash,{...e.value.options,lastSelected:a})});const D=a=>{if(i.editingMode)return;const t=l.value.find(u=>u.value===a);t&&(o.value=a,e.value.options.dataLakeVariable&&T(e.value.options.dataLakeVariable.id,a),i.setMiniWidgetLastValue(e.value.hash,t.value))},M=V(()=>{var a,t;return((t=(a=e.value.options)==null?void 0:a.dataLakeVariable)==null?void 0:t.persistent)===!0}),v=()=>{e.value.options.dataLakeVariable&&(n=I(e.value.options.dataLakeVariable.id,a=>{o.value=String(a)}),o.value=String(N(e.value.options.dataLakeVariable.id)))};return d(()=>{var a;return(a=e.value.options.dataLakeVariable)==null?void 0:a.id},(a,t)=>{t&&n&&L(t,n),a&&v()}),W(()=>{(!e.value.options||Object.keys(e.value.options).length===0)&&(e.value.isCustomElement=!0,i.updateElementOptions(e.value.hash,{layout:{selectorOptions:[],align:"start",width:168},variableType:"string",dataLakeVariable:void 0})),e.value.options.dataLakeVariable?v():p.value=i.getMiniWidgetLastValue(e.value.hash)}),_(()=>{e.value.options.dataLakeVariable&&n&&L(e.value.options.dataLakeVariable.id,n)}),(a,t)=>{var u,h,g;return E(),x("div",{class:k(["flex w-full",((u=s(i).elementToShowOnDrawer)==null?void 0:u.hash)===s(e).hash&&s(i).editingMode?"bg-[#00000010] ":"border-0"]),style:B({width:"100%",justifyContent:(h=s(e).options.layout)==null?void 0:h.align}),onClick:t[1]||(t[1]=f=>s(i).editingMode&&s(i).showElementPropsDrawer(s(e).hash))},[C("div",null,[j(z,{modelValue:o.value,"onUpdate:modelValue":[t[0]||(t[0]=f=>o.value=f),D],items:l.value,"item-title":"name","item-value":"value",theme:"dark",density:"compact",variant:"filled","min-width":((g=s(e).options.layout)==null?void 0:g.width)||168,"hide-details":"",class:k(["text-white",{"pointer-events-none":s(i).editingMode||!M.value}])},null,8,["modelValue","items","min-width","class"])])],6)}}}),K=P(U,[["__scopeId","data-v-1b8609ba"]]);export{K as default};
