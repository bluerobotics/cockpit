import{c as N,y as C,aQ as _,r as O,w as W,o as E,aN as U,h as I,l as D,m as F,n as z,H as B,s as $,v as t,N as M,t as P,x,aR as R,a9 as j,aO as H,a1 as Q,_ as q}from"./index-Dk-z1IUT.js";const A=N({__name:"Slider",props:{miniWidget:{}},setup(S){const l=C(),e=_(S).miniWidget,u=O(0);let n,s,r;const d=a=>{var i;let o;a==null||isNaN(Number(a))?o=((i=e.value.options.layout)==null?void 0:i.minValue)||0:o=Number(a),u.value=o};W(()=>l.miniWidgetManagerVars(e.value.hash).configMenuOpen,a=>{a===!0&&(l.showElementPropsDrawer(e.value.hash),setTimeout(()=>{l.miniWidgetManagerVars(e.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0});const p=()=>{n&&s&&(console.debug(`Will stop listening to variable ${s}.`),Q(s,n))},m=a=>{console.debug(`Will start listening to variable ${a}.`);const o=l.getMiniWidgetLastValue(e.value.hash);d(o),p(),n=j(a,i=>{r&&new Date().getTime()-r.getTime()<100||(r=new Date,d(i))}),s=a};W(()=>{var a;return(a=e.value.options.dataLakeVariable)==null?void 0:a.name},a=>{a&&m(a)});const T=a=>{if(!l.editingMode&&e.value.options.dataLakeVariable){const o=Number(a.toFixed(1));l.setMiniWidgetLastValue(e.value.hash,o),H(e.value.options.dataLakeVariable.name,o)}};return E(()=>{var a,o;(!e.value.options||Object.keys(e.value.options).length===0)&&(e.value.isCustomElement=!0,l.updateElementOptions(e.value.hash,{layout:{label:"",minValue:0,maxValue:100,showTooltip:!0,color:"#FFFFFF",coloredLabel:!1,labelWidth:((a=e.value.options.layout)==null?void 0:a.labelWidth)||0},variableType:"number",dataLakeVariable:void 0})),e.value.options.dataLakeVariable&&!e.value.options.dataLakeVariable.allowUserToChangeValue&&U({...e.value.options.dataLakeVariable,allowUserToChangeValue:!0}),(o=e.value.options.dataLakeVariable)!=null&&o.name&&m(e.value.options.dataLakeVariable.name)}),I(()=>{p()}),(a,o)=>{var i,b,c,V,h,g,v,f,y,L,k;return F(),D("div",{class:x(["slider-container",((i=t(l).elementToShowOnDrawer)==null?void 0:i.hash)===t(e).hash&&t(l).editingMode?"bg-[#00000010] ":"border-0"]),onClick:o[1]||(o[1]=w=>t(l).editingMode&&t(l).showElementPropsDrawer(t(e).hash))},[z("div",{style:M({minWidth:((b=t(e).options.layout)==null?void 0:b.labelWidth)+"px"})},[((c=t(e).options.layout)==null?void 0:c.label)!==""?(F(),D("p",{key:0,style:M({color:(V=t(e).options.layout)!=null&&V.coloredLabel?(h=t(e).options.layout)==null?void 0:h.color:"#FFFFFF"}),class:"mr-3 mb-[3px]"},P((g=t(e).options.layout)==null?void 0:g.label),5)):$("",!0)],4),B(R,{"model-value":u.value,min:(v=t(e).options.layout)==null?void 0:v.minValue,max:(f=t(e).options.layout)==null?void 0:f.maxValue,"thumb-label":(y=t(e).options.layout)==null?void 0:y.showTooltip,"hide-details":"",class:x(["min-w-20",{"pointer-events-none":t(l).editingMode,"scale-75":((L=t(e).options.layout)==null?void 0:L.size)==="small"}]),color:((k=t(e).options.layout)==null?void 0:k.color)||"white","onUpdate:modelValue":o[0]||(o[0]=w=>T(w))},null,8,["model-value","min","max","thumb-label","color","class"])],2)}}}),K=q(A,[["__scopeId","data-v-b3b4a207"]]);export{K as default};
