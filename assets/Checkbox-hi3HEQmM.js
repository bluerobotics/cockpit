import{A as W}from"./AlertIcon-BxalOmNb.js";import{c as B,e as E,t as F,r as O,w as V,h as r,o as P,j as S,m as f,n as d,v as L,q as y,s as z,z as o,y as p,B as A,E as I,p as N,aN as j,aO as R,Y as U,a8 as $,x as q,aP as K,ac as Y,aK as _,a5 as w}from"./index-Du36eRUo.js";const Q=B({__name:"Checkbox",props:{miniWidget:{}},setup(x){const a=E(),e=F(x).miniWidget,l=O(!1);let s;const C=()=>{a.editingMode||(a.setMiniWidgetLastValue(e.value.hash,l.value),e.value.options.dataLakeVariable&&K(e.value.options.dataLakeVariable.id,l.value))};V(()=>a.miniWidgetManagerVars(e.value.hash).configMenuOpen,t=>{t===!0&&(a.showElementPropsDrawer(e.value.hash),setTimeout(()=>{a.miniWidgetManagerVars(e.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0});const M=r(()=>!n.value&&!a.editingMode&&a.isRealMiniWidget(e.value.hash)),n=r(()=>{var t;return!!((t=e.value.options.dataLakeVariable)!=null&&t.id)}),c=r(()=>{var t;return((t=e.value.options.dataLakeVariable)==null?void 0:t.allowUserToChangeValue)===!0}),D=r(()=>n.value&&c.value&&!a.editingMode),v=()=>{e.value.options.dataLakeVariable&&(s=Y(e.value.options.dataLakeVariable.id,t=>{l.value=!!t}),l.value=!!_(e.value.options.dataLakeVariable.id))};return V(()=>{var t;return(t=e.value.options.dataLakeVariable)==null?void 0:t.id},(t,i)=>{i&&s&&w(i,s),t&&v()}),P(()=>{(!e.value.options||Object.keys(e.value.options).length===0)&&(e.value.isCustomElement=!0,a.updateElementOptions(e.value.hash,{layout:{label:"",align:"center",color:"#FFFFFF"},variableType:"boolean",dataLakeVariable:void 0})),e.value.options.dataLakeVariable?v():l.value=a.getMiniWidgetLastValue(e.value.hash)}),S(()=>{e.value.options.dataLakeVariable&&s&&w(e.value.options.dataLakeVariable.id,s)}),(t,i)=>{var m,h,b,g;return d(),f("div",{class:p(["flex items-center h-[30px] min-w-[50px] px-1",((m=o(a).elementToShowOnDrawer)==null?void 0:m.hash)===o(e).hash&&o(a).editingMode?"bg-[#00000010] ":"border-0"]),style:q({justifyContent:(h=o(e).options.layout)==null?void 0:h.align}),onClick:i[2]||(i[2]=u=>o(a).editingMode&&o(a).showElementPropsDrawer(o(e).hash))},[((b=o(e).options.layout)==null?void 0:b.label)!==""?(d(),f("p",{key:0,class:p(["mr-3 mb-[3px] text-white",{"opacity-50":!n.value}])},A((g=o(e).options.layout)==null?void 0:g.label),3)):L("",!0),y($,{text:"This element is in display mode. To make it interactive, create or select a user-controlled data-lake variable",location:"top","open-delay":"500",disabled:c.value||!n.value},{activator:I(({props:u})=>{var k;return[N("div",j(R(u)),[y(U,{modelValue:l.value,"onUpdate:modelValue":[i[0]||(i[0]=T=>l.value=T),C],"hide-details":"",color:(k=o(e).options.layout)==null?void 0:k.color,class:p(["text-white",{"opacity-30":!n.value,"cursor-default pointer pointer-events-none":!D.value}]),theme:"dark"},null,8,["modelValue","color","class"])],16)]}),_:1},8,["disabled"]),M.value?(d(),z(W,{key:1,icon:"mdi-connection",color:"#b9af1d",animation:"pulse",class:"absolute center ml-10 mt-[10px]",tooltip:"This element isn't connected to a data-lake variable yet. Click here to configure it.",onClick:i[1]||(i[1]=u=>o(a).showElementPropsDrawer(o(e).hash))})):L("",!0)],6)}}});export{Q as default};
