import{A as B}from"./AlertIcon-f5UCA0Ug.js";import{c as R,e as U,aR as A,r as j,w as F,h as r,o as $,j as q,m as W,n as m,p as T,q as C,s as K,v as S,z as t,y as c,x as N,B as G,E as H,aN as J,aO as Q,I as X,a8 as Y,ac as Z,aK as ee,a5 as E,aP as ae,_ as te}from"./index-DRDfdZm5.js";const oe=R({__name:"Slider",props:{miniWidget:{}},setup(I){const i=U(),e=A(I).miniWidget,v=j(0);let l,u;const d=a=>{var s;let o;a==null||isNaN(Number(a))?o=((s=e.value.options.layout)==null?void 0:s.minValue)||0:o=Number(a),v.value=o};F(()=>i.miniWidgetManagerVars(e.value.hash).configMenuOpen,a=>{a===!0&&(i.showElementPropsDrawer(e.value.hash),setTimeout(()=>{i.miniWidgetManagerVars(e.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0});const O=r(()=>!n.value&&!i.editingMode&&i.isRealMiniWidget(e.value.hash)),n=r(()=>{var a;return!!((a=e.value.options.dataLakeVariable)!=null&&a.id)}),P=r(()=>{var a;return((a=e.value.options.dataLakeVariable)==null?void 0:a.allowUserToChangeValue)===!0}),b=r(()=>{var a;return!!((a=e.value.options.dataLakeVariable)!=null&&a.id)&&P.value&&!i.editingMode}),h=()=>{e.value.options.dataLakeVariable&&(l=Z(e.value.options.dataLakeVariable.id,a=>{u&&new Date().getTime()-u.getTime()<100||(u=new Date,d(a))}),d(ee(e.value.options.dataLakeVariable.id)))};F(()=>{var a;return(a=e.value.options.dataLakeVariable)==null?void 0:a.id},(a,o)=>{o&&l&&E(o,l),a&&h()});const _=a=>{if(!i.editingMode&&e.value.options.dataLakeVariable){const o=Number(a.toFixed(1));i.setMiniWidgetLastValue(e.value.hash,o),ae(e.value.options.dataLakeVariable.id,o)}};return $(()=>{var a;(!e.value.options||Object.keys(e.value.options).length===0)&&(e.value.isCustomElement=!0,i.updateElementOptions(e.value.hash,{layout:{label:"",minValue:0,maxValue:100,showTooltip:!0,color:"#FFFFFF",coloredLabel:!1,labelWidth:((a=e.value.options.layout)==null?void 0:a.labelWidth)||0},variableType:"number",dataLakeVariable:void 0})),e.value.options.dataLakeVariable?h():d(i.getMiniWidgetLastValue(e.value.hash))}),q(()=>{e.value.options.dataLakeVariable&&l&&E(e.value.options.dataLakeVariable.id,l)}),(a,o)=>{var s,V,g,k,y,f;return m(),W("div",{class:c(["slider-container",((s=t(i).elementToShowOnDrawer)==null?void 0:s.hash)===t(e).hash&&t(i).editingMode?"bg-[#00000010] ":"border-0"]),onClick:o[2]||(o[2]=p=>t(i).editingMode&&t(i).showElementPropsDrawer(t(e).hash))},[T("div",{style:N({minWidth:((V=t(e).options.layout)==null?void 0:V.labelWidth)+"px"})},[((g=t(e).options.layout)==null?void 0:g.label)!==""?(m(),W("p",{key:0,style:N({color:(k=t(e).options.layout)!=null&&k.coloredLabel?(y=t(e).options.layout)==null?void 0:y.color:"#FFFFFF"}),class:c(["mr-3 mb-[3px]",{"opacity-50":!n.value}])},G((f=t(e).options.layout)==null?void 0:f.label),7)):S("",!0)],4),C(Y,{text:"This element is in display mode. To make it interactive, create or select a user-controlled data-lake variable",location:"top","open-delay":"500",disabled:b.value||!n.value},{activator:H(({props:p})=>{var L,w,x,D,M;return[T("div",J(Q(p)),[C(X,{"model-value":v.value,min:(L=t(e).options.layout)==null?void 0:L.minValue,max:(w=t(e).options.layout)==null?void 0:w.maxValue,"thumb-label":(x=t(e).options.layout)==null?void 0:x.showTooltip,"hide-details":"",class:c(["min-w-20",{"scale-75":((D=t(e).options.layout)==null?void 0:D.size)==="small","opacity-30":!n.value,"pointer-events-none":!b.value}]),color:((M=t(e).options.layout)==null?void 0:M.color)||"white","onUpdate:modelValue":o[0]||(o[0]=z=>_(z))},null,8,["model-value","min","max","thumb-label","color","class"])],16)]}),_:1},8,["disabled"]),O.value?(m(),K(B,{key:0,icon:"mdi-connection",color:"#b9af1d",animation:"pulse",class:"absolute center ml-16 mt-[10px]",tooltip:"This element isn't connected to a data-lake variable yet. Click here to configure it.",onClick:o[1]||(o[1]=p=>t(i).showElementPropsDrawer(t(e).hash))})):S("",!0)],2)}}}),ne=te(oe,[["__scopeId","data-v-ec0bb3a4"]]);export{ne as default};
