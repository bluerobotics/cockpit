import{c as b,y as M,k as y,J as S,r as h,w as f,o as k,au as C,h as O,av as W,aw as x,l as D,m as E,n as _,H as A,N,Q as T,q as o,v as g,ah as B,O as j,ax as z,_ as L}from"./index-DvPXnHXh.js";const P=b({__name:"Dropdown",props:{miniWidget:{}},setup(V){var p,v;const i=M(),d=V,l=y(()=>{var a;return((a=e.value.options.layout)==null?void 0:a.selectorOptions)||[]}),e=S(d).miniWidget,s=h(l.value.find(a=>{var t;return a.value===((t=d.miniWidget.options.lastSelected)==null?void 0:t.value)})||l.value[0]),r=h(((p=d.miniWidget.options.lastSelected)==null?void 0:p.value)||((v=l.value[0])==null?void 0:v.value));f(()=>i.miniWidgetManagerVars(e.value.hash).configMenuOpen,a=>{a===!0&&(i.showElementPropsDrawer(e.value.hash),setTimeout(()=>{i.miniWidgetManagerVars(e.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0}),f(s,a=>{i.updateElementOptions(e.value.hash,{...e.value.options,lastSelected:a})});const w=a=>{if(i.editingMode)return;const t=l.value.find(n=>n.value===a);t&&(r.value=a,e.value.options.actionVariable&&z(e.value.options.actionVariable.id,a),i.setMiniWidgetLastValue(e.value.hash,t.value))};return k(()=>{var a;if((!e.value.options||Object.keys(e.value.options).length===0)&&(e.value.isCustomElement=!0,i.updateElementOptions(e.value.hash,{layout:{selectorOptions:[],align:"start",width:168},variableType:"string",actionVariable:void 0})),e.value.options.actionVariable){C(e.value.options.actionVariable.name,n=>{s.value=l.value.find(u=>u.value===n)});const t=i.getMiniWidgetLastValue(e.value.hash);s.value=l.value.find(n=>n.value===t)}((a=e.value.options.lastSelected)==null?void 0:a.name)!==""&&(s.value=e.value.options.lastSelected)}),O(()=>{e.value.options.actionVariable&&(W(e.value.options.actionVariable.name),x(e.value.options.actionVariable.id))}),(a,t)=>{var n,u,c;return D(),E("div",{class:g(["flex w-full",((n=o(i).elementToShowOnDrawer)==null?void 0:n.hash)===o(e).hash&&o(i).editingMode?"bg-[#00000010] ":"border-0"]),style:j({width:"100%",justifyContent:(u=o(e).options.layout)==null?void 0:u.align}),onClick:t[1]||(t[1]=m=>o(i).editingMode&&o(i).showElementPropsDrawer(o(e).hash))},[_("div",null,[A(B,{modelValue:r.value,"onUpdate:modelValue":[t[0]||(t[0]=m=>r.value=m),w],items:l.value,"item-title":"name","item-value":"value",theme:"dark",density:"compact",variant:"filled","min-width":((c=o(e).options.layout)==null?void 0:c.width)||168,"hide-details":"",class:g(["text-white",{"pointer-events-none":o(i).editingMode}])},{default:N(()=>t[2]||(t[2]=[T(" > ")])),_:1},8,["modelValue","items","min-width","class"])])],6)}}}),q=L(P,[["__scopeId","data-v-b8d5e9a4"]]);export{q as default};
