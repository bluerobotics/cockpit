import{c as O,bD as $,k as y,K as I,y as W,r as u,J as D,L as N,bL as k,al as z,aS as E,w as j,l as A,m as x,n as c,H as s,I as H,G as S,a$ as K,N as _,v as n,as as P,O as i,V as G,P as J,Q as M,R as F,U as Q,aP as q,a7 as L,T as X,aR as Y,bH as Z,W as ee,bM as ae,F as te,bN as se,a9 as le,_ as oe}from"./index-Dk-z1IUT.js";const ne={class:"w-full h-full"},ie=["src"],re={class:"flex items-center justify-between"},ue=O({__name:"IFrame",props:{widget:{}},setup(U){$(e=>({e95d7e2c:T.value}));const C=I(),r=W(),m=u(),t=D(U).widget,g=u(!1),p=u(0),o=u(t.value.options.source),d=u(!1),f=u(""),v=e=>se(e)?!0:"URL is not valid.",w=()=>{const e=v(o.value);if(e!==!0){f.value=`${e} Please enter a valid URL.`,d.value=!0;return}t.value.options.source=o.value,f.value=`IFrame URL sucessfully updated to '${o.value}'.`,d.value=!0},V=e=>{if(e.data.type!=="cockpit:listenToDatalakeVariables")return;const{variable:a}=e.data;le(a,l=>{m.value.contentWindow.postMessage({type:"cockpit:datalakeVariable",variable:a,value:l},"*")})};N(()=>{window.addEventListener("message",V,!0),Object.keys(t.value.options).length===0&&(t.value.options={source:"http://"+k},o.value=k)}),z(()=>{window.removeEventListener("message",V,!0)});const{width:b,height:h}=E(),R=y(()=>{let e="";return e=e.concat(" ","position: absolute;"),e=e.concat(" ",`left: ${t.value.position.x*b.value}px;`),e=e.concat(" ",`top: ${t.value.position.y*h.value}px;`),e=e.concat(" ",`width: ${t.value.size.width*b.value}px;`),e=e.concat(" ",`height: ${t.value.size.height*h.value}px;`),r.editingMode&&(e=e.concat(" ","pointer-events:none; border:0;")),r.isWidgetVisible(t.value)||(e=e.concat(" ","display: none;")),e}),T=y(()=>(100-p.value)/100);function B(){console.log("Finished loading"),g.value=!0}return j(t,()=>{r.widgetManagerVars(t.value.hash).configMenuOpen===!1&&v(o.value)!==!0&&(o.value=t.value.options.source)},{deep:!0}),(e,a)=>(x(),A(te,null,[c("div",ne,[(x(),H(P,{to:".widgets-view"},[S(c("iframe",{ref_key:"iframe",ref:m,src:n(t).options.source,style:_(R.value),frameborder:"0",onLoad:B},null,44,ie),[[K,g.value]])])),s(ee,{modelValue:n(r).widgetManagerVars(n(t).hash).configMenuOpen,"onUpdate:modelValue":a[3]||(a[3]=l=>n(r).widgetManagerVars(n(t).hash).configMenuOpen=l),"min-width":"400","max-width":"35%"},{default:i(()=>[s(G,{class:"pa-2",style:_(n(C).globalGlassMenuStyles)},{default:i(()=>[s(J,{class:"text-center"},{default:i(()=>a[5]||(a[5]=[M("Settings")])),_:1,__:[5]}),s(F,null,{default:i(()=>[a[6]||(a[6]=c("p",null,"Iframe Source",-1)),c("div",re,[s(Q,{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=l=>o.value=l),variant:"filled",outlined:"",rules:[v],onKeydown:q(w,["enter"])},null,8,["modelValue","rules"]),S(s(L,{icon:"mdi-check",class:"mx-1 mb-5 bg-[#FFFFFF22]",rounded:"lg",flat:"",onClick:w},null,512),[[X,"Set",void 0,{bottom:!0}]])])]),_:1,__:[6]}),s(F,null,{default:i(()=>[s(Y,{modelValue:p.value,"onUpdate:modelValue":a[1]||(a[1]=l=>p.value=l),label:"Transparency",color:"white",min:0,max:90},null,8,["modelValue"])]),_:1}),s(Z,{class:"flex justify-end"},{default:i(()=>[s(L,{color:"white",onClick:a[2]||(a[2]=l=>n(r).widgetManagerVars(n(t).hash).configMenuOpen=!1)},{default:i(()=>a[7]||(a[7]=[M(" Close ")])),_:1,__:[7]})]),_:1})]),_:1},8,["style"])]),_:1},8,["modelValue"])]),s(ae,{"open-snackbar":d.value,message:f.value,duration:3e3,"close-button":!1,"onUpdate:openSnackbar":a[4]||(a[4]=l=>d.value=l)},null,8,["open-snackbar","message"])],64))}}),pe=oe(ue,[["__scopeId","data-v-fbb59793"]]);export{pe as default};
