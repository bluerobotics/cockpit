import{c as k,y as L,J as w,r as y,w as c,o as F,bb as M,h as W,l as h,m as v,H as D,s as x,x as b,v as o,aE as C,t as E,aA as S,bc as T,aw as O}from"./index-Bts4qd0i.js";const U={key:0,class:"ml-3 mb-[3px] whitespace-nowrap"},A=k({__name:"Switch",props:{miniWidget:{}},setup(V){const a=L(),s=V,e=w(s).miniWidget,i=y(!0);let r;c(()=>a.miniWidgetManagerVars(e.value.hash).configMenuOpen,t=>{t===!0&&(a.showElementPropsDrawer(e.value.hash),setTimeout(()=>{a.miniWidgetManagerVars(e.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0});const u=()=>{e.value.options.dataLakeVariable&&(r=S(e.value.options.dataLakeVariable.name,t=>{i.value=t}),i.value=a.getMiniWidgetLastValue(e.value.hash))};c(()=>{var t;return(t=e.value.options.dataLakeVariable)==null?void 0:t.name},t=>{t&&u()},{immediate:!0});const f=()=>{a.editingMode||e.value.options.dataLakeVariable&&(a.setMiniWidgetLastValue(e.value.hash,i.value),T(e.value.options.dataLakeVariable.name,i.value))};return F(()=>{var t,l,n;(!s.miniWidget.options||Object.keys(s.miniWidget.options).length===0)&&(e.value.isCustomElement=!0,a.updateElementOptions(s.miniWidget.hash,{layout:{align:((t=e.value.options.layout)==null?void 0:t.align)||"center",color:((l=e.value.options.layout)==null?void 0:l.color)||"#FFFFFF",label:((n=e.value.options.layout)==null?void 0:n.label)||""},variableType:"boolean",dataLakeVariable:void 0,toggled:!0}),i.value=!0),e.value.options.dataLakeVariable&&!e.value.options.dataLakeVariable.allowUserToChangeValue&&M({...e.value.options.dataLakeVariable,allowUserToChangeValue:!0}),u()}),W(()=>{e.value.options.dataLakeVariable&&r&&O(e.value.options.dataLakeVariable.name,r)}),(t,l)=>{var n,d,p,m;return v(),h("div",{class:b(["flex items-center h-[30px] px-4",((n=o(a).elementToShowOnDrawer)==null?void 0:n.hash)===o(e).hash&&o(a).editingMode?"bg-[#00000010] ":"border-0"]),onClick:l[1]||(l[1]=g=>o(a).editingMode&&o(a).showElementPropsDrawer(o(e).hash))},[D(C,{modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=g=>i.value=g),"hide-details":"",color:((d=o(e).options.layout)==null?void 0:d.color)||"#FFFFFF",class:b([{"pointer-events-none":o(a).editingMode},"min-w-[35px]"]),onChange:f},null,8,["modelValue","color","class"]),((p=o(e).options.layout)==null?void 0:p.label)!==""?(v(),h("p",U,E((m=o(e).options.layout)==null?void 0:m.label),1)):x("",!0)],2)}}});export{A as default};
