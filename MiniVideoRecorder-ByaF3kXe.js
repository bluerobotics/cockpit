import{y as Zt,z as Jt,A as Ns,B as Kt,C as Is,F as Qt,G as ks,H as Vs,I as es,J as As,K as Os,L as Ds,M as Ms,N as Rs,O as ts,p as g,P as Vt,Q as Us,V as Ls,R as Fs,S as Bs,U as zs,q as J,v as At,W as Ys,k as ht,X as ss,Y as Xt,h as d,Z as Hs,_ as vt,$ as Ws,a0 as st,a1 as js,a2 as $s,a3 as as,d as Ot,o as _,i as Ve,a4 as Xs,a5 as p,a6 as We,a7 as j,a8 as w,t as k,a9 as is,aa as qs,ab as os,c as C,a as u,ac as Me,ad as ft,ae as we,j as B,n as he,af as tt,ag as Gs,ah as Zs,ai as Js,aj as Ks,ak as Qs,al as ea,am as ta,an as ns,ao as qt,ap as sa,aq as ls,ar as rs,as as cs,at as aa,au as ia,av as oa,aw as na,ax as la,ay as Gt,az as ra,aA as ca,aB as ua,aC as da,aD as fa,aE as va,w as ha,aF as ma,aG as pa,aH as ga,aI as ya,aJ as _a,aK as Ta,aL as xa,aM as ba,aN as qe,aO as wa,r as Ea,b as It,aP as Pa,aQ as Sa}from"./index-BMLBxTf1.js";var us={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(l){(function(S,v,D,y){var P=["","webkit","Moz","MS","ms","o"],$=v.createElement("div"),H="function",m=Math.round,M=Math.abs,N=Date.now;function r(e,t,s){return setTimeout(ie(e,s),t)}function ee(e,t,s){return Array.isArray(e)?(V(e,s[t],s),!0):!1}function V(e,t,s){var a;if(e)if(e.forEach)e.forEach(t,s);else if(e.length!==y)for(a=0;a<e.length;)t.call(s,e[a],a,e),a++;else for(a in e)e.hasOwnProperty(a)&&t.call(s,e[a],a,e)}function U(e,t,s){var a="DEPRECATED METHOD: "+t+`
`+s+` AT 
`;return function(){var i=new Error("get-stack-trace"),c=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",b=S.console&&(S.console.warn||S.console.log);return b&&b.call(S.console,a,c),e.apply(this,arguments)}}var I;typeof Object.assign!="function"?I=function(t){if(t===y||t===null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(t),a=1;a<arguments.length;a++){var i=arguments[a];if(i!==y&&i!==null)for(var c in i)i.hasOwnProperty(c)&&(s[c]=i[c])}return s}:I=Object.assign;var x=U(function(t,s,a){for(var i=Object.keys(s),c=0;c<i.length;)(!a||a&&t[i[c]]===y)&&(t[i[c]]=s[i[c]]),c++;return t},"extend","Use `assign`."),re=U(function(t,s){return x(t,s,!0)},"merge","Use `assign`.");function z(e,t,s){var a=t.prototype,i;i=e.prototype=Object.create(a),i.constructor=e,i._super=a,s&&I(i,s)}function ie(e,t){return function(){return e.apply(t,arguments)}}function oe(e,t){return typeof e==H?e.apply(t&&t[0]||y,t):e}function X(e,t){return e===y?t:e}function te(e,t,s){V(f(t),function(a){e.addEventListener(a,s,!1)})}function ne(e,t,s){V(f(t),function(a){e.removeEventListener(a,s,!1)})}function _e(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function E(e,t){return e.indexOf(t)>-1}function f(e){return e.trim().split(/\s+/g)}function L(e,t,s){if(e.indexOf&&!s)return e.indexOf(t);for(var a=0;a<e.length;){if(s&&e[a][s]==t||!s&&e[a]===t)return a;a++}return-1}function F(e){return Array.prototype.slice.call(e,0)}function Te(e,t,s){for(var a=[],i=[],c=0;c<e.length;){var b=t?e[c][t]:e[c];L(i,b)<0&&a.push(e[c]),i[c]=b,c++}return s&&(t?a=a.sort(function(Q,ae){return Q[t]>ae[t]}):a=a.sort()),a}function ce(e,t){for(var s,a,i=t[0].toUpperCase()+t.slice(1),c=0;c<P.length;){if(s=P[c],a=s?s+i:t,a in e)return a;c++}return y}var me=1;function W(){return me++}function Ae(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||S}var se=/mobile|tablet|ip(ad|hone|od)|android/i,Ee="ontouchstart"in S,ue=ce(S,"PointerEvent")!==y,Ge=Ee&&se.test(navigator.userAgent),Re="touch",pt="pen",Ze="mouse",je="kinect",gt=25,K=1,Pe=2,Y=4,q=8,Ue=1,Le=2,Oe=4,Fe=8,Be=16,de=Le|Oe,pe=Fe|Be,it=de|pe,ot=["x","y"],ze=["clientX","clientY"];function le(e,t){var s=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(a){oe(e.options.enable,[e])&&s.handler(a)},this.init()}le.prototype={handler:function(){},init:function(){this.evEl&&te(this.element,this.evEl,this.domHandler),this.evTarget&&te(this.target,this.evTarget,this.domHandler),this.evWin&&te(Ae(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&ne(this.element,this.evEl,this.domHandler),this.evTarget&&ne(this.target,this.evTarget,this.domHandler),this.evWin&&ne(Ae(this.element),this.evWin,this.domHandler)}};function yt(e){var t,s=e.options.inputClass;return s?t=s:ue?t=Tt:Ge?t=nt:Ee?t=xt:t=$e,new t(e,_t)}function _t(e,t,s){var a=s.pointers.length,i=s.changedPointers.length,c=t&K&&a-i===0,b=t&(Y|q)&&a-i===0;s.isFirst=!!c,s.isFinal=!!b,c&&(e.session={}),s.eventType=t,Ye(e,s),e.emit("hammer.input",s),e.recognize(s),e.session.prevInput=s}function Ye(e,t){var s=e.session,a=t.pointers,i=a.length;s.firstInput||(s.firstInput=T(t)),i>1&&!s.firstMultiple?s.firstMultiple=T(t):i===1&&(s.firstMultiple=!1);var c=s.firstInput,b=s.firstMultiple,Z=b?b.center:c.center,Q=t.center=A(a);t.timeStamp=N(),t.deltaTime=t.timeStamp-c.timeStamp,t.angle=G(Z,Q),t.distance=O(Z,Q),n(s,t),t.offsetDirection=o(t.deltaX,t.deltaY);var ae=R(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=ae.x,t.overallVelocityY=ae.y,t.overallVelocity=M(ae.x)>M(ae.y)?ae.x:ae.y,t.scale=b?fe(b.pointers,a):1,t.rotation=b?ge(b.pointers,a):0,t.maxPointers=s.prevInput?t.pointers.length>s.prevInput.maxPointers?t.pointers.length:s.prevInput.maxPointers:t.pointers.length,h(s,t);var be=e.element;_e(t.srcEvent.target,be)&&(be=t.srcEvent.target),t.target=be}function n(e,t){var s=t.center,a=e.offsetDelta||{},i=e.prevDelta||{},c=e.prevInput||{};(t.eventType===K||c.eventType===Y)&&(i=e.prevDelta={x:c.deltaX||0,y:c.deltaY||0},a=e.offsetDelta={x:s.x,y:s.y}),t.deltaX=i.x+(s.x-a.x),t.deltaY=i.y+(s.y-a.y)}function h(e,t){var s=e.lastInterval||t,a=t.timeStamp-s.timeStamp,i,c,b,Z;if(t.eventType!=q&&(a>gt||s.velocity===y)){var Q=t.deltaX-s.deltaX,ae=t.deltaY-s.deltaY,be=R(a,Q,ae);c=be.x,b=be.y,i=M(be.x)>M(be.y)?be.x:be.y,Z=o(Q,ae),e.lastInterval=t}else i=s.velocity,c=s.velocityX,b=s.velocityY,Z=s.direction;t.velocity=i,t.velocityX=c,t.velocityY=b,t.direction=Z}function T(e){for(var t=[],s=0;s<e.pointers.length;)t[s]={clientX:m(e.pointers[s].clientX),clientY:m(e.pointers[s].clientY)},s++;return{timeStamp:N(),pointers:t,center:A(t),deltaX:e.deltaX,deltaY:e.deltaY}}function A(e){var t=e.length;if(t===1)return{x:m(e[0].clientX),y:m(e[0].clientY)};for(var s=0,a=0,i=0;i<t;)s+=e[i].clientX,a+=e[i].clientY,i++;return{x:m(s/t),y:m(a/t)}}function R(e,t,s){return{x:t/e||0,y:s/e||0}}function o(e,t){return e===t?Ue:M(e)>=M(t)?e<0?Le:Oe:t<0?Fe:Be}function O(e,t,s){s||(s=ot);var a=t[s[0]]-e[s[0]],i=t[s[1]]-e[s[1]];return Math.sqrt(a*a+i*i)}function G(e,t,s){s||(s=ot);var a=t[s[0]]-e[s[0]],i=t[s[1]]-e[s[1]];return Math.atan2(i,a)*180/Math.PI}function ge(e,t){return G(t[1],t[0],ze)+G(e[1],e[0],ze)}function fe(e,t){return O(t[0],t[1],ze)/O(e[0],e[1],ze)}var Se={mousedown:K,mousemove:Pe,mouseup:Y},Ce="mousedown",Je="mousemove mouseup";function $e(){this.evEl=Ce,this.evWin=Je,this.pressed=!1,le.apply(this,arguments)}z($e,le,{handler:function(t){var s=Se[t.type];s&K&&t.button===0&&(this.pressed=!0),s&Pe&&t.which!==1&&(s=Y),this.pressed&&(s&Y&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[t],changedPointers:[t],pointerType:Ze,srcEvent:t}))}});var ds={pointerdown:K,pointermove:Pe,pointerup:Y,pointercancel:q,pointerout:q},fs={2:Re,3:pt,4:Ze,5:je},Dt="pointerdown",Mt="pointermove pointerup pointercancel";S.MSPointerEvent&&!S.PointerEvent&&(Dt="MSPointerDown",Mt="MSPointerMove MSPointerUp MSPointerCancel");function Tt(){this.evEl=Dt,this.evWin=Mt,le.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}z(Tt,le,{handler:function(t){var s=this.store,a=!1,i=t.type.toLowerCase().replace("ms",""),c=ds[i],b=fs[t.pointerType]||t.pointerType,Z=b==Re,Q=L(s,t.pointerId,"pointerId");c&K&&(t.button===0||Z)?Q<0&&(s.push(t),Q=s.length-1):c&(Y|q)&&(a=!0),!(Q<0)&&(s[Q]=t,this.callback(this.manager,c,{pointers:s,changedPointers:[t],pointerType:b,srcEvent:t}),a&&s.splice(Q,1))}});var vs={touchstart:K,touchmove:Pe,touchend:Y,touchcancel:q},hs="touchstart",ms="touchstart touchmove touchend touchcancel";function Rt(){this.evTarget=hs,this.evWin=ms,this.started=!1,le.apply(this,arguments)}z(Rt,le,{handler:function(t){var s=vs[t.type];if(s===K&&(this.started=!0),!!this.started){var a=ps.call(this,t,s);s&(Y|q)&&a[0].length-a[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:a[0],changedPointers:a[1],pointerType:Re,srcEvent:t})}}});function ps(e,t){var s=F(e.touches),a=F(e.changedTouches);return t&(Y|q)&&(s=Te(s.concat(a),"identifier",!0)),[s,a]}var gs={touchstart:K,touchmove:Pe,touchend:Y,touchcancel:q},ys="touchstart touchmove touchend touchcancel";function nt(){this.evTarget=ys,this.targetIds={},le.apply(this,arguments)}z(nt,le,{handler:function(t){var s=gs[t.type],a=_s.call(this,t,s);a&&this.callback(this.manager,s,{pointers:a[0],changedPointers:a[1],pointerType:Re,srcEvent:t})}});function _s(e,t){var s=F(e.touches),a=this.targetIds;if(t&(K|Pe)&&s.length===1)return a[s[0].identifier]=!0,[s,s];var i,c,b=F(e.changedTouches),Z=[],Q=this.target;if(c=s.filter(function(ae){return _e(ae.target,Q)}),t===K)for(i=0;i<c.length;)a[c[i].identifier]=!0,i++;for(i=0;i<b.length;)a[b[i].identifier]&&Z.push(b[i]),t&(Y|q)&&delete a[b[i].identifier],i++;if(Z.length)return[Te(c.concat(Z),"identifier",!0),Z]}var Ts=2500,Ut=25;function xt(){le.apply(this,arguments);var e=ie(this.handler,this);this.touch=new nt(this.manager,e),this.mouse=new $e(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}z(xt,le,{handler:function(t,s,a){var i=a.pointerType==Re,c=a.pointerType==Ze;if(!(c&&a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents)){if(i)xs.call(this,s,a);else if(c&&bs.call(this,a))return;this.callback(t,s,a)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function xs(e,t){e&K?(this.primaryTouch=t.changedPointers[0].identifier,Lt.call(this,t)):e&(Y|q)&&Lt.call(this,t)}function Lt(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var s={x:t.clientX,y:t.clientY};this.lastTouches.push(s);var a=this.lastTouches,i=function(){var c=a.indexOf(s);c>-1&&a.splice(c,1)};setTimeout(i,Ts)}}function bs(e){for(var t=e.srcEvent.clientX,s=e.srcEvent.clientY,a=0;a<this.lastTouches.length;a++){var i=this.lastTouches[a],c=Math.abs(t-i.x),b=Math.abs(s-i.y);if(c<=Ut&&b<=Ut)return!0}return!1}var Ft=ce($.style,"touchAction"),Bt=Ft!==y,zt="compute",Yt="auto",bt="manipulation",He="none",Ke="pan-x",Qe="pan-y",lt=Es();function wt(e,t){this.manager=e,this.set(t)}wt.prototype={set:function(e){e==zt&&(e=this.compute()),Bt&&this.manager.element.style&&lt[e]&&(this.manager.element.style[Ft]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return V(this.manager.recognizers,function(t){oe(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),ws(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,s=e.offsetDirection;if(this.manager.session.prevented){t.preventDefault();return}var a=this.actions,i=E(a,He)&&!lt[He],c=E(a,Qe)&&!lt[Qe],b=E(a,Ke)&&!lt[Ke];if(i){var Z=e.pointers.length===1,Q=e.distance<2,ae=e.deltaTime<250;if(Z&&Q&&ae)return}if(!(b&&c)&&(i||c&&s&de||b&&s&pe))return this.preventSrc(t)},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};function ws(e){if(E(e,He))return He;var t=E(e,Ke),s=E(e,Qe);return t&&s?He:t||s?t?Ke:Qe:E(e,bt)?bt:Yt}function Es(){if(!Bt)return!1;var e={},t=S.CSS&&S.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(s){e[s]=t?S.CSS.supports("touch-action",s):!0}),e}var rt=1,ve=2,Xe=4,De=8,Ne=De,et=16,xe=32;function Ie(e){this.options=I({},this.defaults,e||{}),this.id=W(),this.manager=null,this.options.enable=X(this.options.enable,!0),this.state=rt,this.simultaneous={},this.requireFail=[]}Ie.prototype={defaults:{},set:function(e){return I(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(ee(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=ct(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return ee(e,"dropRecognizeWith",this)?this:(e=ct(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(ee(e,"requireFailure",this))return this;var t=this.requireFail;return e=ct(e,this),L(t,e)===-1&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(ee(e,"dropRequireFailure",this))return this;e=ct(e,this);var t=L(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,s=this.state;function a(i){t.manager.emit(i,e)}s<De&&a(t.options.event+Ht(s)),a(t.options.event),e.additionalEvent&&a(e.additionalEvent),s>=De&&a(t.options.event+Ht(s))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=xe},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(xe|rt)))return!1;e++}return!0},recognize:function(e){var t=I({},e);if(!oe(this.options.enable,[this,t])){this.reset(),this.state=xe;return}this.state&(Ne|et|xe)&&(this.state=rt),this.state=this.process(t),this.state&(ve|Xe|De|et)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}};function Ht(e){return e&et?"cancel":e&De?"end":e&Xe?"move":e&ve?"start":""}function Wt(e){return e==Be?"down":e==Fe?"up":e==Le?"left":e==Oe?"right":""}function ct(e,t){var s=t.manager;return s?s.get(e):e}function ye(){Ie.apply(this,arguments)}z(ye,Ie,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return t===0||e.pointers.length===t},process:function(e){var t=this.state,s=e.eventType,a=t&(ve|Xe),i=this.attrTest(e);return a&&(s&q||!i)?t|et:a||i?s&Y?t|De:t&ve?t|Xe:ve:xe}});function ut(){ye.apply(this,arguments),this.pX=null,this.pY=null}z(ut,ye,{defaults:{event:"pan",threshold:10,pointers:1,direction:it},getTouchAction:function(){var e=this.options.direction,t=[];return e&de&&t.push(Qe),e&pe&&t.push(Ke),t},directionTest:function(e){var t=this.options,s=!0,a=e.distance,i=e.direction,c=e.deltaX,b=e.deltaY;return i&t.direction||(t.direction&de?(i=c===0?Ue:c<0?Le:Oe,s=c!=this.pX,a=Math.abs(e.deltaX)):(i=b===0?Ue:b<0?Fe:Be,s=b!=this.pY,a=Math.abs(e.deltaY))),e.direction=i,s&&a>t.threshold&&i&t.direction},attrTest:function(e){return ye.prototype.attrTest.call(this,e)&&(this.state&ve||!(this.state&ve)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Wt(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}});function Et(){ye.apply(this,arguments)}z(Et,ye,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[He]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&ve)},emit:function(e){if(e.scale!==1){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}});function Pt(){Ie.apply(this,arguments),this._timer=null,this._input=null}z(Pt,Ie,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Yt]},process:function(e){var t=this.options,s=e.pointers.length===t.pointers,a=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!a||!s||e.eventType&(Y|q)&&!i)this.reset();else if(e.eventType&K)this.reset(),this._timer=r(function(){this.state=Ne,this.tryEmit()},t.time,this);else if(e.eventType&Y)return Ne;return xe},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===Ne&&(e&&e.eventType&Y?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=N(),this.manager.emit(this.options.event,this._input)))}});function St(){ye.apply(this,arguments)}z(St,ye,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[He]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&ve)}});function Ct(){ye.apply(this,arguments)}z(Ct,ye,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:de|pe,pointers:1},getTouchAction:function(){return ut.prototype.getTouchAction.call(this)},attrTest:function(e){var t=this.options.direction,s;return t&(de|pe)?s=e.overallVelocity:t&de?s=e.overallVelocityX:t&pe&&(s=e.overallVelocityY),this._super.attrTest.call(this,e)&&t&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&M(s)>this.options.velocity&&e.eventType&Y},emit:function(e){var t=Wt(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}});function dt(){Ie.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}z(dt,Ie,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[bt]},process:function(e){var t=this.options,s=e.pointers.length===t.pointers,a=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),e.eventType&K&&this.count===0)return this.failTimeout();if(a&&i&&s){if(e.eventType!=Y)return this.failTimeout();var c=this.pTime?e.timeStamp-this.pTime<t.interval:!0,b=!this.pCenter||O(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,!b||!c?this.count=1:this.count+=1,this._input=e;var Z=this.count%t.taps;if(Z===0)return this.hasRequireFailures()?(this._timer=r(function(){this.state=Ne,this.tryEmit()},t.interval,this),ve):Ne}return xe},failTimeout:function(){return this._timer=r(function(){this.state=xe},this.options.interval,this),xe},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ne&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function ke(e,t){return t=t||{},t.recognizers=X(t.recognizers,ke.defaults.preset),new Nt(e,t)}ke.VERSION="2.0.7",ke.defaults={domEvents:!1,touchAction:zt,enable:!0,inputTarget:null,inputClass:null,preset:[[St,{enable:!1}],[Et,{enable:!1},["rotate"]],[Ct,{direction:de}],[ut,{direction:de},["swipe"]],[dt],[dt,{event:"doubletap",taps:2},["tap"]],[Pt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Ps=1,jt=2;function Nt(e,t){this.options=I({},ke.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=yt(this),this.touchAction=new wt(this,this.options.touchAction),$t(this,!0),V(this.options.recognizers,function(s){var a=this.add(new s[0](s[1]));s[2]&&a.recognizeWith(s[2]),s[3]&&a.requireFailure(s[3])},this)}Nt.prototype={set:function(e){return I(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?jt:Ps},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var s,a=this.recognizers,i=t.curRecognizer;(!i||i&&i.state&Ne)&&(i=t.curRecognizer=null);for(var c=0;c<a.length;)s=a[c],t.stopped!==jt&&(!i||s==i||s.canRecognizeWith(i))?s.recognize(e):s.reset(),!i&&s.state&(ve|Xe|De)&&(i=t.curRecognizer=s),c++}},get:function(e){if(e instanceof Ie)return e;for(var t=this.recognizers,s=0;s<t.length;s++)if(t[s].options.event==e)return t[s];return null},add:function(e){if(ee(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(ee(e,"remove",this))return this;if(e=this.get(e),e){var t=this.recognizers,s=L(t,e);s!==-1&&(t.splice(s,1),this.touchAction.update())}return this},on:function(e,t){if(e!==y&&t!==y){var s=this.handlers;return V(f(e),function(a){s[a]=s[a]||[],s[a].push(t)}),this}},off:function(e,t){if(e!==y){var s=this.handlers;return V(f(e),function(a){t?s[a]&&s[a].splice(L(s[a],t),1):delete s[a]}),this}},emit:function(e,t){this.options.domEvents&&Ss(e,t);var s=this.handlers[e]&&this.handlers[e].slice();if(!(!s||!s.length)){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var a=0;a<s.length;)s[a](t),a++}},destroy:function(){this.element&&$t(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function $t(e,t){var s=e.element;if(s.style){var a;V(e.options.cssProps,function(i,c){a=ce(s.style,c),t?(e.oldCssProps[a]=s.style[a],s.style[a]=i):s.style[a]=e.oldCssProps[a]||""}),t||(e.oldCssProps={})}}function Ss(e,t){var s=v.createEvent("Event");s.initEvent(e,!0,!0),s.gesture=t,t.target.dispatchEvent(s)}I(ke,{INPUT_START:K,INPUT_MOVE:Pe,INPUT_END:Y,INPUT_CANCEL:q,STATE_POSSIBLE:rt,STATE_BEGAN:ve,STATE_CHANGED:Xe,STATE_ENDED:De,STATE_RECOGNIZED:Ne,STATE_CANCELLED:et,STATE_FAILED:xe,DIRECTION_NONE:Ue,DIRECTION_LEFT:Le,DIRECTION_RIGHT:Oe,DIRECTION_UP:Fe,DIRECTION_DOWN:Be,DIRECTION_HORIZONTAL:de,DIRECTION_VERTICAL:pe,DIRECTION_ALL:it,Manager:Nt,Input:le,TouchAction:wt,TouchInput:nt,MouseInput:$e,PointerEventInput:Tt,TouchMouseInput:xt,SingleTouchInput:Rt,Recognizer:Ie,AttrRecognizer:ye,Tap:dt,Pan:ut,Swipe:Ct,Pinch:Et,Rotate:St,Press:Pt,on:te,off:ne,each:V,merge:re,extend:x,assign:I,inherit:z,bindFn:ie,prefixed:ce});var Cs=typeof S<"u"?S:typeof self<"u"?self:{};Cs.Hammer=ke,typeof y=="function"&&y.amd?y(function(){return ke}):l.exports?l.exports=ke:S[D]=ke})(window,document,"Hammer")})(us);var kt=us.exports;function Ca(l){const S=Vt(l);let v=-1;function D(){clearInterval(v)}function y(){D(),as(()=>S.value=l)}function P($){const H=$?getComputedStyle($):{transitionDuration:.2},m=parseFloat(H.transitionDuration)*1e3||200;if(D(),S.value<=0)return;const M=performance.now();v=window.setInterval(()=>{const N=performance.now()-M+m;S.value=Math.max(l-N,0),S.value<=0&&D()},m)}return $s(D),{clear:D,time:S,start:P,reset:y}}const Na=Zt({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...Jt({location:"bottom"}),...Ns(),...Kt(),...Is(),...Qt(),...ks(Vs({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),Ia=es()({name:"VSnackbar",props:Na(),emits:{"update:modelValue":l=>!0},setup(l,S){let{slots:v}=S;const D=As(l,"modelValue"),{positionClasses:y}=Os(l),{scopeId:P}=Ds(),{themeClasses:$}=Ms(l),{colorClasses:H,colorStyles:m,variantClasses:M}=Rs(l),{roundedClasses:N}=ts(l),r=Ca(Number(l.timeout)),ee=g(),V=g(),U=Vt(!1),I=Vt(0),x=g(),re=Us(Ls,void 0);Fs(()=>!!re,()=>{const f=Bs();zs(()=>{x.value=f.mainStyles.value})}),J(D,ie),J(()=>l.timeout,ie),At(()=>{D.value&&ie()});let z=-1;function ie(){r.reset(),window.clearTimeout(z);const f=Number(l.timeout);if(!D.value||f===-1)return;const L=Ys(V.value);r.start(L),z=window.setTimeout(()=>{D.value=!1},f)}function oe(){r.reset(),window.clearTimeout(z)}function X(){U.value=!0,oe()}function te(){U.value=!1,ie()}function ne(f){I.value=f.touches[0].clientY}function _e(f){Math.abs(I.value-f.changedTouches[0].clientY)>50&&(D.value=!1)}const E=ht(()=>l.location.split(" ").reduce((f,L)=>(f[`v-snackbar--${L}`]=!0,f),{}));return ss(()=>{const f=Xt.filterProps(l),L=!!(v.default||v.text||l.text);return d(Xt,st({ref:ee,class:["v-snackbar",{"v-snackbar--active":D.value,"v-snackbar--multi-line":l.multiLine&&!l.vertical,"v-snackbar--timer":!!l.timer,"v-snackbar--vertical":l.vertical},E.value,y.value,l.class],style:[x.value,l.style]},f,{modelValue:D.value,"onUpdate:modelValue":F=>D.value=F,contentProps:st({class:["v-snackbar__wrapper",$.value,H.value,N.value,M.value],style:[m.value],onPointerenter:X,onPointerleave:te},f.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:ne,onTouchend:_e},P),{default:()=>{var F,Te;return[Hs(!1,"v-snackbar"),l.timer&&!U.value&&d("div",{key:"timer",class:"v-snackbar__timer"},[d(vt,{ref:V,color:typeof l.timer=="string"?l.timer:"info",max:l.timeout,"model-value":r.time.value},null)]),L&&d("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((F=v.text)==null?void 0:F.call(v))??l.text,(Te=v.default)==null?void 0:Te.call(v)]),v.actions&&d(Ws,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[d("div",{class:"v-snackbar__actions"},[v.actions({isActive:D})])]})]},activator:v.activator})}),js({},ee)}}),ka=Ot({__name:"Snackbar",props:{openSnackbar:Boolean,closeButton:Boolean,message:{type:String,default:""},duration:{type:Number,default:3e3}},emits:["update:openSnackbar"],setup(l,{emit:S}){const v=l,D=S,y=g(v.openSnackbar),P=g(v.message),$=g(v.duration||3e3),H=()=>{y.value=!1,D("update:openSnackbar",!1)};return J(()=>v.openSnackbar,m=>{y.value=m}),J(()=>v.message,m=>{P.value=m}),J(y,m=>{m||D("update:openSnackbar",!1)}),(m,M)=>(_(),Ve(Ia,{modelValue:y.value,"onUpdate:modelValue":M[0]||(M[0]=N=>y.value=N),elevation:"4",rounded:"lg",color:"#ffffff40",timeout:$.value,location:"bottom left","content-class":"bg-[#4f4f4f44] backdrop-filter backdrop-blur-lg text-white mb-[50px]",style:{marginBottom:40}},Xs({default:p(()=>[w(k(P.value)+" ",1)]),_:2},[l.closeButton?{name:"actions",fn:p(()=>[d(We,{color:"white",variant:"text",onClick:H},{default:p(()=>[d(j,null,{default:p(()=>[w("mdi-close")]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["modelValue","timeout"]))}}),at=l=>(ls("data-v-9eaca5cf"),l=l(),rs(),l),Va={class:"video-modal"},Aa={class:"modal-content"},Oa={class:"flex flex-col justify-between h-full px-5 py-3 align-center"},Da={class:"flex flex-col justify-between pt-2 align-center gap-y-8"},Ma=["disabled","onClick"],Ra={class:"flex flex-col justify-center py-2 mb-[10px] align-center"},Ua={class:"flex flex-col p-2 gap-y-2"},La=at(()=>u("div",null,[u("strong",null,"Computer:"),w(" Command+click, Ctrl+click or Long click to select multiple videos. ")],-1)),Fa=at(()=>u("div",null,[u("strong",null,"Mobile:"),w(" Long press to select multiple videos.")],-1)),Ba={class:"flex flex-row mt-4 gap-x-10"},za={class:"ml-[-8px]"},Ya={class:"frosted-button flex flex-col justify-center align-center w-[28px] h-[28px] rounded-full mb-1"},Ha=at(()=>u("div",{class:"text-sm"},"Close",-1)),Wa={key:0,class:"flex flex-col justify-between align-center pt-8 px-2 w-[300px] h-[480px]"},ja={class:"flex flex-col w-full h-full px-4 overflow-auto align-center"},$a={class:"relative video-wrapper"},Xa=["id","poster"],qa=["src"],Ga=["onClick"],Za=["onClick"],Ja={class:"flex flex-row justify-center w-full ml-1 overflow-hidden text-xs"},Ka={key:0,class:"flex flex-row justify-between align-center h-[45px] w-full mb-[-15px]"},Qa={key:1,class:"flex flex-col justify-between mt-5 align-center w-[720px]"},ei=["controls","preload","poster"],ti=["src"],si={class:"processing-bar"},ai={class:"w-0"},ii={class:"flex flex-col p-2 gap-y-2"},oi={key:0,class:"flex flex-col justify-start w-full p-2 pt-3"},ni={class:"card-grid"},li={class:"text-sm"},ri={class:"video-card-dot"},ci={key:1,class:"flex flex-row justify-between w-full h-full px-8 overflow-hidden align-center"},ui={class:"flex flex-row justify-between pl-2 align-center gap-x-6"},di={class:"flex flex-row cursor-default text-md"},fi={key:0,class:"flex flex-row w-[320px] justify-center gap-x-4 align-center ml-1"},vi={key:0,class:"text-sm text-white border-2 rounded-md mt-[3px] border-[#ffffff44] bg-[#fafafa33] ml-4 px-1"},hi={class:"flex flex-row mt-2"},mi=["disabled","onClick"],pi={class:"mb-10 slide-right-to-left"},gi={key:2},yi={key:2,class:"flex flex-row justify-center w-full h-full text-xl text-center align-center"},_i=at(()=>u("div",{class:"flex flex-col mb-2 text-center align-end"}," Processing multiple videos may take a while, depending on the number of videos and their sizes. Cockpit will be usable during the process, but the performance may be affected and recording of new videos is disabled. ",-1)),Ti={key:0,class:"flex flex-col -mt-2 text-center align-center"},xi={class:"flex flex-col justify-between h-[140px] w-full pb-3"},bi={key:0,class:"flex flex-col justify-start"},wi={class:"mb-3 text-sm text-center"},Ei={class:"flex flex-row justify-between w-full mb-2 align-center"},Pi={class:"text-sm font-bold w-[450px] text-nowrap text-start text-ellipsis overflow-x-hidden"},Si={class:"text-sm text-end"},Ci={class:"flex flex-row justify-between w-full mb-2"},Ni=at(()=>u("div",{class:"text-sm font-bold text-start"},"Overall Progress",-1)),Ii={class:"text-sm font-bold text-end"},ki={key:1},Vi={class:"flex flex-col justify-center w-full pb-3 text-center text-md"},Ai=Ot({__name:"VideoLibraryModal",props:{openModal:Boolean},emits:["update:openModal"],setup(l,{emit:S}){const v=is(),D=l,y=S,{showDialog:P,closeDialog:$}=qs(),H=g([]),m=g([]),M=g([]),N=g(D.openModal),r=g([]),ee=g(null),V=g("videos"),U=g(!1),I=g(""),x=g(!1),re=g(!1),z=g(!1),ie=g({}),oe=g(!1),X=g(!1),te=g(!0),ne=g(!1),_e=g(""),E=g([]),f=g(!1),L=g(""),F=g([]),Te=g(!1),ce=g(!1),me=g(0),W=g([{fileName:"",progress:0,message:""}]),Ae=g(0),se=g(!1),Ee=g(null),ue=g(!1),Ge=g(!1),Re=[{name:"Videos",icon:"mdi-video-outline",selected:!0,disabled:!1,tooltip:""},{name:"Pictures",icon:"mdi-image-outline",selected:!1,disabled:!0,tooltip:"Coming soon"}],pt=ht(()=>[{name:"Delete",icon:"mdi-delete-outline",size:22,tooltip:"",confirmAction:!0,show:!0,disabled:se.value===!0||ce.value===!0,action:()=>_t()},{name:"Download",icon:"mdi-tray-arrow-down",size:28,tooltip:"Download selected videos with logs",confirmAction:!1,show:!0,disabled:se.value===!0||ce.value===!0,action:()=>le()}]),Ze=()=>{N.value=!1,y("update:openModal",!1),V.value="videos",H.value.forEach(n=>URL.revokeObjectURL(n)),H.value=[],pe(),Ee.value=null,x.value=!1},je=n=>{const h=/\(([^)]+)\)/,T=n.match(h);return T?T[1]:""},gt=n=>{const h=/.*\(([^)]+)\)/,T=n.match(h);return T?T[0]:""},K=()=>{if(r.value.length===1&&!x.value){const n=document.getElementById("video-player");n&&n.play().catch(h=>console.error("Error auto-playing video:",h))}},Pe=()=>{x.value=!x.value,x.value||pe()},Y=n=>{const h=r.value.findIndex(T=>T.fileName===n.fileName);h!==-1?r.value.length>1&&r.value.splice(h,1):(r.value.push(n),x.value=!0)},q=()=>{ue.value=!1,me.value=0,W.value=[{fileName:"",progress:0,message:""}],se.value=!1},Ue=async()=>{try{await v.processVideoChunksAndTelemetry(r.value.map(n=>n.hash)),x.value=!1,await Ye()}catch(n){const h=`Video processing failed: ${n.message??n.toString()}`;console.error(h),I.value=h,U.value=!0,ue.value=!0}},Le=()=>{ue.value&&Ye(),f.value=!1,q()},Oe=async()=>{r.value.length===1&&!r.value[0].isProcessed&&(se.value=!0),Ue()},Fe=()=>{Ae.value=r.value.length,L.value="Processing Videos",F.value=[{text:me.value===100?"Close":"Hide",size:"small",class:"font-light",action:Le}],ne.value=!1,f.value=!0,Ue()},Be=()=>{_e.value="Process Multiple Videos",E.value=[{text:"Cancel",size:"small",class:"font-light",action:()=>{ne.value=!1}},{text:"Process videos",size:"small",class:"font-bold",action:async()=>{ne.value=!1,Fe()}}],ne.value=!0},de=()=>{r.value=[...m.value],x.value=!0},pe=()=>{x.value=!1,re.value=!1,z.value=!1,r.value.length>1&&(r.value=[r.value[0]])},it=()=>{m.value.some(n=>!n.isProcessed)?(r.value=m.value.filter(n=>!n.isProcessed),x.value=!0):(I.value="No unprocessed videos found",U.value=!0)},ot=()=>{m.value.some(n=>n.isProcessed)?(r.value=m.value.filter(n=>n.isProcessed),x.value=!0):(I.value="No processed videos found",U.value=!0)},ze=n=>n.flatMap(T=>{const R=`${T.split(".").slice(0,-1).join(".")}.ass`;return M.value.some(O=>O.fileName===R)?[T,R]:[T]}),le=async()=>{let n=!1;const h=async(R,o)=>{const O=(100*R/o).toFixed(1);n&&(I.value=`Preparing download: ${O}%.`,U.value=!0)};I.value="Getting your download ready...",setTimeout(()=>n=!0,1500);let T=[],A=[];if(r.value.forEach(R=>{R.isProcessed&&T.push(R.fileName),!R.isProcessed&&R.hash&&A.push(R.hash)}),U.value=!0,!(A.length>0&&!await yt())){if(ce.value=!0,T.length>0){const R=ze(T);await v.downloadFilesFromVideoDB(R,h)}A.length>0&&await v.downloadTempVideo(A,h),ce.value=!1}},yt=async()=>{let n=!1;return await P({maxWidth:600,title:"You are downloading unprocessed videos",message:`One or more videos that you are downloading contains unprocessed chunks, which are not playable. To be
      able to play the downloaded videos, you need to go back and process those videos first.`,variant:"info",actions:[{text:"Go back",action:()=>{n=!1}},{text:"Download anyway",action:()=>{n=!0}}]}),$(),n},_t=async()=>{Ge.value=!0;let n=r.value.length,h=[],T=[];if(await r.value.forEach(A=>{A.isProcessed&&h.push(A.fileName),!A.isProcessed&&A.hash&&T.push(A.hash)}),h.length>0){const A=ze(h);await v.discardProcessedFilesFromVideoDB(A)}T.length>0&&await v.discardUnprocessedFilesFromVideoDB(T),I.value=`${n} video(s) discarded.`,U.value=!0,await Ye(),r.value=m.value.length>0?[m.value[0]]:[],m.value.length===1&&(x.value=!1),Ge.value=!1},Ye=async()=>{te.value=!0,m.value=[];const n=[],h=[];await v.videoStoringDB.iterate((ge,fe)=>{v.isVideoFilename(fe)&&n.push((async()=>{const Se=await v.videoStoringDB.getItem(fe);let Ce="",Je=!0;Se instanceof Blob?(Ce=URL.createObjectURL(Se),H.value.push(Ce)):console.error("Video data is not a Blob:",Se);const $e=await v.videoStorageFileSize(fe)??0;return{fileName:fe,size:$e,url:Ce,isProcessed:Je}})()),fe.endsWith(".ass")&&h.push((async()=>{const Se=await v.videoStoringDB.getItem(fe);let Ce="";Se instanceof Blob?(Ce=URL.createObjectURL(Se),H.value.push(Ce)):console.error("Video data is not a Blob:",Se);const Je=await v.videoStorageFileSize(fe)??0;return{fileName:fe,url:Ce,size:Je}})())});const T=await v.unprocessedVideos,A=Object.entries(T).map(async([ge,fe])=>({...fe,hash:ge,url:"",isProcessed:!1})),R=await Promise.all(n),o=await Promise.all(h),G=(await Promise.all(A)).filter(ge=>ge.dateFinish||v.keysFailedUnprocessedVideos.includes(ge.hash));m.value=[...R,...G],M.value=o,te.value=!1};return J(()=>v.currentFileProgress,n=>{W.value=n},{deep:!0}),J(()=>v.overallProgress,n=>{me.value=n,n>0&&n<100&&(Te.value=!0,se.value=!0),n===100&&(Te.value=!1,se.value=!1,setTimeout(()=>{f.value=!1},1e3))}),J(N,n=>{y("update:openModal",n),n||(q(),x.value=!1,Ee.value=null,se.value=!1)}),J(()=>D.openModal,async n=>{N.value=n,n===!0&&(await Ye(),se.value=!1)}),J(r,n=>{if(n.length===1){ue.value&&q(),Ee.value=n[0];const h=n[0].url,T=ee.value;T&&(T.src=h,T.load())}},{immediate:!0,deep:!0}),J(m,()=>{if(Ee.value){const n=m.value.find(h=>je(h.fileName)===je(Ee.value.fileName));n&&(r.value=[n])}else r.value=m.value.length>0?[m.value[0]]:[]},{deep:!0}),J(N,()=>{N.value||(Ee.value=null)}),J(m,async()=>{await as(),m.value.forEach(n=>{var T;const h=document.getElementById(`video-library-${n.fileName}`);if(h){(T=ie.value[n.fileName])==null||T.destroy();const A=new kt.Manager(h);A.add(new kt.Tap),A.add(new kt.Press({time:500})),A.on("tap",R=>{const o=r.value.some(G=>G.fileName===n.fileName);if(x.value||R.srcEvent.ctrlKey||R.srcEvent.metaKey){x.value=!0;const G=r.value.findIndex(ge=>ge.fileName===n.fileName);G>-1?r.value.length>1&&r.value.splice(G,1):r.value.push(n)}else o||(r.value=[n]);if(r.value.length===1&&o){const G=document.getElementById("video-player");G&&(G.load(),G.play().catch(ge=>console.error("Error auto-playing video:",ge)))}}),A.on("press",()=>{x.value=!0,r.value.some(R=>R.fileName===n.fileName)||r.value.push(n)}),ie.value[n.fileName]=A}})},{immediate:!0,deep:!0}),At(async()=>{te.value=!0,await Ye()}),os(()=>{V.value="videos",H.value.forEach(n=>URL.revokeObjectURL(n)),H.value=[],Object.values(ie.value).forEach(n=>{n.destroy()})}),(n,h)=>(_(),C(Me,null,[d(ns,{modelValue:N.value,"onUpdate:modelValue":h[8]||(h[8]=T=>N.value=T),class:"dialog"},{default:p(()=>{var T,A,R;return[u("div",Va,[u("div",Aa,[u("div",Oa,[u("div",Da,[(_(),C(Me,null,ft(Re,o=>u("button",{key:o.name,disabled:o.disabled,class:"flex flex-col justify-center align-center",onClick:O=>V.value=o.name.toLowerCase()},[o.tooltip!==""?(_(),Ve(we,{key:0,"open-delay":"600",activator:"parent",location:"top"},{default:p(()=>[w(k(o.tooltip),1)]),_:2},1024)):B("",!0),u("div",{class:he(["mb-1 text-2xl rounded-full",[o.disabled?"frosted-button-disabled":"frosted-button",V.value===o.name.toLowerCase()?"w-[58px] h-[58px]":"w-[40px] h-[40px]"]])},[d(j,{size:V.value===o.name.toLowerCase()?40:24,class:he({"ml-1":o.name.toLowerCase()==="videos"})},{default:p(()=>[w(k(o.icon),1)]),_:2},1032,["size","class"])],2),u("div",{class:he(["text-sm",{"text-white/30":!o.disabled}])},k(o.name),3)],8,Ma)),64))]),u("div",null,[u("div",Ra,[u("button",{class:"frosted-button text-[#ffffffaa] flex flex-col justify-center align-center w-[28px] h-[28px] rounded-full mb-[4px]",onClick:h[2]||(h[2]=o=>oe.value=!oe.value)},[d(j,{class:"text-[24px]"},{default:p(()=>[w("mdi-help-circle-outline")]),_:1}),d(we,{modelValue:oe.value,"onUpdate:modelValue":h[0]||(h[0]=o=>oe.value=o),"open-on-hover":!1,activator:"parent",location:"top",arrow:"","content-class":"border-[#ffffff55] border-2","onClick:outside":h[1]||(h[1]=o=>oe.value=!1)},{default:p(()=>[u("div",Ua,[La,Fa,u("div",Ba,[u("div",za,[d(j,{size:"10",class:"text-green-500 ml-2 mb-[2px] mr-1"},{default:p(()=>[w("mdi-circle")]),_:1}),w(" Processed video ")]),u("div",null,[d(j,{size:"10",class:"text-red-500 mb-[2px] mr-1"},{default:p(()=>[w("mdi-circle")]),_:1}),w(" Unprocessed video ")])])])]),_:1},8,["modelValue"])])]),d(tt,{class:"opacity-[0.1] ml-[-5px] w-[120%]"}),u("button",{class:"flex flex-col justify-center py-2 mt-4 align-center",onClick:Ze},[u("div",Ya,[d(j,{class:"text-[18px]"},{default:p(()=>[w("mdi-close")]),_:1})]),Ha])])]),d(tt,{vertical:"",class:"h-[92%] mt-4 opacity-[0.1]"}),V.value==="videos"?(_(),C(Me,{key:0},[m.value.length>0?(_(),C("div",Wa,[u("div",ja,[(_(!0),C(Me,null,ft(m.value,o=>(_(),C("div",{key:o.fileName,class:"mb-4 video-container"},[u("div",$a,[u("video",{id:`video-library-${o.fileName}`,class:he(["border-4 border-white rounded-md cursor-pointer border-opacity-[0.1] hover:border-opacity-[0.4] transition duration-75 hover:ease-in",r.value.find(O=>O.fileName===o.fileName)?["border-opacity-[0.4]","w-[220px]"]:["border-opacity-[0.1]","w-[190px]"]]),preload:"auto",poster:o.isProcessed?void 0:o.thumbnail},[u("source",{src:o.url},null,8,qa)],10,Xa),r.value.find(O=>O.fileName===o.fileName)&&!x.value?(_(),C("div",{key:0,class:"play-button",onClick:O=>o.isProcessed?K():Oe()},[d(j,{size:"40",class:"text-white"},{default:p(()=>[w(k(o.isProcessed?"mdi-play-circle-outline":"mdi-progress-alert"),1)]),_:2},1024)],8,Ga)):B("",!0),x.value?(_(),C("div",{key:1,class:he(["checkmark-button",r.value.find(O=>O.fileName===o.fileName)?"bg-green":"bg-white"]),onClick:Gs(O=>Y(o),["stop"])},[d(j,{size:"15",class:"text-white"},{default:p(()=>[w(k(r.value.find(O=>O.fileName===o.fileName)?"mdi-check-circle-outline":"mdi-radiobox-blank"),1)]),_:2},1024)],10,Za)):B("",!0)]),u("div",Ja,[d(we,{"open-delay":"500",activator:"parent",location:"top"},{default:p(()=>[w(k(o.isProcessed?"Processed video":"Unprocessed video"),1)]),_:2},1024),w(" "+k(je(o.fileName)??"Cockpit video")+" ",1),d(j,{size:"10",class:he(["ml-1 mt-[3px]",o.isProcessed?"text-green-500":"text-red-500"])},{default:p(()=>[w(" mdi-circle ")]),_:2},1032,["class"])])]))),128))]),m.value.length>1?(_(),C("div",Ka,[u("div",null,[d(We,{variant:"text",size:"small",class:"mt-[5px]",onClick:Pe},{default:p(()=>[d(we,{"open-delay":"500",activator:"parent",location:"bottom"},{default:p(()=>[w(" Select "+k(x.value?"single":"multiple")+" files ",1)]),_:1}),w(" "+k(x.value?"Single":"Multi"),1)]),_:1})]),u("div",null,[d(We,{variant:"text",size:"small",class:"mt-[5px]",onClick:h[3]||(h[3]=o=>r.value.length===m.value.length?pe():de())},{default:p(()=>[d(we,{"open-delay":"500",activator:"parent",location:"bottom"},{default:p(()=>[w(" Select "+k(r.value.length===m.value.length?"none":"all files"),1)]),_:1}),w(" "+k(r.value.length===m.value.length?"None":"All"),1)]),_:1})]),u("div",null,[d(We,{variant:"text",size:"small",class:"mt-[5px]",onClick:h[4]||(h[4]=o=>r.value.every(O=>!O.isProcessed)?ot():it())},{default:p(()=>[d(we,{"open-delay":"500",activator:"parent",location:"bottom"},{default:p(()=>[w(k(r.value.every(o=>!o.isProcessed)?"Select all processed videos":"Select all unprocessed videos"),1)]),_:1}),w(" "+k(r.value.every(o=>!o.isProcessed)?"Select Process.":"select Unproc."),1)]),_:1})])])):B("",!0)])):B("",!0),d(tt,{vertical:"",class:"h-[92%] mt-4 opacity-[0.1]"}),m.value.length>0?(_(),C("div",Qa,[u("div",null,[!x.value&&r.value.length===1&&!x.value&&!te.value?(_(),C("video",{key:0,id:"video-player",ref_key:"videoPlayerRef",ref:ee,width:"660px",controls:!!r.value[0].isProcessed,preload:r.value[0].isProcessed?"auto":"none",poster:((T=r.value[0])==null?void 0:T.thumbnail)||void 0,class:"border-[14px] border-white border-opacity-10 rounded-lg min-h-[382px] aspect-video"},[u("source",{src:((A=r.value[0])==null?void 0:A.url)||void 0},null,8,ti)],8,ei)):B("",!0),!te.value&&r.value.length===1&&!r.value[0].isProcessed&&!x.value&&!ue.value?(_(),Ve(We,{key:1,variant:se.value?"text":"outlined",color:"white",size:"large",disabled:se.value,class:"process-button",onClick:Oe},{default:p(()=>[w(k(se.value?"Processing...":"Process video"),1)]),_:1},8,["variant","disabled"])):B("",!0),u("div",si,[se.value&&!f.value?(_(),Ve(vt,{key:0,"model-value":ue.value?100:me.value,color:ue.value?"red":"green",height:"8",striped:""},null,8,["model-value","color"])):B("",!0),u("div",ai,[!te.value&&r.value.length===1&&se.value&&ue.value?(_(),C("button",{key:0,class:"bg-red text-[#ffffffaa] flex flex-col justify-center align-center w-[20px] h-[20px] rounded-full mt-[40px] ml-[-25px]",onClick:h[7]||(h[7]=o=>X.value=!X.value)},[d(j,{class:"text-[18px]"},{default:p(()=>[w("mdi-alert-circle-outline")]),_:1}),d(we,{modelValue:X.value,"onUpdate:modelValue":h[5]||(h[5]=o=>X.value=o),"open-on-hover":!1,activator:"parent",location:"bottom",arrow:"","content-class":"border-[#ffffff55] border-2","onClick:outside":h[6]||(h[6]=o=>X.value=!1)},{default:p(()=>[u("div",ii,[u("div",null,k(I.value),1)])]),_:1},8,["modelValue"])])):B("",!0)])])]),m.value.length>0&&r.value.length>=1&&x.value?(_(),C("div",oi,[u("div",ni,[(_(!0),C(Me,null,ft(r.value,o=>(_(),Ve(Zs,{key:o.fileName,class:"video-card"},{default:p(()=>[u("div",null,[d(Js,null,{default:p(()=>[u("div",li,k(je(o.fileName)),1)]),_:2},1024),u("div",ri,[d(j,{size:"10",class:he(o.isProcessed?"text-green-500":"text-red-500")},{default:p(()=>[w(" mdi-circle ")]),_:2},1032,["class"])])])]),_:2},1024))),128))]),d(tt,{class:"mb-[-10px] opacity-[0.1] mx-3"})])):B("",!0),m.value.length>0?(_(),C("div",ci,[u("div",ui,[u("div",di,k(x.value?`Files selected: ${r.value.length}`:gt((R=r.value[0])==null?void 0:R.fileName)),1),x.value?(_(),C("div",fi,[r.value.every(o=>!o.isProcessed)?(_(),C("div",vi,[u("button",{onClick:Be},"Process selected videos")])):B("",!0)])):B("",!0)]),u("div",hi,[(_(!0),C(Me,null,ft(pt.value,o=>(_(),C("button",{key:o.name,class:"flex flex-col justify-center ml-6 align-center",disabled:o.disabled,onClick:O=>!o.confirmAction&&o.action()},[u("div",{class:he([[o.disabled?"frosted-button-disabled":"frosted-button",!o.confirmAction&&"p-2"],"flex flex-col justify-center mb-1 rounded-full frosted-button align-center button"])},[o.tooltip?(_(),Ve(we,{key:0,"open-delay":"500",activator:"parent",location:"bottom"},{default:p(()=>[w(k(o.tooltip),1)]),_:2},1024)):B("",!0),o.confirmAction?(_(),Ve(Ks,{key:1,location:"left center",opacity:"0",transition:"slide-x-reverse-transition",disabled:o.disabled},{activator:p(({props:O,isActive:G})=>[u("div",st({class:"flex items-center justify-center w-full h-full"},O),[d(j,{size:o.size,class:he([{"rotate-[-45deg]":G,"outline outline-6 outline-[#ffffff55]":G},"rounded-full border-[transparent]"]),style:Qs({borderWidth:`${o.size-4}px`})},{default:p(()=>[w(k(G?"mdi-arrow-up":o.icon),1)]),_:2},1032,["size","class","style"])],16)]),default:p(()=>[d(ea,{class:"bg-transparent",elevation:"0"},{default:p(()=>[d(ta,null,{append:p(()=>[u("div",pi,[d(We,{fab:"",small:"",width:"28",height:"28",color:"red",icon:"mdi-close",class:"text-sm outline outline-3 outline-[#ffffff44] hover:outline-[#ffffff77]"},{default:p(()=>[d(we,{"open-delay":"600",activator:"parent",location:"bottom"},{default:p(()=>[w(" Cancel ")]),_:1}),d(j,null,{default:p(()=>[w("mdi-close")]),_:1})]),_:1}),d(We,{fab:"",small:"",width:"28",height:"28",color:"green",icon:"mdi-check",class:"ml-4 text-sm outline outline-3 outline-[#ffffff44] hover:outline-[#ffffff77]",loading:Ge.value,onClick:O=>o.action()},{default:p(()=>[d(we,{"open-delay":"600",activator:"parent",location:"bottom"},{default:p(()=>[w(" Confirm ")]),_:1}),d(j,null,{default:p(()=>[w("mdi-check")]),_:1})]),_:2},1032,["loading","onClick"])])]),_:2},1024)]),_:2},1024)]),_:2},1032,["disabled"])):(_(),C("div",gi,[d(j,{size:o.size},{default:p(()=>[w(k(o.icon),1)]),_:2},1032,["size"])]))],2)],8,mi))),128))])])):B("",!0)])):B("",!0),m.value.length===0?(_(),C("div",yi,k(te.value?"Loading":"No videos on storage"),1)):B("",!0)],64)):B("",!0)])])]}),_:1},8,["modelValue"]),d(ka,{"open-snackbar":U.value,message:I.value,duration:3e3,"close-button":!1,"onUpdate:openSnackbar":h[9]||(h[9]=T=>U.value=T)},null,8,["open-snackbar","message"]),d(qt,{"show-dialog":ne.value,title:_e.value,actions:E.value,"max-width":600},{content:p(()=>[_i]),_:1},8,["show-dialog","title","actions"]),d(qt,{"show-dialog":f.value,title:L.value,actions:F.value,"max-width":600},{content:p(()=>[ue.value?B("",!0):(_(),C("div",Ti,[u("div",xi,[W.value.length>0?(_(),C("div",bi,[u("div",wi," File "+k(W.value.length)+" of "+k(Ae.value)+": "+k(W.value[W.value.length-1].message),1),u("div",Ei,[u("div",Pi,k(W.value[W.value.length-1].fileName),1),u("div",Si,[d(sa,{width:"1",size:"10",indeterminate:"",class:"mr-1 mb-[2px]"}),w(" "+k(`${W.value[W.value.length-1].progress}%`),1)])]),d(vt,{"model-value":W.value[W.value.length-1].progress,color:"white",height:"6",rounded:"",striped:""},null,8,["model-value"])])):B("",!0),u("div",null,[u("div",Ci,[Ni,u("div",Ii,k(`${Math.ceil(me.value)}%`),1)]),d(vt,{"model-value":Math.ceil(me.value),color:"blue",height:"6",rounded:"",striped:""},null,8,["model-value"])])])])),ue.value?(_(),C("div",ki,[u("div",Vi,k(`Error processing video file: ${W.value[W.value.length-1].fileName}`),1)])):B("",!0)]),_:1},8,["show-dialog","title","actions"])],64))}}),Oi=cs(Ai,[["__scopeId","data-v-9eaca5cf"]]),Di=Zt({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:aa,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...ia(),...Jt({location:"top end"}),...Kt(),...oa(),...Qt(),...na({transition:"scale-rotate-transition"})},"VBadge"),Mi=es()({name:"VBadge",inheritAttrs:!1,props:Di(),setup(l,S){const{backgroundColorClasses:v,backgroundColorStyles:D}=la(Gt(l,"color")),{roundedClasses:y}=ts(l),{t:P}=ra(),{textColorClasses:$,textColorStyles:H}=ca(Gt(l,"textColor")),{themeClasses:m}=ua(),{locationStyles:M}=da(l,!0,N=>(l.floating?l.dot?2:4:l.dot?8:12)+(["top","bottom"].includes(N)?+(l.offsetY??0):["left","right"].includes(N)?+(l.offsetX??0):0));return ss(()=>{const N=Number(l.content),r=!l.max||isNaN(N)?l.content:N<=+l.max?N:`${l.max}+`,[ee,V]=fa(S.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return d(l.tag,st({class:["v-badge",{"v-badge--bordered":l.bordered,"v-badge--dot":l.dot,"v-badge--floating":l.floating,"v-badge--inline":l.inline},l.class]},V,{style:l.style}),{default:()=>{var U,I;return[d("div",{class:"v-badge__wrapper"},[(I=(U=S.slots).default)==null?void 0:I.call(U),d(va,{transition:l.transition},{default:()=>{var x,re;return[ha(d("span",st({class:["v-badge__badge",m.value,v.value,y.value,$.value],style:[D.value,H.value,l.inline?{}:M.value],"aria-atomic":"true","aria-label":P(l.label,N),"aria-live":"polite",role:"status"},ee),[l.dot?void 0:S.slots.badge?(re=(x=S.slots).badge)==null?void 0:re.call(x):l.icon?d(j,{icon:l.icon},null):r]),[[ma,l.modelValue]])]}})])]}})}),{}}}),mt=l=>(ls("data-v-4a0763b6"),l=l(),rs(),l),Ri={key:1},Ui={class:"text-xs text-white select-none scroll-text"},Li={key:3,class:"w-16 text-justify text-slate-100"},Fi={key:4,class:"w-16 text-justify text-slate-100"},Bi=mt(()=>u("div",{class:"text-xs text-center text-white select-none flex-nowrap"},"Processing video...",-1)),zi=[Bi],Yi={key:5,class:"flex justify-center w-8"},Hi={class:"p-6 m-5 bg-white rounded-md"},Wi=mt(()=>u("p",{class:"text-xl font-semibold"},"Choose a stream to record",-1)),ji=mt(()=>u("div",{class:"w-auto h-px my-2 bg-grey-lighten-3"},null,-1)),$i={class:"flex items-center"},Xi=mt(()=>u("span",null,"Record",-1)),qi={key:1,class:"w-5 h-5 ml-2 rounded-full bg-red"},Gi=Ot({__name:"MiniVideoRecorder",props:{miniWidget:{}},setup(l){const S=pa(),v=is(),y=ga(l).miniWidget,P=g(),{namesAvailableStreams:$}=ya(v),H=g(),{isOutside:m}=_a(H),M=g(!1),N=g(!1),r=g(!1),ee=Ta({interval:100}),V=g(),U=g(!1),I=g(0);At(async()=>{await re()}),xa(async()=>{Object.keys(y.value.options).length===0&&(y.value.options={streamName:void 0}),P.value=y.value.options.streamName}),J(P,()=>{y.value.options.streamName=P.value,V.value=void 0});const x=E=>{N.value=E},re=async()=>{const E=(await v.videoStoringDB.keys()).filter(L=>v.isVideoFilename(L)).length,f=Object.keys(v.keysFailedUnprocessedVideos).length;I.value=E+f};function z(E){if(P.value=E,P.value===void 0){qe.fire({text:"No stream selected.",icon:"error"});return}if($.value.includes(P.value))return;const f="The selected stream is not available. Please check its source or select another stream.";throw qe.fire({text:f,icon:"error"}),new Error(f)}const ie=async()=>{if(X.value){P.value!==void 0&&v.stopRecording(P.value);return}if(P.value===void 0){M.value=!0;return}oe()},oe=()=>{var E;if(P.value&&!((E=v.getStreamData(P.value))!=null&&E.connected)){qe.fire({title:"Cannot start recording.",text:"Stream is not connected.",icon:"error"});return}z(P.value),v.startRecording(P.value),M.value=!1},X=ht(()=>P.value===void 0?!1:v.isRecording(P.value)),te=ht(()=>{var ce,me,W,Ae;if(P.value===void 0)return"00:00:00";const E=(ce=v.getStreamData(P.value))==null?void 0:ce.timeRecordingStart;if(E===void 0)return"00:00:00";const f=ba({start:E,end:ee.value}),L=((me=f.hours)==null?void 0:me.toFixed(0).length)===1?`0${f.hours}`:f.hours,F=((W=f.minutes)==null?void 0:W.toFixed(0).length)===1?`0${f.minutes}`:f.minutes,Te=((Ae=f.seconds)==null?void 0:Ae.toFixed(0).length)===1?`0${f.seconds}`:f.seconds;return`${L}:${F}:${Te}`}),ne=async E=>{z(E),V.value=void 0,r.value=!0;let f=0;const L=100,F=3e3;for(;r.value&&f<F;)r.value=V.value===void 0||!V.value.active,await Sa(L),f+=L;if(r.value){qe.fire({text:"Could not load media stream.",icon:"error"});return}y.value.options.streamName=E};let _e;return S.isRealMiniWidget(y.value)&&(_e=setInterval(()=>{y.value.options.streamName===void 0&&!$.value.isEmpty()&&(y.value.options.streamName=$.value[0],P.value=y.value.options.streamName,$.value.length>1&&qe.fire({title:"Multiple streams detected",text:`You have multiple streams available, so we chose one randomly to start with.
          If you want to change it, please open the widget configuration.`,icon:"info",confirmButtonText:"OK"}));const E=v.getMediaStream(y.value.options.streamName);wa(E,V.value)||(V.value=E)},1e3)),os(()=>clearInterval(_e)),J(()=>v.areThereVideosProcessing,E=>{U.value=E,re()}),J(()=>v.keysFailedUnprocessedVideos,()=>re()),J(()=>N.value,async E=>{E===!1&&await re()}),J(X,()=>{if(!X.value){window.onbeforeunload=null;return}window.onbeforeunload=()=>(qe.fire({text:`
      You have a video recording ongoing.
      Remember to stop it before closing Cockpit, or the record will be lost.
    `,icon:"warning"}),"I hope the user does not click on the leave button.")}),(E,f)=>{const L=Ea("FontAwesomeIcon");return _(),C(Me,null,[u("div",{ref_key:"recorderWidget",ref:H,class:he(["flex justify-around px-2 py-1 text-center rounded-lg h-9 align-center bg-slate-800/60",{"w-48":I.value>0,"w-32":I.value<=0}])},[U.value?(_(),C("div",Ri,[d(j,{class:"w-6 h-6 animate-spin",color:"white"},{default:p(()=>[w("mdi-loading")]),_:1})])):(_(),C("div",{key:0,class:he([{"blob red w-5 opacity-100 rounded-sm":X.value,"opacity-30 bg-red-400":It(m)&&!X.value},"w-6 transition-all duration-500 rounded-full aspect-square bg-red-lighten-1 hover:cursor-pointer opacity-70 hover:opacity-90"]),onClick:f[0]||(f[0]=F=>ie())},null,2)),!X.value&&!U.value?(_(),C(Me,{key:2},[P.value?(_(),C("div",{key:0,class:"flex flex-col max-w-[50%] scroll-container transition-all border-blur cursor-pointer",onClick:f[1]||(f[1]=F=>M.value=!0)},[u("div",Ui,k(P.value),1)])):(_(),Ve(L,{key:1,icon:"fa-solid fa-video",class:"h-6 text-slate-100"}))],64)):B("",!0),X.value&&!U.value?(_(),C("div",Li,k(te.value),1)):U.value?(_(),C("div",Fi,zi)):B("",!0),I.value>0?(_(),C("div",Yi,[d(tt,{vertical:"",class:"h-6"}),d(Mi,{color:"info",content:I.value,dot:It(m)||N.value,class:"cursor-pointer",onClick:f[3]||(f[3]=F=>N.value=!0)},{default:p(()=>[d(j,{class:"w-6 h-6 ml-3 text-slate-100",onClick:f[2]||(f[2]=F=>N.value=!0)},{default:p(()=>[w(" mdi-video-box ")]),_:1})]),_:1},8,["content","dot"])])):B("",!0)],2),d(ns,{modelValue:M.value,"onUpdate:modelValue":f[5]||(f[5]=F=>M.value=F),width:"auto"},{default:p(()=>[u("div",Hi,[Wi,ji,d(Pa,{"model-value":P.value,label:"Stream name",items:It($),"item-title":"name",density:"compact",variant:"outlined","no-data-text":"No streams available.","hide-details":"","return-object":"","onUpdate:modelValue":ne},null,8,["model-value","items"]),u("div",$i,[u("button",{class:"w-auto p-3 m-2 font-medium transition-all rounded-md shadow-md text-uppercase hover:bg-slate-100",onClick:f[4]||(f[4]=F=>M.value=!1)}," Cancel "),u("button",{class:he(["flex items-center p-3 mx-2 font-medium transition-all rounded-md shadow-md w-fit text-uppercase hover:bg-slate-100",{"bg-slate-200 opacity-30 pointer-events-none":r.value}]),onClick:oe},[Xi,r.value?(_(),Ve(j,{key:0,class:"m-2 animate-spin"},{default:p(()=>[w("mdi-loading")]),_:1})):(_(),C("div",qi))],2)])])]),_:1},8,["modelValue"]),d(Oi,{"open-modal":N.value,"onUpdate:openModal":x},null,8,["open-modal"])],64)}}}),Ji=cs(Gi,[["__scopeId","data-v-4a0763b6"]]);export{Ji as default};
