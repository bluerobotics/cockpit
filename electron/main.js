"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("electron"),r=require("path"),l=require("os"),a=()=>{const t=l.networkInterfaces();for(const n of Object.keys(t))for(const s of t[n]??[])if(s.family==="IPv4"&&!s.internal)return{subnet:s.address.split(".").slice(0,3).join(".")};throw new Error("No network interface found.")},c=()=>{e.ipcMain.handle("get-network-info",a)},i={dist:r.join(__dirname,"..")};let o;function p(){const{width:t,height:n}=e.screen.getPrimaryDisplay().workAreaSize;o=new e.BrowserWindow({icon:r.join(i.dist,"pwa-512x512.png"),webPreferences:{preload:r.join(i.dist,"electron/preload.js"),contextIsolation:!0,nodeIntegration:!1},width:t,height:n}),o.webContents.on("did-finish-load",()=>{o==null||o.webContents.send("main-process-message",new Date().toLocaleString())}),process.env.VITE_DEV_SERVER_URL?o.loadURL(process.env.VITE_DEV_SERVER_URL):o.loadFile(r.join(i.dist,"index.html"))}e.app.on("window-all-closed",()=>{console.log("Closing application."),o=null,e.app.quit()});e.app.on("ready",()=>{e.protocol.registerFileProtocol("file",(t,n)=>{n({path:t.url.substring(7)})})});e.protocol.registerSchemesAsPrivileged([{scheme:"file",privileges:{secure:!0,standard:!0,supportFetchAPI:!0,allowServiceWorkers:!0}}]);c();e.app.whenReady().then(p);e.app.on("before-quit",()=>{});exports.ROOT_PATH=i;
