import{d as ct,p as m,z as Vs,o as y,i as de,A as v,h as d,V as qt,B as As,a as c,n as oe,t as C,C as Gt,F as Y,G as w,j as R,H as Os,I as Ds,J as We,K as Ms,c as N,L as Ae,M as Ze,N as Oe,O as Nt,_ as It,P as Zt,Q as Jt,R as Rs,S as Kt,T as Us,U as Qt,W as Ls,X as Fs,Y as es,Z as Bs,$ as ts,a0 as zs,a1 as Ws,a2 as js,a3 as Hs,a4 as ss,a5 as as,q as K,x as kt,a6 as Ys,a7 as is,a8 as Ht,a9 as $s,aa as rt,ab as Xs,ac as Je,ad as qs,ae as Gs,af as os,ag as Zs,ah as ns,ai as ls,aj as Ce,ak as Js,al as Ks,am as Qs,an as ea,ao as ta,ap as sa,aq as aa,ar as rs,as as cs,at as ia,au as oa,av as na,aw as la,ax as ra,ay as Yt,az as ca,aA as ua,aB as da,aC as fa,aD as va,w as ha,aE as ma,aF as pa,aG as ga,aH as ya,aI as _a,aJ as xa,aK as Ta,k as $t,aL as ba,aM as ze,aN as wa,r as Ea,b as St,aO as Pa}from"./index-CHB4MhgW.js";var us={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(l){(function(g,f,O,_){var x=["","webkit","Moz","MS","ms","o"],p=f.createElement("div"),W="function",I=Math.round,n=Math.abs,k=Date.now;function V(e,t,s){return setTimeout(ce(e,s),t)}function D(e,t,s){return Array.isArray(e)?(A(e,s[t],s),!0):!1}function A(e,t,s){var a;if(e)if(e.forEach)e.forEach(t,s);else if(e.length!==_)for(a=0;a<e.length;)t.call(s,e[a],a,e),a++;else for(a in e)e.hasOwnProperty(a)&&t.call(s,e[a],a,e)}function T(e,t,s){var a="DEPRECATED METHOD: "+t+`
`+s+` AT 
`;return function(){var i=new Error("get-stack-trace"),u=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",P=g.console&&(g.console.warn||g.console.log);return P&&P.call(g.console,a,u),e.apply(this,arguments)}}var M;typeof Object.assign!="function"?M=function(t){if(t===_||t===null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(t),a=1;a<arguments.length;a++){var i=arguments[a];if(i!==_&&i!==null)for(var u in i)i.hasOwnProperty(u)&&(s[u]=i[u])}return s}:M=Object.assign;var re=T(function(t,s,a){for(var i=Object.keys(s),u=0;u<i.length;)(!a||a&&t[i[u]]===_)&&(t[i[u]]=s[i[u]]),u++;return t},"extend","Use `assign`."),q=T(function(t,s){return re(t,s,!0)},"merge","Use `assign`.");function U(e,t,s){var a=t.prototype,i;i=e.prototype=Object.create(a),i.constructor=e,i._super=a,s&&M(i,s)}function ce(e,t){return function(){return e.apply(t,arguments)}}function te(e,t){return typeof e==W?e.apply(t&&t[0]||_,t):e}function F(e,t){return e===_?t:e}function ue(e,t,s){A(E(t),function(a){e.addEventListener(a,s,!1)})}function ne(e,t,s){A(E(t),function(a){e.removeEventListener(a,s,!1)})}function le(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function S(e,t){return e.indexOf(t)>-1}function E(e){return e.trim().split(/\s+/g)}function G(e,t,s){if(e.indexOf&&!s)return e.indexOf(t);for(var a=0;a<e.length;){if(s&&e[a][s]==t||!s&&e[a]===t)return a;a++}return-1}function B(e){return Array.prototype.slice.call(e,0)}function j(e,t,s){for(var a=[],i=[],u=0;u<e.length;){var P=t?e[u][t]:e[u];G(i,P)<0&&a.push(e[u]),i[u]=P,u++}return s&&(t?a=a.sort(function(ee,ie){return ee[t]>ie[t]}):a=a.sort()),a}function xe(e,t){for(var s,a,i=t[0].toUpperCase()+t.slice(1),u=0;u<x.length;){if(s=x[u],a=s?s+i:t,a in e)return a;u++}return _}var se=1;function pe(){return se++}function ae(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||g}var He=/mobile|tablet|ip(ad|hone|od)|android/i,Ke="ontouchstart"in g,dt=xe(g,"PointerEvent")!==_,ft=Ke&&He.test(navigator.userAgent),Te="touch",vt="pen",Ye="mouse",ht="kinect",mt=25,$=1,be=2,z=4,Q=8,Fe=1,Me=2,Re=4,Ne=8,Ue=16,fe=Me|Re,we=Ne|Ue,Qe=fe|we,et=["x","y"],Ee=["clientX","clientY"];function o(e,t){var s=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(a){te(e.options.enable,[e])&&s.handler(a)},this.init()}o.prototype={handler:function(){},init:function(){this.evEl&&ue(this.element,this.evEl,this.domHandler),this.evTarget&&ue(this.target,this.evTarget,this.domHandler),this.evWin&&ue(ae(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&ne(this.element,this.evEl,this.domHandler),this.evTarget&&ne(this.target,this.evTarget,this.domHandler),this.evWin&&ne(ae(this.element),this.evWin,this.domHandler)}};function h(e){var t,s=e.options.inputClass;return s?t=s:dt?t=gt:ft?t=st:Ke?t=yt:t=tt,new t(e,b)}function b(e,t,s){var a=s.pointers.length,i=s.changedPointers.length,u=t&$&&a-i===0,P=t&(z|Q)&&a-i===0;s.isFirst=!!u,s.isFinal=!!P,u&&(e.session={}),s.eventType=t,L(e,s),e.emit("hammer.input",s),e.recognize(s),e.session.prevInput=s}function L(e,t){var s=e.session,a=t.pointers,i=a.length;s.firstInput||(s.firstInput=H(t)),i>1&&!s.firstMultiple?s.firstMultiple=H(t):i===1&&(s.firstMultiple=!1);var u=s.firstInput,P=s.firstMultiple,J=P?P.center:u.center,ee=t.center=Z(a);t.timeStamp=k(),t.deltaTime=t.timeStamp-u.timeStamp,t.angle=ye(J,ee),t.distance=he(J,ee),ve(s,t),t.offsetDirection=X(t.deltaX,t.deltaY);var ie=ge(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=ie.x,t.overallVelocityY=ie.y,t.overallVelocity=n(ie.x)>n(ie.y)?ie.x:ie.y,t.scale=P?pt(P.pointers,a):1,t.rotation=P?$e(P.pointers,a):0,t.maxPointers=s.prevInput?t.pointers.length>s.prevInput.maxPointers?t.pointers.length:s.prevInput.maxPointers:t.pointers.length,r(s,t);var Se=e.element;le(t.srcEvent.target,Se)&&(Se=t.srcEvent.target),t.target=Se}function ve(e,t){var s=t.center,a=e.offsetDelta||{},i=e.prevDelta||{},u=e.prevInput||{};(t.eventType===$||u.eventType===z)&&(i=e.prevDelta={x:u.deltaX||0,y:u.deltaY||0},a=e.offsetDelta={x:s.x,y:s.y}),t.deltaX=i.x+(s.x-a.x),t.deltaY=i.y+(s.y-a.y)}function r(e,t){var s=e.lastInterval||t,a=t.timeStamp-s.timeStamp,i,u,P,J;if(t.eventType!=Q&&(a>mt||s.velocity===_)){var ee=t.deltaX-s.deltaX,ie=t.deltaY-s.deltaY,Se=ge(a,ee,ie);u=Se.x,P=Se.y,i=n(Se.x)>n(Se.y)?Se.x:Se.y,J=X(ee,ie),e.lastInterval=t}else i=s.velocity,u=s.velocityX,P=s.velocityY,J=s.direction;t.velocity=i,t.velocityX=u,t.velocityY=P,t.direction=J}function H(e){for(var t=[],s=0;s<e.pointers.length;)t[s]={clientX:I(e.pointers[s].clientX),clientY:I(e.pointers[s].clientY)},s++;return{timeStamp:k(),pointers:t,center:Z(t),deltaX:e.deltaX,deltaY:e.deltaY}}function Z(e){var t=e.length;if(t===1)return{x:I(e[0].clientX),y:I(e[0].clientY)};for(var s=0,a=0,i=0;i<t;)s+=e[i].clientX,a+=e[i].clientY,i++;return{x:I(s/t),y:I(a/t)}}function ge(e,t,s){return{x:t/e||0,y:s/e||0}}function X(e,t){return e===t?Fe:n(e)>=n(t)?e<0?Me:Re:t<0?Ne:Ue}function he(e,t,s){s||(s=et);var a=t[s[0]]-e[s[0]],i=t[s[1]]-e[s[1]];return Math.sqrt(a*a+i*i)}function ye(e,t,s){s||(s=et);var a=t[s[0]]-e[s[0]],i=t[s[1]]-e[s[1]];return Math.atan2(i,a)*180/Math.PI}function $e(e,t){return ye(t[1],t[0],Ee)+ye(e[1],e[0],Ee)}function pt(e,t){return he(t[0],t[1],Ee)/he(e[0],e[1],Ee)}var ds={mousedown:$,mousemove:be,mouseup:z},fs="mousedown",vs="mousemove mouseup";function tt(){this.evEl=fs,this.evWin=vs,this.pressed=!1,o.apply(this,arguments)}U(tt,o,{handler:function(t){var s=ds[t.type];s&$&&t.button===0&&(this.pressed=!0),s&be&&t.which!==1&&(s=z),this.pressed&&(s&z&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[t],changedPointers:[t],pointerType:Ye,srcEvent:t}))}});var hs={pointerdown:$,pointermove:be,pointerup:z,pointercancel:Q,pointerout:Q},ms={2:Te,3:vt,4:Ye,5:ht},Vt="pointerdown",At="pointermove pointerup pointercancel";g.MSPointerEvent&&!g.PointerEvent&&(Vt="MSPointerDown",At="MSPointerMove MSPointerUp MSPointerCancel");function gt(){this.evEl=Vt,this.evWin=At,o.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}U(gt,o,{handler:function(t){var s=this.store,a=!1,i=t.type.toLowerCase().replace("ms",""),u=hs[i],P=ms[t.pointerType]||t.pointerType,J=P==Te,ee=G(s,t.pointerId,"pointerId");u&$&&(t.button===0||J)?ee<0&&(s.push(t),ee=s.length-1):u&(z|Q)&&(a=!0),!(ee<0)&&(s[ee]=t,this.callback(this.manager,u,{pointers:s,changedPointers:[t],pointerType:P,srcEvent:t}),a&&s.splice(ee,1))}});var ps={touchstart:$,touchmove:be,touchend:z,touchcancel:Q},gs="touchstart",ys="touchstart touchmove touchend touchcancel";function Ot(){this.evTarget=gs,this.evWin=ys,this.started=!1,o.apply(this,arguments)}U(Ot,o,{handler:function(t){var s=ps[t.type];if(s===$&&(this.started=!0),!!this.started){var a=_s.call(this,t,s);s&(z|Q)&&a[0].length-a[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:a[0],changedPointers:a[1],pointerType:Te,srcEvent:t})}}});function _s(e,t){var s=B(e.touches),a=B(e.changedTouches);return t&(z|Q)&&(s=j(s.concat(a),"identifier",!0)),[s,a]}var xs={touchstart:$,touchmove:be,touchend:z,touchcancel:Q},Ts="touchstart touchmove touchend touchcancel";function st(){this.evTarget=Ts,this.targetIds={},o.apply(this,arguments)}U(st,o,{handler:function(t){var s=xs[t.type],a=bs.call(this,t,s);a&&this.callback(this.manager,s,{pointers:a[0],changedPointers:a[1],pointerType:Te,srcEvent:t})}});function bs(e,t){var s=B(e.touches),a=this.targetIds;if(t&($|be)&&s.length===1)return a[s[0].identifier]=!0,[s,s];var i,u,P=B(e.changedTouches),J=[],ee=this.target;if(u=s.filter(function(ie){return le(ie.target,ee)}),t===$)for(i=0;i<u.length;)a[u[i].identifier]=!0,i++;for(i=0;i<P.length;)a[P[i].identifier]&&J.push(P[i]),t&(z|Q)&&delete a[P[i].identifier],i++;if(J.length)return[j(u.concat(J),"identifier",!0),J]}var ws=2500,Dt=25;function yt(){o.apply(this,arguments);var e=ce(this.handler,this);this.touch=new st(this.manager,e),this.mouse=new tt(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}U(yt,o,{handler:function(t,s,a){var i=a.pointerType==Te,u=a.pointerType==Ye;if(!(u&&a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents)){if(i)Es.call(this,s,a);else if(u&&Ps.call(this,a))return;this.callback(t,s,a)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Es(e,t){e&$?(this.primaryTouch=t.changedPointers[0].identifier,Mt.call(this,t)):e&(z|Q)&&Mt.call(this,t)}function Mt(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var s={x:t.clientX,y:t.clientY};this.lastTouches.push(s);var a=this.lastTouches,i=function(){var u=a.indexOf(s);u>-1&&a.splice(u,1)};setTimeout(i,ws)}}function Ps(e){for(var t=e.srcEvent.clientX,s=e.srcEvent.clientY,a=0;a<this.lastTouches.length;a++){var i=this.lastTouches[a],u=Math.abs(t-i.x),P=Math.abs(s-i.y);if(u<=Dt&&P<=Dt)return!0}return!1}var Rt=xe(p.style,"touchAction"),Ut=Rt!==_,Lt="compute",Ft="auto",_t="manipulation",Le="none",Xe="pan-x",qe="pan-y",at=Cs();function xt(e,t){this.manager=e,this.set(t)}xt.prototype={set:function(e){e==Lt&&(e=this.compute()),Ut&&this.manager.element.style&&at[e]&&(this.manager.element.style[Rt]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return A(this.manager.recognizers,function(t){te(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),Ss(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,s=e.offsetDirection;if(this.manager.session.prevented){t.preventDefault();return}var a=this.actions,i=S(a,Le)&&!at[Le],u=S(a,qe)&&!at[qe],P=S(a,Xe)&&!at[Xe];if(i){var J=e.pointers.length===1,ee=e.distance<2,ie=e.deltaTime<250;if(J&&ee&&ie)return}if(!(P&&u)&&(i||u&&s&fe||P&&s&we))return this.preventSrc(t)},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};function Ss(e){if(S(e,Le))return Le;var t=S(e,Xe),s=S(e,qe);return t&&s?Le:t||s?t?Xe:qe:S(e,_t)?_t:Ft}function Cs(){if(!Ut)return!1;var e={},t=g.CSS&&g.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(s){e[s]=t?g.CSS.supports("touch-action",s):!0}),e}var it=1,me=2,Be=4,De=8,Ie=De,Ge=16,Pe=32;function ke(e){this.options=M({},this.defaults,e||{}),this.id=pe(),this.manager=null,this.options.enable=F(this.options.enable,!0),this.state=it,this.simultaneous={},this.requireFail=[]}ke.prototype={defaults:{},set:function(e){return M(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(D(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=ot(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return D(e,"dropRecognizeWith",this)?this:(e=ot(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(D(e,"requireFailure",this))return this;var t=this.requireFail;return e=ot(e,this),G(t,e)===-1&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(D(e,"dropRequireFailure",this))return this;e=ot(e,this);var t=G(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,s=this.state;function a(i){t.manager.emit(i,e)}s<De&&a(t.options.event+Bt(s)),a(t.options.event),e.additionalEvent&&a(e.additionalEvent),s>=De&&a(t.options.event+Bt(s))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=Pe},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(Pe|it)))return!1;e++}return!0},recognize:function(e){var t=M({},e);if(!te(this.options.enable,[this,t])){this.reset(),this.state=Pe;return}this.state&(Ie|Ge|Pe)&&(this.state=it),this.state=this.process(t),this.state&(me|Be|De|Ge)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}};function Bt(e){return e&Ge?"cancel":e&De?"end":e&Be?"move":e&me?"start":""}function zt(e){return e==Ue?"down":e==Ne?"up":e==Me?"left":e==Re?"right":""}function ot(e,t){var s=t.manager;return s?s.get(e):e}function _e(){ke.apply(this,arguments)}U(_e,ke,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return t===0||e.pointers.length===t},process:function(e){var t=this.state,s=e.eventType,a=t&(me|Be),i=this.attrTest(e);return a&&(s&Q||!i)?t|Ge:a||i?s&z?t|De:t&me?t|Be:me:Pe}});function nt(){_e.apply(this,arguments),this.pX=null,this.pY=null}U(nt,_e,{defaults:{event:"pan",threshold:10,pointers:1,direction:Qe},getTouchAction:function(){var e=this.options.direction,t=[];return e&fe&&t.push(qe),e&we&&t.push(Xe),t},directionTest:function(e){var t=this.options,s=!0,a=e.distance,i=e.direction,u=e.deltaX,P=e.deltaY;return i&t.direction||(t.direction&fe?(i=u===0?Fe:u<0?Me:Re,s=u!=this.pX,a=Math.abs(e.deltaX)):(i=P===0?Fe:P<0?Ne:Ue,s=P!=this.pY,a=Math.abs(e.deltaY))),e.direction=i,s&&a>t.threshold&&i&t.direction},attrTest:function(e){return _e.prototype.attrTest.call(this,e)&&(this.state&me||!(this.state&me)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=zt(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}});function Tt(){_e.apply(this,arguments)}U(Tt,_e,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Le]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&me)},emit:function(e){if(e.scale!==1){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}});function bt(){ke.apply(this,arguments),this._timer=null,this._input=null}U(bt,ke,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Ft]},process:function(e){var t=this.options,s=e.pointers.length===t.pointers,a=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!a||!s||e.eventType&(z|Q)&&!i)this.reset();else if(e.eventType&$)this.reset(),this._timer=V(function(){this.state=Ie,this.tryEmit()},t.time,this);else if(e.eventType&z)return Ie;return Pe},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===Ie&&(e&&e.eventType&z?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=k(),this.manager.emit(this.options.event,this._input)))}});function wt(){_e.apply(this,arguments)}U(wt,_e,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Le]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&me)}});function Et(){_e.apply(this,arguments)}U(Et,_e,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:fe|we,pointers:1},getTouchAction:function(){return nt.prototype.getTouchAction.call(this)},attrTest:function(e){var t=this.options.direction,s;return t&(fe|we)?s=e.overallVelocity:t&fe?s=e.overallVelocityX:t&we&&(s=e.overallVelocityY),this._super.attrTest.call(this,e)&&t&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&n(s)>this.options.velocity&&e.eventType&z},emit:function(e){var t=zt(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}});function lt(){ke.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}U(lt,ke,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[_t]},process:function(e){var t=this.options,s=e.pointers.length===t.pointers,a=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),e.eventType&$&&this.count===0)return this.failTimeout();if(a&&i&&s){if(e.eventType!=z)return this.failTimeout();var u=this.pTime?e.timeStamp-this.pTime<t.interval:!0,P=!this.pCenter||he(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,!P||!u?this.count=1:this.count+=1,this._input=e;var J=this.count%t.taps;if(J===0)return this.hasRequireFailures()?(this._timer=V(function(){this.state=Ie,this.tryEmit()},t.interval,this),me):Ie}return Pe},failTimeout:function(){return this._timer=V(function(){this.state=Pe},this.options.interval,this),Pe},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ie&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Ve(e,t){return t=t||{},t.recognizers=F(t.recognizers,Ve.defaults.preset),new Pt(e,t)}Ve.VERSION="2.0.7",Ve.defaults={domEvents:!1,touchAction:Lt,enable:!0,inputTarget:null,inputClass:null,preset:[[wt,{enable:!1}],[Tt,{enable:!1},["rotate"]],[Et,{direction:fe}],[nt,{direction:fe},["swipe"]],[lt],[lt,{event:"doubletap",taps:2},["tap"]],[bt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Ns=1,Wt=2;function Pt(e,t){this.options=M({},Ve.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=h(this),this.touchAction=new xt(this,this.options.touchAction),jt(this,!0),A(this.options.recognizers,function(s){var a=this.add(new s[0](s[1]));s[2]&&a.recognizeWith(s[2]),s[3]&&a.requireFailure(s[3])},this)}Pt.prototype={set:function(e){return M(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?Wt:Ns},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var s,a=this.recognizers,i=t.curRecognizer;(!i||i&&i.state&Ie)&&(i=t.curRecognizer=null);for(var u=0;u<a.length;)s=a[u],t.stopped!==Wt&&(!i||s==i||s.canRecognizeWith(i))?s.recognize(e):s.reset(),!i&&s.state&(me|Be|De)&&(i=t.curRecognizer=s),u++}},get:function(e){if(e instanceof ke)return e;for(var t=this.recognizers,s=0;s<t.length;s++)if(t[s].options.event==e)return t[s];return null},add:function(e){if(D(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(D(e,"remove",this))return this;if(e=this.get(e),e){var t=this.recognizers,s=G(t,e);s!==-1&&(t.splice(s,1),this.touchAction.update())}return this},on:function(e,t){if(e!==_&&t!==_){var s=this.handlers;return A(E(e),function(a){s[a]=s[a]||[],s[a].push(t)}),this}},off:function(e,t){if(e!==_){var s=this.handlers;return A(E(e),function(a){t?s[a]&&s[a].splice(G(s[a],t),1):delete s[a]}),this}},emit:function(e,t){this.options.domEvents&&Is(e,t);var s=this.handlers[e]&&this.handlers[e].slice();if(!(!s||!s.length)){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var a=0;a<s.length;)s[a](t),a++}},destroy:function(){this.element&&jt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function jt(e,t){var s=e.element;if(s.style){var a;A(e.options.cssProps,function(i,u){a=xe(s.style,u),t?(e.oldCssProps[a]=s.style[a],s.style[a]=i):s.style[a]=e.oldCssProps[a]||""}),t||(e.oldCssProps={})}}function Is(e,t){var s=f.createEvent("Event");s.initEvent(e,!0,!0),s.gesture=t,t.target.dispatchEvent(s)}M(Ve,{INPUT_START:$,INPUT_MOVE:be,INPUT_END:z,INPUT_CANCEL:Q,STATE_POSSIBLE:it,STATE_BEGAN:me,STATE_CHANGED:Be,STATE_ENDED:De,STATE_RECOGNIZED:Ie,STATE_CANCELLED:Ge,STATE_FAILED:Pe,DIRECTION_NONE:Fe,DIRECTION_LEFT:Me,DIRECTION_RIGHT:Re,DIRECTION_UP:Ne,DIRECTION_DOWN:Ue,DIRECTION_HORIZONTAL:fe,DIRECTION_VERTICAL:we,DIRECTION_ALL:Qe,Manager:Pt,Input:o,TouchAction:xt,TouchInput:st,MouseInput:tt,PointerEventInput:gt,TouchMouseInput:yt,SingleTouchInput:Ot,Recognizer:ke,AttrRecognizer:_e,Tap:lt,Pan:nt,Swipe:Et,Pinch:Tt,Rotate:wt,Press:bt,on:ue,off:ne,each:A,merge:q,extend:re,assign:M,inherit:U,bindFn:ce,prefixed:xe});var ks=typeof g<"u"?g:typeof self<"u"?self:{};ks.Hammer=Ve,typeof _=="function"&&_.amd?_(function(){return Ve}):l.exports?l.exports=Ve:g[O]=Ve})(window,document,"Hammer")})(us);var Ct=us.exports;const Sa={class:"flex justify-center align-center w-full mb-3"},Ca={class:"text-lg"},Na={class:"flex justify-center w-full px-10"},Ia={key:1,class:"flex w-full px-1 py-2 justify-end"},ka=ct({__name:"InteractionDialog",props:{showDialog:Boolean,title:String,contentComponent:String,maxWidth:Number,actions:Object,variant:String,message:String},setup(l){const g=l,f=m(g.showDialog),O=m(g.title),_=m(g.contentComponent),x=m(g.maxWidth),p=m(g.actions),W=m(g.variant),I=m(g.message);return Vs(()=>{f.value=g.showDialog,O.value=g.title,p.value=g.actions,_.value=g.contentComponent,W.value=g.variant,I.value=g.message}),(n,k)=>(y(),de(Nt,{modelValue:f.value,"onUpdate:modelValue":k[1]||(k[1]=V=>f.value=V),persistent:"","max-width":x.value||600},{default:v(()=>[d(qt,{"max-width":x.value||600,class:"main-dialog px-2 rounded-lg"},{default:v(()=>[d(As,null,{default:v(()=>[c("div",{class:oe(["flex justify-center test-center pt-2 text-[18px] font-bold text-nowrap text-ellipsis overflow-x-hidden",`w-[${x.value}px]`])},C(O.value),3)]),_:1}),d(Gt,{class:"pb-6"},{default:v(()=>[c("div",Sa,[W.value?(y(),de(Y,{key:0,size:"38",color:"white",class:"mr-8"},{default:v(()=>[w(C(W.value==="info"?"mdi-information":W.value==="warning"?"mdi-alert":W.value==="error"?"mdi-alert-circle":"mdi-check-circle"),1)]),_:1})):R("",!0),c("div",Ca,C(I.value),1)]),Os(n.$slots,"content",{},void 0,!0),_.value?(y(),de(Ds(_.value),{key:0})):R("",!0)]),_:3}),c("div",Na,[d(We,{class:"opacity-10 border-[#fafafa]"})]),d(Ms,null,{default:v(()=>[p.value&&p.value.length>0?(y(),N("div",{key:0,class:oe(["flex w-full px-1 py-2",p.value.length===1?"justify-end":"justify-between"])},[(y(!0),N(Ae,null,Ze(p.value,(V,D)=>(y(),de(Oe,{key:D,size:V.size||"default",color:V.color||void 0,class:oe(V.class||void 0),disabled:V.disabled||!1,onClick:V.action},{default:v(()=>[w(C(V.text),1)]),_:2},1032,["size","color","class","disabled","onClick"]))),128))],2)):(y(),N("div",Ia,[d(Oe,{size:"small",variant:"text",onClick:k[0]||(k[0]=V=>f.value=!1)},{default:v(()=>[w("Close")]),_:1})]))]),_:1})]),_:3},8,["max-width"])]),_:3},8,["modelValue","max-width"]))}}),Xt=It(ka,[["__scopeId","data-v-1a61f86e"]]);function Va(l){const g=as(l);let f=-1;function O(){clearInterval(f)}function _(){O(),os(()=>g.value=l)}function x(p){const W=p?getComputedStyle(p):{transitionDuration:.2},I=parseFloat(W.transitionDuration)*1e3||200;if(O(),g.value<=0)return;const n=performance.now();f=window.setInterval(()=>{const k=performance.now()-n+I;g.value=Math.max(l-k,0),g.value<=0&&O()},I)}return Gs(O),{clear:O,time:g,start:x,reset:_}}const Aa=Zt({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...Jt({location:"bottom"}),...Rs(),...Kt(),...Us(),...Qt(),...Ls(Fs({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),Oa=es()({name:"VSnackbar",props:Aa(),emits:{"update:modelValue":l=>!0},setup(l,g){let{slots:f}=g;const O=Bs(l,"modelValue"),{locationStyles:_}=ts(l),{positionClasses:x}=zs(l),{scopeId:p}=Ws(),{themeClasses:W}=js(l),{colorClasses:I,colorStyles:n,variantClasses:k}=Hs(l),{roundedClasses:V}=ss(l),D=Va(Number(l.timeout)),A=m(),T=m(),M=as(!1);K(O,q),K(()=>l.timeout,q),kt(()=>{O.value&&q()});let re=-1;function q(){D.reset(),window.clearTimeout(re);const F=Number(l.timeout);if(!O.value||F===-1)return;const ue=Ys(T.value);D.start(ue),re=window.setTimeout(()=>{O.value=!1},F)}function U(){D.reset(),window.clearTimeout(re)}function ce(){M.value=!0,U()}function te(){M.value=!1,q()}return is(()=>{const F=Ht.filterProps(l),ue=!!(f.default||f.text||l.text);return d(Ht,Je({ref:A,class:["v-snackbar",{"v-snackbar--active":O.value,"v-snackbar--multi-line":l.multiLine&&!l.vertical,"v-snackbar--timer":!!l.timer,"v-snackbar--vertical":l.vertical},x.value,l.class],style:l.style},F,{modelValue:O.value,"onUpdate:modelValue":ne=>O.value=ne,contentProps:Je({class:["v-snackbar__wrapper",W.value,I.value,V.value,k.value],style:[_.value,n.value],onPointerenter:ce,onPointerleave:te},F.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0},p),{default:()=>{var ne,le;return[$s(!1,"v-snackbar"),l.timer&&!M.value&&d("div",{key:"timer",class:"v-snackbar__timer"},[d(rt,{ref:T,color:typeof l.timer=="string"?l.timer:"info",max:l.timeout,"model-value":D.time.value},null)]),ue&&d("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((ne=f.text)==null?void 0:ne.call(f))??l.text,(le=f.default)==null?void 0:le.call(f)]),f.actions&&d(Xs,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[d("div",{class:"v-snackbar__actions"},[f.actions()])]})]},activator:f.activator})}),qs({},A)}}),Da=ct({__name:"Snackbar",props:{openSnackbar:Boolean,closeButton:Boolean,message:{type:String,default:""},duration:{type:Number,default:3e3}},emits:["update:openSnackbar"],setup(l,{emit:g}){const f=l,O=g,_=m(f.openSnackbar),x=m(f.message),p=m(f.duration||3e3),W=()=>{_.value=!1,O("update:openSnackbar",!1)};return K(()=>f.openSnackbar,I=>{_.value=I}),K(()=>f.message,I=>{x.value=I}),K(_,I=>{I||O("update:openSnackbar",!1)}),(I,n)=>(y(),de(Oa,{modelValue:_.value,"onUpdate:modelValue":n[0]||(n[0]=k=>_.value=k),elevation:"4",rounded:"lg",color:"#ffffff40",timeout:p.value,location:"bottom left","content-class":"bg-[#4f4f4f44] backdrop-filter backdrop-blur-lg text-white mb-[50px]",style:{marginBottom:40}},Zs({default:v(()=>[w(C(x.value)+" ",1)]),_:2},[l.closeButton?{name:"actions",fn:v(()=>[d(Oe,{color:"white",variant:"text",onClick:W},{default:v(()=>[d(Y,null,{default:v(()=>[w("mdi-close")]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["modelValue","timeout"]))}}),je=l=>(rs("data-v-bc52222c"),l=l(),cs(),l),Ma={class:"video-modal"},Ra={class:"modal-content"},Ua={class:"flex flex-col justify-between h-full px-5 py-3 align-center"},La={class:"flex flex-col justify-between pt-2 align-center gap-y-8"},Fa=["disabled","onClick"],Ba={class:"flex flex-col justify-center py-2 mb-[10px] align-center"},za={class:"flex flex-col p-2 gap-y-2"},Wa=je(()=>c("div",null,[c("strong",null,"Computer:"),w(" Command+click, Ctrl+click or Long click to select multiple videos. ")],-1)),ja=je(()=>c("div",null,[c("strong",null,"Mobile:"),w(" Long press to select multiple videos.")],-1)),Ha={class:"flex flex-row mt-4 gap-x-10"},Ya={class:"ml-[-8px]"},$a={class:"frosted-button flex flex-col justify-center align-center w-[28px] h-[28px] rounded-full mb-1"},Xa=je(()=>c("div",{class:"text-sm"},"Close",-1)),qa={key:0,class:"flex flex-col justify-between align-center pt-8 px-2 w-[300px] h-[480px]"},Ga={class:"flex flex-col w-full h-full px-4 overflow-auto align-center"},Za={class:"relative video-wrapper"},Ja=["id","poster"],Ka=["src"],Qa=["onClick"],ei=["onClick"],ti={class:"flex flex-row justify-center w-full ml-1 overflow-hidden text-xs"},si={key:0,class:"flex flex-row justify-between align-center h-[45px] w-full mb-[-15px]"},ai={key:1,class:"flex flex-col justify-between mt-5 align-center w-[720px]"},ii=["controls","preload","poster"],oi=["src"],ni={class:"processing-bar"},li={class:"w-0"},ri={class:"flex flex-col p-2 gap-y-2"},ci={key:0,class:"flex flex-col justify-start w-full p-2 pt-3"},ui={class:"card-grid"},di={class:"text-sm"},fi={class:"video-card-dot"},vi={key:1,class:"flex flex-row justify-between w-full h-full px-8 overflow-hidden align-center"},hi={class:"flex flex-row justify-between pl-2 align-center gap-x-6"},mi={class:"flex flex-row cursor-default text-md"},pi={key:0,class:"flex flex-row w-[320px] justify-center gap-x-4 align-center ml-1"},gi={key:0,class:"text-sm text-white border-2 rounded-md mt-[3px] border-[#ffffff44] bg-[#fafafa33] ml-4 px-1"},yi={class:"flex flex-row mt-2"},_i=["disabled","onClick"],xi={class:"mb-10 slide-right-to-left"},Ti=je(()=>c("div",{class:"fixed top-[11px] left-[31px] h-[6px] w-[10px] bg-[#ffffff22]"},null,-1)),bi={key:2},wi={key:2,class:"flex flex-row justify-center w-full h-full text-xl text-center align-center"},Ei=je(()=>c("div",{class:"flex flex-col mb-2 text-center align-end"}," Processing multiple videos may take a while, depending on the number of videos and their sizes. Cockpit will be usable during the process, but the performance may be affected and recording of new videos is disabled. ",-1)),Pi={key:0,class:"flex flex-col -mt-2 text-center align-center"},Si={class:"flex flex-col justify-between h-[140px] w-full pb-3"},Ci={key:0,class:"flex flex-col justify-start"},Ni={class:"mb-3 text-sm text-center"},Ii={class:"flex flex-row justify-between w-full mb-2 align-center"},ki={class:"text-sm font-bold w-[450px] text-nowrap text-start text-ellipsis overflow-x-hidden"},Vi={class:"text-sm text-end"},Ai={class:"flex flex-row justify-between w-full mb-2"},Oi=je(()=>c("div",{class:"text-sm font-bold text-start"},"Overall Progress",-1)),Di={class:"text-sm font-bold text-end"},Mi={key:1},Ri={class:"flex flex-col justify-center w-full pb-3 text-center text-md"},Ui=ct({__name:"VideoLibraryModal",props:{openModal:Boolean},emits:["update:openModal"],setup(l,{emit:g}){const f=ns(),O=l,_=g,x=m([]),p=m([]),W=m([]),I=m(O.openModal),n=m([]),k=m(null),V=m("videos"),D=m(!1),A=m(""),T=m(!1),M=m(!1),re=m(!1),q=m({}),U=m(!1),ce=m(!1),te=m(!0),F=m(!1),ue=m(""),ne=m([]),le=m(!1),S=m(""),E=m([]),G=m(!1),B=m(0),j=m([{fileName:"",progress:0,message:""}]),xe=m(0),se=m(!0),pe=m(null),ae=m(!1),He=m(!1),Ke=[{name:"Videos",icon:"mdi-video-outline",selected:!0,enable:!0,tooltip:""},{name:"Pictures",icon:"mdi-image-outline",selected:!1,enable:!1,tooltip:"Coming soon"}],dt=[{name:"Delete",icon:"mdi-delete-outline",size:22,tooltip:"",confirmAction:!0,enable:!0,action:()=>et()},{name:"Download",icon:"mdi-tray-arrow-down",size:28,tooltip:"Download selected videos with logs",confirmAction:!1,enable:!0,action:()=>Qe()}],ft=()=>{I.value=!1,_("update:openModal",!1),V.value="videos",x.value.forEach(o=>URL.revokeObjectURL(o)),x.value=[],Ne(),pe.value=null,T.value=!1},Te=o=>{const h=/\(([^)]+)\)/,b=o.match(h);return b?b[1]:""},vt=o=>{const h=/.*\(([^)]+)\)/,b=o.match(h);return b?b[0]:""},Ye=()=>{if(n.value.length===1&&!T.value){const o=document.getElementById("video-player");o&&o.play().catch(h=>console.error("Error auto-playing video:",h))}},ht=()=>{T.value=!T.value,T.value||Ne()},mt=o=>{const h=n.value.findIndex(b=>b.fileName===o.fileName);h!==-1?n.value.length>1&&n.value.splice(h,1):(n.value.push(o),T.value=!0)},$=()=>{ae.value=!1,B.value=0,j.value=[{fileName:"",progress:0,message:""}],se.value=!1},be=async()=>{try{await f.processVideoChunksAndTelemetry(n.value.map(o=>o.hash)),T.value=!1,await Ee()}catch(o){o instanceof Error?console.error("Video processing failed:",o.message):console.error("Processing failed with non-Error type:",o),D.value=!0,ae.value=!0}},z=()=>{ae.value&&Ee(),le.value=!1,$()},Q=async()=>{n.value.length===1&&!n.value[0].isProcessed&&(se.value=!0),be()},Fe=()=>{xe.value=n.value.length,S.value="Processing Videos",E.value=[{text:B.value===100?"Close":"Hide",size:"small",class:"font-light",action:z}],F.value=!1,le.value=!0,be()},Me=()=>{ue.value="Process Multiple Videos",ne.value=[{text:"Cancel",size:"small",class:"font-light",action:()=>{F.value=!1}},{text:"Process videos",size:"small",class:"font-bold",action:async()=>{F.value=!1,Fe()}}],F.value=!0},Re=()=>{n.value=[...p.value],T.value=!0},Ne=()=>{T.value=!1,M.value=!1,re.value=!1,n.value.length>1&&(n.value=[n.value[0]])},Ue=()=>{p.value.some(o=>!o.isProcessed)?(n.value=p.value.filter(o=>!o.isProcessed),T.value=!0):(A.value="No unprocessed videos found",D.value=!0)},fe=()=>{p.value.some(o=>o.isProcessed)?(n.value=p.value.filter(o=>o.isProcessed),T.value=!0):(A.value="No processed videos found",D.value=!0)},we=o=>o.flatMap(b=>{const L=b.replace(".webm",".ass");return W.value.some(r=>r.fileName===L)?[b,L]:[b]}),Qe=async()=>{A.value="Getting your download ready...";let o=[],h=[];if(n.value.forEach(b=>{b.isProcessed&&o.push(b.fileName),!b.isProcessed&&b.hash&&h.push(b.hash)}),D.value=!0,o.length>0){const b=we(o);await f.downloadFilesFromVideoDB(b)}h.length>0&&await f.downloadTempVideo(h)},et=async()=>{He.value=!0;let o=n.value.length,h=[],b=[];if(await n.value.forEach(L=>{L.isProcessed&&h.push(L.fileName),!L.isProcessed&&L.hash&&b.push(L.hash)}),h.length>0){const L=we(h);await f.discardProcessedFilesFromVideoDB(L)}b.length>0&&await f.discardUnprocessedFilesFromVideoDB(b),A.value=`${o} video(s) discarded.`,D.value=!0,await Ee(),p.value.length>0?n.value=[p.value[0]]:n.value=[],p.value.length===1&&(T.value=!1),He.value=!1},Ee=async()=>{te.value=!0,p.value=[];const o=[],h=[];await f.videoStoringDB.iterate((ge,X)=>{X.endsWith(".webm")&&o.push((async()=>{const he=await f.videoStoringDB.getItem(X);let ye="",$e=!0;he instanceof Blob?(ye=URL.createObjectURL(he),x.value.push(ye)):console.error("Video data is not a Blob:",he);const pt=await f.videoStorageFileSize(X)??0;return{fileName:X,size:pt,url:ye,isProcessed:$e}})()),X.endsWith(".ass")&&h.push((async()=>{const he=await f.videoStoringDB.getItem(X);let ye="";he instanceof Blob?(ye=URL.createObjectURL(he),x.value.push(ye)):console.error("Video data is not a Blob:",he);const $e=await f.videoStorageFileSize(X)??0;return{fileName:X,url:ye,size:$e}})())});const b=await f.unprocessedVideos,L=Object.entries(b).map(async([ge,X])=>({dateStart:X.dateStart,dateLastRecordingUpdate:X.dateLastRecordingUpdate,dateFinish:X.dateFinish,fileName:X.fileName,vWidth:X.vWidth,vHeight:X.vHeight,hash:ge,thumbnail:X.thumbnail,url:"",isProcessed:!1})),ve=await Promise.all(o),r=await Promise.all(h),Z=(await Promise.all(L)).filter(ge=>ge.dateFinish);p.value=[...ve,...Z],W.value=r,te.value=!1};return K(()=>f.currentFileProgress,o=>{j.value=o},{deep:!0}),K(()=>f.overallProgress,o=>{B.value=o,o>0&&o<100&&(G.value=!0,se.value=!0),o===100&&(G.value=!1,se.value=!1,setTimeout(()=>{le.value=!1},1e3))}),K(I,o=>{_("update:openModal",o),o||($(),T.value=!1,pe.value=null,se.value=!1)}),K(()=>O.openModal,async o=>{I.value=o,o===!0&&(await Ee(),se.value=!1)}),K(n,o=>{if(o.length===1){ae.value&&$(),pe.value=o[0];const h=o[0].url,b=k.value;b&&(b.src=h,b.load())}},{immediate:!0,deep:!0}),K(p,()=>{if(pe.value){const o=p.value.find(h=>Te(h.fileName)===Te(pe.value.fileName));o&&(n.value=[o])}else n.value=p.value.length>0?[p.value[0]]:[]},{deep:!0}),K(I,()=>{I.value||(pe.value=null)}),K(p,async()=>{await os(),p.value.forEach(o=>{var b;const h=document.getElementById(`video-library-${o.fileName}`);if(h){(b=q.value[o.fileName])==null||b.destroy();const L=new Ct.Manager(h);L.add(new Ct.Tap),L.add(new Ct.Press({time:500})),L.on("tap",ve=>{const r=n.value.some(Z=>Z.fileName===o.fileName);if(T.value||ve.srcEvent.ctrlKey||ve.srcEvent.metaKey){T.value=!0;const Z=n.value.findIndex(ge=>ge.fileName===o.fileName);Z>-1?n.value.length>1&&n.value.splice(Z,1):n.value.push(o)}else r||(n.value=[o]);if(n.value.length===1&&r){const Z=document.getElementById("video-player");Z&&(Z.load(),Z.play().catch(ge=>console.error("Error auto-playing video:",ge)))}}),L.on("press",()=>{T.value=!0,n.value.some(ve=>ve.fileName===o.fileName)||n.value.push(o)}),q.value[o.fileName]=L}})},{immediate:!0,deep:!0}),kt(async()=>{te.value=!0,await Ee()}),ls(()=>{V.value="videos",x.value.forEach(o=>URL.revokeObjectURL(o)),x.value=[],Object.values(q.value).forEach(o=>{o.destroy()})}),(o,h)=>(y(),N(Ae,null,[d(Nt,{modelValue:I.value,"onUpdate:modelValue":h[8]||(h[8]=b=>I.value=b),class:"dialog"},{default:v(()=>{var b,L,ve;return[c("div",Ma,[c("div",Ra,[c("div",Ua,[c("div",La,[(y(),N(Ae,null,Ze(Ke,r=>c("button",{key:r.name,disabled:!r.enable,class:"flex flex-col justify-center align-center",onClick:H=>V.value=r.name.toLowerCase()},[r.tooltip!==""?(y(),de(Ce,{key:0,"open-delay":"600",activator:"parent",location:"top"},{default:v(()=>[w(C(r.tooltip),1)]),_:2},1024)):R("",!0),c("div",{class:oe(["mb-1 text-2xl rounded-full",[r.enable?"frosted-button":"frosted-button-disabled",V.value===r.name.toLowerCase()?"w-[58px] h-[58px]":"w-[40px] h-[40px]"]])},[d(Y,{size:V.value===r.name.toLowerCase()?40:24,class:oe({"ml-1":r.name.toLowerCase()==="videos"})},{default:v(()=>[w(C(r.icon),1)]),_:2},1032,["size","class"])],2),c("div",{class:oe(["text-sm",{"text-white/30":!r.enable}])},C(r.name),3)],8,Fa)),64))]),c("div",null,[c("div",Ba,[c("button",{class:"frosted-button text-[#ffffffaa] flex flex-col justify-center align-center w-[28px] h-[28px] rounded-full mb-[4px]",onClick:h[2]||(h[2]=r=>U.value=!U.value)},[d(Y,{class:"text-[24px]"},{default:v(()=>[w("mdi-help-circle-outline")]),_:1}),d(Ce,{modelValue:U.value,"onUpdate:modelValue":h[0]||(h[0]=r=>U.value=r),"open-on-hover":!1,activator:"parent",location:"top",arrow:"","content-class":"border-[#ffffff55] border-2","onClick:outside":h[1]||(h[1]=r=>U.value=!1)},{default:v(()=>[c("div",za,[Wa,ja,c("div",Ha,[c("div",Ya,[d(Y,{size:"10",class:"text-green-500 ml-2 mb-[2px] mr-1"},{default:v(()=>[w("mdi-circle")]),_:1}),w(" Processed video ")]),c("div",null,[d(Y,{size:"10",class:"text-red-500 mb-[2px] mr-1"},{default:v(()=>[w("mdi-circle")]),_:1}),w(" Unprocessed video ")])])])]),_:1},8,["modelValue"])])]),d(We,{class:"opacity-[0.1] ml-[-5px] w-[120%]"}),c("button",{class:"flex flex-col justify-center py-2 mt-4 align-center",onClick:ft},[c("div",$a,[d(Y,{class:"text-[18px] ml-[1px]"},{default:v(()=>[w("mdi-close")]),_:1})]),Xa])])]),d(We,{vertical:"",class:"h-[92%] mt-4 opacity-[0.1]"}),V.value==="videos"?(y(),N(Ae,{key:0},[p.value.length>0?(y(),N("div",qa,[c("div",Ga,[(y(!0),N(Ae,null,Ze(p.value,r=>(y(),N("div",{key:r.fileName,class:"mb-4 video-container"},[c("div",Za,[c("video",{id:`video-library-${r.fileName}`,class:oe(["border-4 border-white rounded-md cursor-pointer border-opacity-[0.1] hover:border-opacity-[0.4] transition duration-75 hover:ease-in",n.value.find(H=>H.fileName===r.fileName)?["border-opacity-[0.4]","w-[220px]"]:["border-opacity-[0.1]","w-[190px]"]]),preload:"auto",poster:r.isProcessed?void 0:r.thumbnail},[c("source",{src:r.url,type:"video/webm"},null,8,Ka)],10,Ja),n.value.find(H=>H.fileName===r.fileName)&&!T.value?(y(),N("div",{key:0,class:"play-button",onClick:H=>r.isProcessed?Ye():Q()},[d(Y,{size:"40",class:"text-white"},{default:v(()=>[w(C(r.isProcessed?"mdi-play-circle-outline":"mdi-progress-alert"),1)]),_:2},1024)],8,Qa)):R("",!0),T.value?(y(),N("div",{key:1,class:oe(["checkmark-button",n.value.find(H=>H.fileName===r.fileName)?"bg-green":"bg-white"]),onClick:Js(H=>mt(r),["stop"])},[d(Y,{size:"15",class:"text-white"},{default:v(()=>[w(C(n.value.find(H=>H.fileName===r.fileName)?"mdi-check-circle-outline":"mdi-radiobox-blank"),1)]),_:2},1024)],10,ei)):R("",!0)]),c("div",ti,[d(Ce,{"open-delay":"500",activator:"parent",location:"top"},{default:v(()=>[w(C(r.isProcessed?"Processed video":"Unprocessed video"),1)]),_:2},1024),w(" "+C(Te(r.fileName)??"Cockpit webm")+" ",1),d(Y,{size:"10",class:oe(["ml-1 mt-[3px]",r.isProcessed?"text-green-500":"text-red-500"])},{default:v(()=>[w(" mdi-circle ")]),_:2},1032,["class"])])]))),128))]),p.value.length>1?(y(),N("div",si,[c("div",null,[d(Oe,{variant:"text",size:"small",class:"mt-[5px]",onClick:ht},{default:v(()=>[d(Ce,{"open-delay":"500",activator:"parent",location:"bottom"},{default:v(()=>[w(" Select "+C(T.value?"single":"multiple")+" files ",1)]),_:1}),w(" "+C(T.value?"Single":"Multi"),1)]),_:1})]),c("div",null,[d(Oe,{variant:"text",size:"small",class:"mt-[5px]",onClick:h[3]||(h[3]=r=>n.value.length===p.value.length?Ne():Re())},{default:v(()=>[d(Ce,{"open-delay":"500",activator:"parent",location:"bottom"},{default:v(()=>[w(" Select "+C(n.value.length===p.value.length?"none":"all files"),1)]),_:1}),w(" "+C(n.value.length===p.value.length?"None":"All"),1)]),_:1})]),c("div",null,[d(Oe,{variant:"text",size:"small",class:"mt-[5px]",onClick:h[4]||(h[4]=r=>n.value.every(H=>!H.isProcessed)?fe():Ue())},{default:v(()=>[d(Ce,{"open-delay":"500",activator:"parent",location:"bottom"},{default:v(()=>[w(C(n.value.every(r=>!r.isProcessed)?"Select all processed videos":"Select all unprocessed videos"),1)]),_:1}),w(" "+C(n.value.every(r=>!r.isProcessed)?"Select Process.":"select Unproc."),1)]),_:1})])])):R("",!0)])):R("",!0),d(We,{vertical:"",class:"h-[92%] mt-4 opacity-[0.1]"}),p.value.length>0?(y(),N("div",ai,[c("div",null,[!T.value&&n.value.length===1&&!T.value&&!te.value?(y(),N("video",{key:0,id:"video-player",ref_key:"videoPlayerRef",ref:k,width:"660px",controls:!!n.value[0].isProcessed,preload:n.value[0].isProcessed?"auto":"none",poster:((b=n.value[0])==null?void 0:b.thumbnail)||void 0,class:"border-[14px] border-white border-opacity-10 rounded-lg min-h-[382px] aspect-video"},[c("source",{src:((L=n.value[0])==null?void 0:L.url)||void 0,type:"video/webm"},null,8,oi)],8,ii)):R("",!0),!te.value&&n.value.length===1&&!n.value[0].isProcessed&&!T.value&&!ae.value?(y(),de(Oe,{key:1,variant:se.value?"text":"outlined",color:"white",size:"large",disabled:se.value,class:"process-button",onClick:Q},{default:v(()=>[w(C(se.value?"Processing...":"Process video"),1)]),_:1},8,["variant","disabled"])):R("",!0),c("div",ni,[se.value&&!le.value?(y(),de(rt,{key:0,"model-value":ae.value?100:B.value,color:ae.value?"red":"green",height:"8",striped:""},null,8,["model-value","color"])):R("",!0),c("div",li,[!te.value&&n.value.length===1&&se.value&&ae.value?(y(),N("button",{key:0,class:"bg-red text-[#ffffffaa] flex flex-col justify-center align-center w-[20px] h-[20px] rounded-full mt-[40px] ml-[-25px]",onClick:h[7]||(h[7]=r=>ce.value=!ce.value)},[d(Y,{class:"text-[18px]"},{default:v(()=>[w("mdi-alert-circle-outline")]),_:1}),d(Ce,{modelValue:ce.value,"onUpdate:modelValue":h[5]||(h[5]=r=>ce.value=r),"open-on-hover":!1,activator:"parent",location:"bottom",arrow:"","content-class":"border-[#ffffff55] border-2","onClick:outside":h[6]||(h[6]=r=>ce.value=!1)},{default:v(()=>[c("div",ri,[c("div",null,C(A.value),1)])]),_:1},8,["modelValue"])])):R("",!0)])])]),p.value.length>0&&n.value.length>=1&&T.value?(y(),N("div",ci,[c("div",ui,[(y(!0),N(Ae,null,Ze(n.value,r=>(y(),de(qt,{key:r.fileName,class:"video-card"},{default:v(()=>[c("div",null,[d(Gt,null,{default:v(()=>[c("div",di,C(Te(r.fileName)),1)]),_:2},1024),c("div",fi,[d(Y,{size:"10",class:oe(r.isProcessed?"text-green-500":"text-red-500")},{default:v(()=>[w(" mdi-circle ")]),_:2},1032,["class"])])])]),_:2},1024))),128))]),d(We,{class:"mb-[-10px] opacity-[0.1] mx-3"})])):R("",!0),p.value.length>0?(y(),N("div",vi,[c("div",hi,[c("div",mi,C(T.value?`Files selected: ${n.value.length}`:vt((ve=n.value[0])==null?void 0:ve.fileName)),1),T.value?(y(),N("div",pi,[n.value.every(r=>!r.isProcessed)?(y(),N("div",gi,[c("button",{onClick:Me},"Process selected videos")])):R("",!0)])):R("",!0)]),c("div",yi,[(y(),N(Ae,null,Ze(dt,r=>c("button",{key:r.name,class:"flex flex-col justify-center ml-6 align-center",disabled:!r.enable,onClick:H=>!r.confirmAction&&r.action()},[c("div",{class:oe([[r.enable?"frosted-button":"frosted-button-disabled",!r.confirmAction&&"p-2"],"flex flex-col justify-center mb-1 rounded-full frosted-button align-center button"])},[r.tooltip?(y(),de(Ce,{key:0,"open-delay":"500",activator:"parent",location:"bottom"},{default:v(()=>[w(C(r.tooltip),1)]),_:2},1024)):R("",!0),r.confirmAction?(y(),de(Ks,{key:1,location:"left center",opacity:"0",transition:"slide-x-reverse-transition"},{activator:v(({props:H,isActive:Z})=>[c("div",Je({class:"flex items-center justify-center w-full h-full"},H,Qs(Z,!0)),[d(Y,{size:r.size,class:oe([{"rotate-[-45deg]":Z,"outline outline-6 outline-[#ffffff55]":Z},"rounded-full border-[transparent]"]),style:ea({borderWidth:`${r.size-4}px`})},{default:v(()=>[w(C(Z?"mdi-arrow-up":r.icon),1)]),_:2},1032,["size","class","style"])],16)]),default:v(()=>[d(ta,{class:"bg-transparent",elevation:"0"},{default:v(()=>[d(sa,null,{append:v(()=>[c("div",xi,[d(Oe,{fab:"",small:"",width:"28",height:"28",color:"red",icon:"mdi-close",class:"text-sm outline outline-3 outline-[#ffffff44] hover:outline-[#ffffff77]"},{default:v(()=>[d(Ce,{"open-delay":"600",activator:"parent",location:"bottom"},{default:v(()=>[w(" Cancel ")]),_:1}),d(Y,null,{default:v(()=>[w("mdi-close")]),_:1})]),_:1}),Ti,d(Oe,{fab:"",small:"",width:"28",height:"28",color:"green",icon:"mdi-check",class:"ml-4 text-sm outline outline-3 outline-[#ffffff44] hover:outline-[#ffffff77]",loading:He.value,onClick:H=>r.action()},{default:v(()=>[d(Ce,{"open-delay":"600",activator:"parent",location:"bottom"},{default:v(()=>[w(" Confirm ")]),_:1}),d(Y,null,{default:v(()=>[w("mdi-check")]),_:1})]),_:2},1032,["loading","onClick"])])]),_:2},1024)]),_:2},1024)]),_:2},1024)):(y(),N("div",bi,[d(Y,{size:r.size},{default:v(()=>[w(C(r.icon),1)]),_:2},1032,["size"])]))],2)],8,_i)),64))])])):R("",!0)])):R("",!0),p.value.length===0?(y(),N("div",wi,C(te.value?"Loading":"No videos on storage"),1)):R("",!0)],64)):R("",!0)])])]}),_:1},8,["modelValue"]),d(Da,{"open-snackbar":D.value,message:A.value,duration:3e3,"close-button":!1,"onUpdate:openSnackbar":h[9]||(h[9]=b=>D.value=b)},null,8,["open-snackbar","message"]),d(Xt,{"show-dialog":F.value,title:ue.value,actions:ne.value,"max-width":600},{content:v(()=>[Ei]),_:1},8,["show-dialog","title","actions"]),d(Xt,{"show-dialog":le.value,title:S.value,actions:E.value,"max-width":600},{content:v(()=>[ae.value?R("",!0):(y(),N("div",Pi,[c("div",Si,[j.value.length>0?(y(),N("div",Ci,[c("div",Ni," File "+C(j.value.length)+" of "+C(xe.value)+": "+C(j.value[j.value.length-1].message),1),c("div",Ii,[c("div",ki,C(j.value[j.value.length-1].fileName),1),c("div",Vi,[d(aa,{width:"1",size:"10",indeterminate:"",class:"mr-1 mb-[2px]"}),w(" "+C(`${j.value[j.value.length-1].progress}%`),1)])]),d(rt,{"model-value":j.value[j.value.length-1].progress,color:"white",height:"6",rounded:"",striped:""},null,8,["model-value"])])):R("",!0),c("div",null,[c("div",Ai,[Oi,c("div",Di,C(`${Math.ceil(B.value)}%`),1)]),d(rt,{"model-value":Math.ceil(B.value),color:"blue",height:"6",rounded:"",striped:""},null,8,["model-value"])])])])),ae.value?(y(),N("div",Mi,[c("div",Ri,C(`Error processing video file: ${j.value[j.value.length-1].fileName}`),1)])):R("",!0)]),_:1},8,["show-dialog","title","actions"])],64))}}),Li=It(Ui,[["__scopeId","data-v-bc52222c"]]),Fi=Zt({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:ia,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...oa(),...Jt({location:"top end"}),...Kt(),...na(),...Qt(),...la({transition:"scale-rotate-transition"})},"VBadge"),Bi=es()({name:"VBadge",inheritAttrs:!1,props:Fi(),setup(l,g){const{backgroundColorClasses:f,backgroundColorStyles:O}=ra(Yt(l,"color")),{roundedClasses:_}=ss(l),{t:x}=ca(),{textColorClasses:p,textColorStyles:W}=ua(Yt(l,"textColor")),{themeClasses:I}=da(),{locationStyles:n}=ts(l,!0,k=>(l.floating?l.dot?2:4:l.dot?8:12)+(["top","bottom"].includes(k)?+(l.offsetY??0):["left","right"].includes(k)?+(l.offsetX??0):0));return is(()=>{const k=Number(l.content),V=!l.max||isNaN(k)?l.content:k<=+l.max?k:`${l.max}+`,[D,A]=fa(g.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return d(l.tag,Je({class:["v-badge",{"v-badge--bordered":l.bordered,"v-badge--dot":l.dot,"v-badge--floating":l.floating,"v-badge--inline":l.inline},l.class]},A,{style:l.style}),{default:()=>{var T,M;return[d("div",{class:"v-badge__wrapper"},[(M=(T=g.slots).default)==null?void 0:M.call(T),d(va,{transition:l.transition},{default:()=>{var re,q;return[ha(d("span",Je({class:["v-badge__badge",I.value,f.value,_.value,p.value],style:[O.value,W.value,l.inline?{}:n.value],"aria-atomic":"true","aria-label":x(l.label,k),"aria-live":"polite",role:"status"},D),[l.dot?void 0:g.slots.badge?(q=(re=g.slots).badge)==null?void 0:q.call(re):l.icon?d(Y,{icon:l.icon},null):V]),[[ma,l.modelValue]])]}})])]}})}),{}}}),ut=l=>(rs("data-v-4466e468"),l=l(),cs(),l),zi={key:1},Wi={class:"text-xs text-white select-none scroll-text"},ji={key:3,class:"w-16 text-justify text-slate-100"},Hi={key:4,class:"w-16 text-justify text-slate-100"},Yi=ut(()=>c("div",{class:"text-xs text-center text-white select-none flex-nowrap"},"Processing video...",-1)),$i=[Yi],Xi={key:5,class:"flex justify-center w-8"},qi={class:"p-6 m-5 bg-white rounded-md"},Gi=ut(()=>c("p",{class:"text-xl font-semibold"},"Choose a stream to record",-1)),Zi=ut(()=>c("div",{class:"w-auto h-px my-2 bg-grey-lighten-3"},null,-1)),Ji={class:"flex items-center"},Ki=ut(()=>c("span",null,"Record",-1)),Qi={key:1,class:"w-5 h-5 ml-2 rounded-full bg-red"},eo=ct({__name:"MiniVideoRecorder",props:{miniWidget:{}},setup(l){const g=pa(),f=ns(),_=ga(l).miniWidget,x=m(),{namesAvailableStreams:p}=ya(f),W=m(),{isOutside:I}=_a(W),n=m(!1),k=m(!1),V=m(!1),D=xa({interval:100}),A=m(),T=m(!1),M=m(0);kt(async()=>{await q()}),Ta(async()=>{Object.keys(_.value.options).length===0&&(_.value.options={streamName:void 0}),x.value=_.value.options.streamName}),K(x,()=>{_.value.options.streamName=x.value,A.value=void 0});const re=S=>{k.value=S},q=async()=>{let S=0;await f.videoStoringDB.iterate((E,G)=>{G.endsWith(".webm")&&S++}),Object.values(f.keysFailedUnprocessedVideos).forEach(()=>S++),M.value=S};function U(S){if(x.value=S,x.value===void 0){ze.fire({text:"No stream selected.",icon:"error"});return}if(p.value.includes(x.value))return;const E="The selected stream is not available. Please check its source or select another stream.";throw ze.fire({text:E,icon:"error"}),new Error(E)}const ce=async()=>{if(F.value){x.value!==void 0&&f.stopRecording(x.value);return}if(x.value===void 0){n.value=!0;return}te()},te=()=>{var S;if(x.value&&!((S=f.getStreamData(x.value))!=null&&S.connected)){ze.fire({title:"Cannot start recording.",text:"Stream is not connected.",icon:"error"});return}U(x.value),f.startRecording(x.value),n.value=!1},F=$t(()=>x.value===void 0?!1:f.isRecording(x.value)),ue=$t(()=>{var xe,se,pe,ae;if(x.value===void 0)return"00:00:00";const S=(xe=f.getStreamData(x.value))==null?void 0:xe.timeRecordingStart;if(S===void 0)return"00:00:00";const E=ba({start:S,end:D.value}),G=((se=E.hours)==null?void 0:se.toFixed(0).length)===1?`0${E.hours}`:E.hours,B=((pe=E.minutes)==null?void 0:pe.toFixed(0).length)===1?`0${E.minutes}`:E.minutes,j=((ae=E.seconds)==null?void 0:ae.toFixed(0).length)===1?`0${E.seconds}`:E.seconds;return`${G}:${B}:${j}`}),ne=async S=>{U(S),A.value=void 0,V.value=!0;let E=0;const G=100,B=3e3;for(;V.value&&E<B;)V.value=A.value===void 0||!A.value.active,await new Promise(j=>setTimeout(j,G)),E+=G;if(V.value){ze.fire({text:"Could not load media stream.",icon:"error"});return}_.value.options.streamName=S};let le;return g.isRealMiniWidget(_.value)&&(le=setInterval(()=>{_.value.options.streamName===void 0&&!p.value.isEmpty()&&(_.value.options.streamName=p.value[0],x.value=_.value.options.streamName,p.value.length>1&&ze.fire({title:"Multiple streams detected",text:`You have multiple streams available, so we chose one randomly to start with.
          If you want to change it, please open the widget configuration.`,icon:"info",confirmButtonText:"OK"}));const S=f.getMediaStream(_.value.options.streamName);wa(S,A.value)||(A.value=S)},1e3)),ls(()=>clearInterval(le)),K(()=>f.areThereVideosProcessing,S=>{T.value=S,q()}),K(()=>f.keysFailedUnprocessedVideos,()=>q()),K(()=>k.value,async S=>{S===!1&&await q()}),K(F,()=>{if(!F.value){window.onbeforeunload=null;return}window.onbeforeunload=()=>(ze.fire({text:`
      You have a video recording ongoing.
      Remember to stop it before closing Cockpit, or the record will be lost.
    `,icon:"warning"}),"I hope the user does not click on the leave button.")}),(S,E)=>{const G=Ea("FontAwesomeIcon");return y(),N(Ae,null,[c("div",{ref_key:"recorderWidget",ref:W,class:oe(["flex justify-around px-2 py-1 text-center rounded-lg h-9 align-center bg-slate-800/60",{"w-48":M.value>0,"w-32":M.value<=0}])},[T.value?(y(),N("div",zi,[d(Y,{class:"w-6 h-6 animate-spin",color:"white"},{default:v(()=>[w("mdi-loading")]),_:1})])):(y(),N("div",{key:0,class:oe([{"blob red w-5 opacity-100 rounded-sm":F.value,"opacity-30 bg-red-400":St(I)&&!F.value},"w-6 transition-all duration-500 rounded-full aspect-square bg-red-lighten-1 hover:cursor-pointer opacity-70 hover:opacity-90"]),onClick:E[0]||(E[0]=B=>ce())},null,2)),!F.value&&!T.value?(y(),N(Ae,{key:2},[x.value?(y(),N("div",{key:0,class:"flex flex-col max-w-[50%] scroll-container transition-all border-blur cursor-pointer",onClick:E[1]||(E[1]=B=>n.value=!0)},[c("div",Wi,C(x.value),1)])):(y(),de(G,{key:1,icon:"fa-solid fa-video",class:"h-6 text-slate-100"}))],64)):R("",!0),F.value&&!T.value?(y(),N("div",ji,C(ue.value),1)):T.value?(y(),N("div",Hi,$i)):R("",!0),M.value>0?(y(),N("div",Xi,[d(We,{vertical:"",class:"h-6"}),d(Bi,{color:"info",content:M.value,dot:St(I)||k.value,class:"cursor-pointer",onClick:E[3]||(E[3]=B=>k.value=!0)},{default:v(()=>[d(Y,{class:"w-6 h-6 ml-3 text-slate-100",onClick:E[2]||(E[2]=B=>k.value=!0)},{default:v(()=>[w(" mdi-video-box ")]),_:1})]),_:1},8,["content","dot"])])):R("",!0)],2),d(Nt,{modelValue:n.value,"onUpdate:modelValue":E[5]||(E[5]=B=>n.value=B),width:"auto"},{default:v(()=>[c("div",qi,[Gi,Zi,d(Pa,{"model-value":x.value,label:"Stream name",items:St(p),"item-title":"name",density:"compact",variant:"outlined","no-data-text":"No streams available.","hide-details":"","return-object":"","onUpdate:modelValue":ne},null,8,["model-value","items"]),c("div",Ji,[c("button",{class:"w-auto p-3 m-2 font-medium transition-all rounded-md shadow-md text-uppercase hover:bg-slate-100",onClick:E[4]||(E[4]=B=>n.value=!1)}," Cancel "),c("button",{class:oe(["flex items-center p-3 mx-2 font-medium transition-all rounded-md shadow-md w-fit text-uppercase hover:bg-slate-100",{"bg-slate-200 opacity-30 pointer-events-none":V.value}]),onClick:te},[Ki,V.value?(y(),de(Y,{key:0,class:"m-2 animate-spin"},{default:v(()=>[w("mdi-loading")]),_:1})):(y(),N("div",Qi))],2)])])]),_:1},8,["modelValue"]),d(Li,{"open-modal":k.value,"onUpdate:openModal":re},null,8,["open-modal"])],64)}}}),so=It(eo,[["__scopeId","data-v-4466e468"]]);export{so as default};
