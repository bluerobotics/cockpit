import{z as qt,A as Gt,B as Ns,C as Zt,F as ks,G as Jt,H as Vs,I as As,J as Kt,K as Os,L as Qt,M as Ds,N as Ms,O as Rs,P as Us,Q as es,p as g,R as ts,q as Z,x as kt,S as Ls,T as ss,V as jt,h as d,U as Fs,W as dt,X as Bs,Y as et,Z as zs,_ as Ys,$ as as,d as Vt,o as y,i as ke,a0 as Hs,a1 as m,a2 as ze,a3 as W,a4 as w,t as N,a5 as is,a6 as Ws,k as Nt,a7 as os,c as C,a as u,a8 as Ae,a9 as ut,aa as be,j as B,n as pe,ab as Qe,ac as js,ad as Xs,ae as $s,af as qs,ag as Gs,ah as Zs,ai as Js,aj as ns,ak as Xt,al as Ks,am as ls,an as rs,ao as cs,ap as Qs,aq as ea,ar as ta,as as sa,at as aa,au as $t,av as ia,aw as oa,ax as na,ay as la,az as ra,w as ca,aA as ua,aB as da,aC as fa,aD as va,aE as ha,aF as ma,aG as pa,aH as ga,aI as Xe,aJ as ya,r as _a,b as Ct,aK as Ta}from"./index-DV8BQZ2w.js";var us={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(r){(function(S,v,O,p){var P=["","webkit","Moz","MS","ms","o"],M=v.createElement("div"),_="function",A=Math.round,I=Math.abs,o=Date.now;function j(e,t,s){return setTimeout(ue(e,s),t)}function z(e,t,s){return Array.isArray(e)?(k(e,s[t],s),!0):!1}function k(e,t,s){var a;if(e)if(e.forEach)e.forEach(t,s);else if(e.length!==p)for(a=0;a<e.length;)t.call(s,e[a],a,e),a++;else for(a in e)e.hasOwnProperty(a)&&t.call(s,e[a],a,e)}function R(e,t,s){var a="DEPRECATED METHOD: "+t+`
`+s+` AT 
`;return function(){var i=new Error("get-stack-trace"),c=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",E=S.console&&(S.console.warn||S.console.log);return E&&E.call(S.console,a,c),e.apply(this,arguments)}}var h;typeof Object.assign!="function"?h=function(t){if(t===p||t===null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(t),a=1;a<arguments.length;a++){var i=arguments[a];if(i!==p&&i!==null)for(var c in i)i.hasOwnProperty(c)&&(s[c]=i[c])}return s}:h=Object.assign;var ce=R(function(t,s,a){for(var i=Object.keys(s),c=0;c<i.length;)(!a||a&&t[i[c]]===p)&&(t[i[c]]=s[i[c]]),c++;return t},"extend","Use `assign`."),ee=R(function(t,s){return ce(t,s,!0)},"merge","Use `assign`.");function Y(e,t,s){var a=t.prototype,i;i=e.prototype=Object.create(a),i.constructor=e,i._super=a,s&&h(i,s)}function ue(e,t){return function(){return e.apply(t,arguments)}}function ie(e,t){return typeof e==_?e.apply(t&&t[0]||p,t):e}function D(e,t){return e===p?t:e}function te(e,t,s){k(T(t),function(a){e.addEventListener(a,s,!1)})}function oe(e,t,s){k(T(t),function(a){e.removeEventListener(a,s,!1)})}function ge(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function x(e,t){return e.indexOf(t)>-1}function T(e){return e.trim().split(/\s+/g)}function X(e,t,s){if(e.indexOf&&!s)return e.indexOf(t);for(var a=0;a<e.length;){if(s&&e[a][s]==t||!s&&e[a]===t)return a;a++}return-1}function $(e){return Array.prototype.slice.call(e,0)}function de(e,t,s){for(var a=[],i=[],c=0;c<e.length;){var E=t?e[c][t]:e[c];X(i,E)<0&&a.push(e[c]),i[c]=E,c++}return s&&(t?a=a.sort(function(Q,ae){return Q[t]>ae[t]}):a=a.sort()),a}function H(e,t){for(var s,a,i=t[0].toUpperCase()+t.slice(1),c=0;c<P.length;){if(s=P[c],a=s?s+i:t,a in e)return a;c++}return p}var Oe=1;function q(){return Oe++}function fe(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||S}var ve=/mobile|tablet|ip(ad|hone|od)|android/i,Ye="ontouchstart"in S,vt=H(S,"PointerEvent")!==p,ht=Ye&&ve.test(navigator.userAgent),De="touch",He="pen",$e="mouse",mt="kinect",pt=25,J=1,ye=2,U=4,se=8,Me=1,Re=2,Ue=4,Le=8,Ee=16,he=Re|Ue,we=Le|Ee,qe=he|we,st=["x","y"],We=["clientX","clientY"];function ne(e,t){var s=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(a){ie(e.options.enable,[e])&&s.handler(a)},this.init()}ne.prototype={handler:function(){},init:function(){this.evEl&&te(this.element,this.evEl,this.domHandler),this.evTarget&&te(this.target,this.evTarget,this.domHandler),this.evWin&&te(fe(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&oe(this.element,this.evEl,this.domHandler),this.evTarget&&oe(this.target,this.evTarget,this.domHandler),this.evWin&&oe(fe(this.element),this.evWin,this.domHandler)}};function Fe(e){var t,s=e.options.inputClass;return s?t=s:vt?t=yt:ht?t=it:Ye?t=_t:t=at,new t(e,l)}function l(e,t,s){var a=s.pointers.length,i=s.changedPointers.length,c=t&J&&a-i===0,E=t&(U|se)&&a-i===0;s.isFirst=!!c,s.isFinal=!!E,c&&(e.session={}),s.eventType=t,f(e,s),e.emit("hammer.input",s),e.recognize(s),e.session.prevInput=s}function f(e,t){var s=e.session,a=t.pointers,i=a.length;s.firstInput||(s.firstInput=L(t)),i>1&&!s.firstMultiple?s.firstMultiple=L(t):i===1&&(s.firstMultiple=!1);var c=s.firstInput,E=s.firstMultiple,G=E?E.center:c.center,Q=t.center=n(a);t.timeStamp=o(),t.deltaTime=t.timeStamp-c.timeStamp,t.angle=re(G,Q),t.distance=le(G,Q),b(s,t),t.offsetDirection=K(t.deltaX,t.deltaY);var ae=F(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=ae.x,t.overallVelocityY=ae.y,t.overallVelocity=I(ae.x)>I(ae.y)?ae.x:ae.y,t.scale=E?Se(E.pointers,a):1,t.rotation=E?Pe(E.pointers,a):0,t.maxPointers=s.prevInput?t.pointers.length>s.prevInput.maxPointers?t.pointers.length:s.prevInput.maxPointers:t.pointers.length,V(s,t);var xe=e.element;ge(t.srcEvent.target,xe)&&(xe=t.srcEvent.target),t.target=xe}function b(e,t){var s=t.center,a=e.offsetDelta||{},i=e.prevDelta||{},c=e.prevInput||{};(t.eventType===J||c.eventType===U)&&(i=e.prevDelta={x:c.deltaX||0,y:c.deltaY||0},a=e.offsetDelta={x:s.x,y:s.y}),t.deltaX=i.x+(s.x-a.x),t.deltaY=i.y+(s.y-a.y)}function V(e,t){var s=e.lastInterval||t,a=t.timeStamp-s.timeStamp,i,c,E,G;if(t.eventType!=se&&(a>pt||s.velocity===p)){var Q=t.deltaX-s.deltaX,ae=t.deltaY-s.deltaY,xe=F(a,Q,ae);c=xe.x,E=xe.y,i=I(xe.x)>I(xe.y)?xe.x:xe.y,G=K(Q,ae),e.lastInterval=t}else i=s.velocity,c=s.velocityX,E=s.velocityY,G=s.direction;t.velocity=i,t.velocityX=c,t.velocityY=E,t.direction=G}function L(e){for(var t=[],s=0;s<e.pointers.length;)t[s]={clientX:A(e.pointers[s].clientX),clientY:A(e.pointers[s].clientY)},s++;return{timeStamp:o(),pointers:t,center:n(t),deltaX:e.deltaX,deltaY:e.deltaY}}function n(e){var t=e.length;if(t===1)return{x:A(e[0].clientX),y:A(e[0].clientY)};for(var s=0,a=0,i=0;i<t;)s+=e[i].clientX,a+=e[i].clientY,i++;return{x:A(s/t),y:A(a/t)}}function F(e,t,s){return{x:t/e||0,y:s/e||0}}function K(e,t){return e===t?Me:I(e)>=I(t)?e<0?Re:Ue:t<0?Le:Ee}function le(e,t,s){s||(s=st);var a=t[s[0]]-e[s[0]],i=t[s[1]]-e[s[1]];return Math.sqrt(a*a+i*i)}function re(e,t,s){s||(s=st);var a=t[s[0]]-e[s[0]],i=t[s[1]]-e[s[1]];return Math.atan2(i,a)*180/Math.PI}function Pe(e,t){return re(t[1],t[0],We)+re(e[1],e[0],We)}function Se(e,t){return le(t[0],t[1],We)/le(e[0],e[1],We)}var Ge={mousedown:J,mousemove:ye,mouseup:U},gt="mousedown",ds="mousemove mouseup";function at(){this.evEl=gt,this.evWin=ds,this.pressed=!1,ne.apply(this,arguments)}Y(at,ne,{handler:function(t){var s=Ge[t.type];s&J&&t.button===0&&(this.pressed=!0),s&ye&&t.which!==1&&(s=U),this.pressed&&(s&U&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[t],changedPointers:[t],pointerType:$e,srcEvent:t}))}});var fs={pointerdown:J,pointermove:ye,pointerup:U,pointercancel:se,pointerout:se},vs={2:De,3:He,4:$e,5:mt},At="pointerdown",Ot="pointermove pointerup pointercancel";S.MSPointerEvent&&!S.PointerEvent&&(At="MSPointerDown",Ot="MSPointerMove MSPointerUp MSPointerCancel");function yt(){this.evEl=At,this.evWin=Ot,ne.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}Y(yt,ne,{handler:function(t){var s=this.store,a=!1,i=t.type.toLowerCase().replace("ms",""),c=fs[i],E=vs[t.pointerType]||t.pointerType,G=E==De,Q=X(s,t.pointerId,"pointerId");c&J&&(t.button===0||G)?Q<0&&(s.push(t),Q=s.length-1):c&(U|se)&&(a=!0),!(Q<0)&&(s[Q]=t,this.callback(this.manager,c,{pointers:s,changedPointers:[t],pointerType:E,srcEvent:t}),a&&s.splice(Q,1))}});var hs={touchstart:J,touchmove:ye,touchend:U,touchcancel:se},ms="touchstart",ps="touchstart touchmove touchend touchcancel";function Dt(){this.evTarget=ms,this.evWin=ps,this.started=!1,ne.apply(this,arguments)}Y(Dt,ne,{handler:function(t){var s=hs[t.type];if(s===J&&(this.started=!0),!!this.started){var a=gs.call(this,t,s);s&(U|se)&&a[0].length-a[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:a[0],changedPointers:a[1],pointerType:De,srcEvent:t})}}});function gs(e,t){var s=$(e.touches),a=$(e.changedTouches);return t&(U|se)&&(s=de(s.concat(a),"identifier",!0)),[s,a]}var ys={touchstart:J,touchmove:ye,touchend:U,touchcancel:se},_s="touchstart touchmove touchend touchcancel";function it(){this.evTarget=_s,this.targetIds={},ne.apply(this,arguments)}Y(it,ne,{handler:function(t){var s=ys[t.type],a=Ts.call(this,t,s);a&&this.callback(this.manager,s,{pointers:a[0],changedPointers:a[1],pointerType:De,srcEvent:t})}});function Ts(e,t){var s=$(e.touches),a=this.targetIds;if(t&(J|ye)&&s.length===1)return a[s[0].identifier]=!0,[s,s];var i,c,E=$(e.changedTouches),G=[],Q=this.target;if(c=s.filter(function(ae){return ge(ae.target,Q)}),t===J)for(i=0;i<c.length;)a[c[i].identifier]=!0,i++;for(i=0;i<E.length;)a[E[i].identifier]&&G.push(E[i]),t&(U|se)&&delete a[E[i].identifier],i++;if(G.length)return[de(c.concat(G),"identifier",!0),G]}var xs=2500,Mt=25;function _t(){ne.apply(this,arguments);var e=ue(this.handler,this);this.touch=new it(this.manager,e),this.mouse=new at(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}Y(_t,ne,{handler:function(t,s,a){var i=a.pointerType==De,c=a.pointerType==$e;if(!(c&&a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents)){if(i)bs.call(this,s,a);else if(c&&Es.call(this,a))return;this.callback(t,s,a)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function bs(e,t){e&J?(this.primaryTouch=t.changedPointers[0].identifier,Rt.call(this,t)):e&(U|se)&&Rt.call(this,t)}function Rt(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var s={x:t.clientX,y:t.clientY};this.lastTouches.push(s);var a=this.lastTouches,i=function(){var c=a.indexOf(s);c>-1&&a.splice(c,1)};setTimeout(i,xs)}}function Es(e){for(var t=e.srcEvent.clientX,s=e.srcEvent.clientY,a=0;a<this.lastTouches.length;a++){var i=this.lastTouches[a],c=Math.abs(t-i.x),E=Math.abs(s-i.y);if(c<=Mt&&E<=Mt)return!0}return!1}var Ut=H(M.style,"touchAction"),Lt=Ut!==p,Ft="compute",Bt="auto",Tt="manipulation",Be="none",Ze="pan-x",Je="pan-y",ot=Ps();function xt(e,t){this.manager=e,this.set(t)}xt.prototype={set:function(e){e==Ft&&(e=this.compute()),Lt&&this.manager.element.style&&ot[e]&&(this.manager.element.style[Ut]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return k(this.manager.recognizers,function(t){ie(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),ws(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,s=e.offsetDirection;if(this.manager.session.prevented){t.preventDefault();return}var a=this.actions,i=x(a,Be)&&!ot[Be],c=x(a,Je)&&!ot[Je],E=x(a,Ze)&&!ot[Ze];if(i){var G=e.pointers.length===1,Q=e.distance<2,ae=e.deltaTime<250;if(G&&Q&&ae)return}if(!(E&&c)&&(i||c&&s&he||E&&s&we))return this.preventSrc(t)},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};function ws(e){if(x(e,Be))return Be;var t=x(e,Ze),s=x(e,Je);return t&&s?Be:t||s?t?Ze:Je:x(e,Tt)?Tt:Bt}function Ps(){if(!Lt)return!1;var e={},t=S.CSS&&S.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(s){e[s]=t?S.CSS.supports("touch-action",s):!0}),e}var nt=1,me=2,je=4,Ve=8,Ce=Ve,Ke=16,Te=32;function Ie(e){this.options=h({},this.defaults,e||{}),this.id=q(),this.manager=null,this.options.enable=D(this.options.enable,!0),this.state=nt,this.simultaneous={},this.requireFail=[]}Ie.prototype={defaults:{},set:function(e){return h(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(z(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=lt(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return z(e,"dropRecognizeWith",this)?this:(e=lt(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(z(e,"requireFailure",this))return this;var t=this.requireFail;return e=lt(e,this),X(t,e)===-1&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(z(e,"dropRequireFailure",this))return this;e=lt(e,this);var t=X(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,s=this.state;function a(i){t.manager.emit(i,e)}s<Ve&&a(t.options.event+zt(s)),a(t.options.event),e.additionalEvent&&a(e.additionalEvent),s>=Ve&&a(t.options.event+zt(s))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=Te},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(Te|nt)))return!1;e++}return!0},recognize:function(e){var t=h({},e);if(!ie(this.options.enable,[this,t])){this.reset(),this.state=Te;return}this.state&(Ce|Ke|Te)&&(this.state=nt),this.state=this.process(t),this.state&(me|je|Ve|Ke)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}};function zt(e){return e&Ke?"cancel":e&Ve?"end":e&je?"move":e&me?"start":""}function Yt(e){return e==Ee?"down":e==Le?"up":e==Re?"left":e==Ue?"right":""}function lt(e,t){var s=t.manager;return s?s.get(e):e}function _e(){Ie.apply(this,arguments)}Y(_e,Ie,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return t===0||e.pointers.length===t},process:function(e){var t=this.state,s=e.eventType,a=t&(me|je),i=this.attrTest(e);return a&&(s&se||!i)?t|Ke:a||i?s&U?t|Ve:t&me?t|je:me:Te}});function rt(){_e.apply(this,arguments),this.pX=null,this.pY=null}Y(rt,_e,{defaults:{event:"pan",threshold:10,pointers:1,direction:qe},getTouchAction:function(){var e=this.options.direction,t=[];return e&he&&t.push(Je),e&we&&t.push(Ze),t},directionTest:function(e){var t=this.options,s=!0,a=e.distance,i=e.direction,c=e.deltaX,E=e.deltaY;return i&t.direction||(t.direction&he?(i=c===0?Me:c<0?Re:Ue,s=c!=this.pX,a=Math.abs(e.deltaX)):(i=E===0?Me:E<0?Le:Ee,s=E!=this.pY,a=Math.abs(e.deltaY))),e.direction=i,s&&a>t.threshold&&i&t.direction},attrTest:function(e){return _e.prototype.attrTest.call(this,e)&&(this.state&me||!(this.state&me)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Yt(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}});function bt(){_e.apply(this,arguments)}Y(bt,_e,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Be]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&me)},emit:function(e){if(e.scale!==1){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}});function Et(){Ie.apply(this,arguments),this._timer=null,this._input=null}Y(Et,Ie,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Bt]},process:function(e){var t=this.options,s=e.pointers.length===t.pointers,a=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!a||!s||e.eventType&(U|se)&&!i)this.reset();else if(e.eventType&J)this.reset(),this._timer=j(function(){this.state=Ce,this.tryEmit()},t.time,this);else if(e.eventType&U)return Ce;return Te},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===Ce&&(e&&e.eventType&U?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=o(),this.manager.emit(this.options.event,this._input)))}});function wt(){_e.apply(this,arguments)}Y(wt,_e,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Be]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&me)}});function Pt(){_e.apply(this,arguments)}Y(Pt,_e,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:he|we,pointers:1},getTouchAction:function(){return rt.prototype.getTouchAction.call(this)},attrTest:function(e){var t=this.options.direction,s;return t&(he|we)?s=e.overallVelocity:t&he?s=e.overallVelocityX:t&we&&(s=e.overallVelocityY),this._super.attrTest.call(this,e)&&t&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&I(s)>this.options.velocity&&e.eventType&U},emit:function(e){var t=Yt(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}});function ct(){Ie.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}Y(ct,Ie,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Tt]},process:function(e){var t=this.options,s=e.pointers.length===t.pointers,a=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),e.eventType&J&&this.count===0)return this.failTimeout();if(a&&i&&s){if(e.eventType!=U)return this.failTimeout();var c=this.pTime?e.timeStamp-this.pTime<t.interval:!0,E=!this.pCenter||le(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,!E||!c?this.count=1:this.count+=1,this._input=e;var G=this.count%t.taps;if(G===0)return this.hasRequireFailures()?(this._timer=j(function(){this.state=Ce,this.tryEmit()},t.interval,this),me):Ce}return Te},failTimeout:function(){return this._timer=j(function(){this.state=Te},this.options.interval,this),Te},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ce&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Ne(e,t){return t=t||{},t.recognizers=D(t.recognizers,Ne.defaults.preset),new St(e,t)}Ne.VERSION="2.0.7",Ne.defaults={domEvents:!1,touchAction:Ft,enable:!0,inputTarget:null,inputClass:null,preset:[[wt,{enable:!1}],[bt,{enable:!1},["rotate"]],[Pt,{direction:he}],[rt,{direction:he},["swipe"]],[ct],[ct,{event:"doubletap",taps:2},["tap"]],[Et]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Ss=1,Ht=2;function St(e,t){this.options=h({},Ne.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=Fe(this),this.touchAction=new xt(this,this.options.touchAction),Wt(this,!0),k(this.options.recognizers,function(s){var a=this.add(new s[0](s[1]));s[2]&&a.recognizeWith(s[2]),s[3]&&a.requireFailure(s[3])},this)}St.prototype={set:function(e){return h(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?Ht:Ss},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var s,a=this.recognizers,i=t.curRecognizer;(!i||i&&i.state&Ce)&&(i=t.curRecognizer=null);for(var c=0;c<a.length;)s=a[c],t.stopped!==Ht&&(!i||s==i||s.canRecognizeWith(i))?s.recognize(e):s.reset(),!i&&s.state&(me|je|Ve)&&(i=t.curRecognizer=s),c++}},get:function(e){if(e instanceof Ie)return e;for(var t=this.recognizers,s=0;s<t.length;s++)if(t[s].options.event==e)return t[s];return null},add:function(e){if(z(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(z(e,"remove",this))return this;if(e=this.get(e),e){var t=this.recognizers,s=X(t,e);s!==-1&&(t.splice(s,1),this.touchAction.update())}return this},on:function(e,t){if(e!==p&&t!==p){var s=this.handlers;return k(T(e),function(a){s[a]=s[a]||[],s[a].push(t)}),this}},off:function(e,t){if(e!==p){var s=this.handlers;return k(T(e),function(a){t?s[a]&&s[a].splice(X(s[a],t),1):delete s[a]}),this}},emit:function(e,t){this.options.domEvents&&Cs(e,t);var s=this.handlers[e]&&this.handlers[e].slice();if(!(!s||!s.length)){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var a=0;a<s.length;)s[a](t),a++}},destroy:function(){this.element&&Wt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Wt(e,t){var s=e.element;if(s.style){var a;k(e.options.cssProps,function(i,c){a=H(s.style,c),t?(e.oldCssProps[a]=s.style[a],s.style[a]=i):s.style[a]=e.oldCssProps[a]||""}),t||(e.oldCssProps={})}}function Cs(e,t){var s=v.createEvent("Event");s.initEvent(e,!0,!0),s.gesture=t,t.target.dispatchEvent(s)}h(Ne,{INPUT_START:J,INPUT_MOVE:ye,INPUT_END:U,INPUT_CANCEL:se,STATE_POSSIBLE:nt,STATE_BEGAN:me,STATE_CHANGED:je,STATE_ENDED:Ve,STATE_RECOGNIZED:Ce,STATE_CANCELLED:Ke,STATE_FAILED:Te,DIRECTION_NONE:Me,DIRECTION_LEFT:Re,DIRECTION_RIGHT:Ue,DIRECTION_UP:Le,DIRECTION_DOWN:Ee,DIRECTION_HORIZONTAL:he,DIRECTION_VERTICAL:we,DIRECTION_ALL:qe,Manager:St,Input:ne,TouchAction:xt,TouchInput:it,MouseInput:at,PointerEventInput:yt,TouchMouseInput:_t,SingleTouchInput:Dt,Recognizer:Ie,AttrRecognizer:_e,Tap:ct,Pan:rt,Swipe:Pt,Pinch:bt,Rotate:wt,Press:Et,on:te,off:oe,each:k,merge:ee,extend:ce,assign:h,inherit:Y,bindFn:ue,prefixed:H});var Is=typeof S<"u"?S:typeof self<"u"?self:{};Is.Hammer=Ne,typeof p=="function"&&p.amd?p(function(){return Ne}):r.exports?r.exports=Ne:S[O]=Ne})(window,document,"Hammer")})(us);var It=us.exports;function xa(r){const S=ts(r);let v=-1;function O(){clearInterval(v)}function p(){O(),as(()=>S.value=r)}function P(M){const _=M?getComputedStyle(M):{transitionDuration:.2},A=parseFloat(_.transitionDuration)*1e3||200;if(O(),S.value<=0)return;const I=performance.now();v=window.setInterval(()=>{const o=performance.now()-I+A;S.value=Math.max(r-o,0),S.value<=0&&O()},A)}return Ys(O),{clear:O,time:S,start:P,reset:p}}const ba=qt({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...Gt({location:"bottom"}),...Ns(),...Zt(),...ks(),...Jt(),...Vs(As({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),Ea=Kt()({name:"VSnackbar",props:ba(),emits:{"update:modelValue":r=>!0},setup(r,S){let{slots:v}=S;const O=Os(r,"modelValue"),{locationStyles:p}=Qt(r),{positionClasses:P}=Ds(r),{scopeId:M}=Ms(),{themeClasses:_}=Rs(r),{colorClasses:A,colorStyles:I,variantClasses:o}=Us(r),{roundedClasses:j}=es(r),z=xa(Number(r.timeout)),k=g(),R=g(),h=ts(!1);Z(O,ee),Z(()=>r.timeout,ee),kt(()=>{O.value&&ee()});let ce=-1;function ee(){z.reset(),window.clearTimeout(ce);const D=Number(r.timeout);if(!O.value||D===-1)return;const te=Ls(R.value);z.start(te),ce=window.setTimeout(()=>{O.value=!1},D)}function Y(){z.reset(),window.clearTimeout(ce)}function ue(){h.value=!0,Y()}function ie(){h.value=!1,ee()}return ss(()=>{const D=jt.filterProps(r),te=!!(v.default||v.text||r.text);return d(jt,et({ref:k,class:["v-snackbar",{"v-snackbar--active":O.value,"v-snackbar--multi-line":r.multiLine&&!r.vertical,"v-snackbar--timer":!!r.timer,"v-snackbar--vertical":r.vertical},P.value,r.class],style:r.style},D,{modelValue:O.value,"onUpdate:modelValue":oe=>O.value=oe,contentProps:et({class:["v-snackbar__wrapper",_.value,A.value,j.value,o.value],style:[p.value,I.value],onPointerenter:ue,onPointerleave:ie},D.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0},M),{default:()=>{var oe,ge;return[Fs(!1,"v-snackbar"),r.timer&&!h.value&&d("div",{key:"timer",class:"v-snackbar__timer"},[d(dt,{ref:R,color:typeof r.timer=="string"?r.timer:"info",max:r.timeout,"model-value":z.time.value},null)]),te&&d("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((oe=v.text)==null?void 0:oe.call(v))??r.text,(ge=v.default)==null?void 0:ge.call(v)]),v.actions&&d(Bs,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[d("div",{class:"v-snackbar__actions"},[v.actions()])]})]},activator:v.activator})}),zs({},k)}}),wa=Vt({__name:"Snackbar",props:{openSnackbar:Boolean,closeButton:Boolean,message:{type:String,default:""},duration:{type:Number,default:3e3}},emits:["update:openSnackbar"],setup(r,{emit:S}){const v=r,O=S,p=g(v.openSnackbar),P=g(v.message),M=g(v.duration||3e3),_=()=>{p.value=!1,O("update:openSnackbar",!1)};return Z(()=>v.openSnackbar,A=>{p.value=A}),Z(()=>v.message,A=>{P.value=A}),Z(p,A=>{A||O("update:openSnackbar",!1)}),(A,I)=>(y(),ke(Ea,{modelValue:p.value,"onUpdate:modelValue":I[0]||(I[0]=o=>p.value=o),elevation:"4",rounded:"lg",color:"#ffffff40",timeout:M.value,location:"bottom left","content-class":"bg-[#4f4f4f44] backdrop-filter backdrop-blur-lg text-white mb-[50px]",style:{marginBottom:40}},Hs({default:m(()=>[w(N(P.value)+" ",1)]),_:2},[r.closeButton?{name:"actions",fn:m(()=>[d(ze,{color:"white",variant:"text",onClick:_},{default:m(()=>[d(W,null,{default:m(()=>[w("mdi-close")]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["modelValue","timeout"]))}}),tt=r=>(ls("data-v-ba9013fb"),r=r(),rs(),r),Pa={class:"video-modal"},Sa={class:"modal-content"},Ca={class:"flex flex-col justify-between h-full px-5 py-3 align-center"},Ia={class:"flex flex-col justify-between pt-2 align-center gap-y-8"},Na=["disabled","onClick"],ka={class:"flex flex-col justify-center py-2 mb-[10px] align-center"},Va={class:"flex flex-col p-2 gap-y-2"},Aa=tt(()=>u("div",null,[u("strong",null,"Computer:"),w(" Command+click, Ctrl+click or Long click to select multiple videos. ")],-1)),Oa=tt(()=>u("div",null,[u("strong",null,"Mobile:"),w(" Long press to select multiple videos.")],-1)),Da={class:"flex flex-row mt-4 gap-x-10"},Ma={class:"ml-[-8px]"},Ra={class:"frosted-button flex flex-col justify-center align-center w-[28px] h-[28px] rounded-full mb-1"},Ua=tt(()=>u("div",{class:"text-sm"},"Close",-1)),La={key:0,class:"flex flex-col justify-between align-center pt-8 px-2 w-[300px] h-[480px]"},Fa={class:"flex flex-col w-full h-full px-4 overflow-auto align-center"},Ba={class:"relative video-wrapper"},za=["id","poster"],Ya=["src"],Ha=["onClick"],Wa=["onClick"],ja={class:"flex flex-row justify-center w-full ml-1 overflow-hidden text-xs"},Xa={key:0,class:"flex flex-row justify-between align-center h-[45px] w-full mb-[-15px]"},$a={key:1,class:"flex flex-col justify-between mt-5 align-center w-[720px]"},qa=["controls","preload","poster"],Ga=["src"],Za={class:"processing-bar"},Ja={class:"w-0"},Ka={class:"flex flex-col p-2 gap-y-2"},Qa={key:0,class:"flex flex-col justify-start w-full p-2 pt-3"},ei={class:"card-grid"},ti={class:"text-sm"},si={class:"video-card-dot"},ai={key:1,class:"flex flex-row justify-between w-full h-full px-8 overflow-hidden align-center"},ii={class:"flex flex-row justify-between pl-2 align-center gap-x-6"},oi={class:"flex flex-row cursor-default text-md"},ni={key:0,class:"flex flex-row w-[320px] justify-center gap-x-4 align-center ml-1"},li={key:0,class:"text-sm text-white border-2 rounded-md mt-[3px] border-[#ffffff44] bg-[#fafafa33] ml-4 px-1"},ri={class:"flex flex-row mt-2"},ci=["disabled","onClick"],ui={class:"mb-10 slide-right-to-left"},di={key:2},fi={key:2,class:"flex flex-row justify-center w-full h-full text-xl text-center align-center"},vi=tt(()=>u("div",{class:"flex flex-col mb-2 text-center align-end"}," Processing multiple videos may take a while, depending on the number of videos and their sizes. Cockpit will be usable during the process, but the performance may be affected and recording of new videos is disabled. ",-1)),hi={key:0,class:"flex flex-col -mt-2 text-center align-center"},mi={class:"flex flex-col justify-between h-[140px] w-full pb-3"},pi={key:0,class:"flex flex-col justify-start"},gi={class:"mb-3 text-sm text-center"},yi={class:"flex flex-row justify-between w-full mb-2 align-center"},_i={class:"text-sm font-bold w-[450px] text-nowrap text-start text-ellipsis overflow-x-hidden"},Ti={class:"text-sm text-end"},xi={class:"flex flex-row justify-between w-full mb-2"},bi=tt(()=>u("div",{class:"text-sm font-bold text-start"},"Overall Progress",-1)),Ei={class:"text-sm font-bold text-end"},wi={key:1},Pi={class:"flex flex-col justify-center w-full pb-3 text-center text-md"},Si=Vt({__name:"VideoLibraryModal",props:{openModal:Boolean},emits:["update:openModal"],setup(r,{emit:S}){const v=is(),O=r,p=S,{showDialog:P}=Ws(),M=g([]),_=g([]),A=g([]),I=g(O.openModal),o=g([]),j=g(null),z=g("videos"),k=g(!1),R=g(""),h=g(!1),ce=g(!1),ee=g(!1),Y=g({}),ue=g(!1),ie=g(!1),D=g(!0),te=g(!1),oe=g(""),ge=g([]),x=g(!1),T=g(""),X=g([]),$=g(!1),de=g(0),H=g([{fileName:"",progress:0,message:""}]),Oe=g(0),q=g(!1),fe=g(null),ve=g(!1),Ye=g(!1),vt=[{name:"Videos",icon:"mdi-video-outline",selected:!0,disabled:!1,tooltip:""},{name:"Pictures",icon:"mdi-image-outline",selected:!1,disabled:!0,tooltip:"Coming soon"}],ht=Nt(()=>[{name:"Delete",icon:"mdi-delete-outline",size:22,tooltip:"",confirmAction:!0,show:!0,disabled:q.value===!0,action:()=>ne()},{name:"Download",icon:"mdi-tray-arrow-down",size:28,tooltip:"Download selected videos with logs",confirmAction:!1,show:!0,disabled:q.value===!0,action:()=>st()}]),De=()=>{I.value=!1,p("update:openModal",!1),z.value="videos",M.value.forEach(l=>URL.revokeObjectURL(l)),M.value=[],Ee(),fe.value=null,h.value=!1},He=l=>{const f=/\(([^)]+)\)/,b=l.match(f);return b?b[1]:""},$e=l=>{const f=/.*\(([^)]+)\)/,b=l.match(f);return b?b[0]:""},mt=()=>{if(o.value.length===1&&!h.value){const l=document.getElementById("video-player");l&&l.play().catch(f=>console.error("Error auto-playing video:",f))}},pt=()=>{h.value=!h.value,h.value||Ee()},J=l=>{const f=o.value.findIndex(b=>b.fileName===l.fileName);f!==-1?o.value.length>1&&o.value.splice(f,1):(o.value.push(l),h.value=!0)},ye=()=>{ve.value=!1,de.value=0,H.value=[{fileName:"",progress:0,message:""}],q.value=!1},U=async()=>{try{await v.processVideoChunksAndTelemetry(o.value.map(l=>l.hash)),h.value=!1,await Fe()}catch(l){const f=`Video processing failed: ${l.message??l.toString()}`;console.error(f),R.value=f,k.value=!0,ve.value=!0}},se=()=>{ve.value&&Fe(),x.value=!1,ye()},Me=async()=>{o.value.length===1&&!o.value[0].isProcessed&&(q.value=!0),U()},Re=()=>{Oe.value=o.value.length,T.value="Processing Videos",X.value=[{text:de.value===100?"Close":"Hide",size:"small",class:"font-light",action:se}],te.value=!1,x.value=!0,U()},Ue=()=>{oe.value="Process Multiple Videos",ge.value=[{text:"Cancel",size:"small",class:"font-light",action:()=>{te.value=!1}},{text:"Process videos",size:"small",class:"font-bold",action:async()=>{te.value=!1,Re()}}],te.value=!0},Le=()=>{o.value=[..._.value],h.value=!0},Ee=()=>{h.value=!1,ce.value=!1,ee.value=!1,o.value.length>1&&(o.value=[o.value[0]])},he=()=>{_.value.some(l=>!l.isProcessed)?(o.value=_.value.filter(l=>!l.isProcessed),h.value=!0):(R.value="No unprocessed videos found",k.value=!0)},we=()=>{_.value.some(l=>l.isProcessed)?(o.value=_.value.filter(l=>l.isProcessed),h.value=!0):(R.value="No processed videos found",k.value=!0)},qe=l=>l.flatMap(b=>{const V=b.replace(".webm",".ass");return A.value.some(n=>n.fileName===V)?[b,V]:[b]}),st=async()=>{let l=!1;const f=async(L,n)=>{const F=(100*L/n).toFixed(1);l&&(R.value=`Preparing download: ${F}%.`,k.value=!0)};R.value="Getting your download ready...",setTimeout(()=>l=!0,1500);let b=[],V=[];if(o.value.forEach(L=>{L.isProcessed&&b.push(L.fileName),!L.isProcessed&&L.hash&&V.push(L.hash)}),k.value=!0,b.length>0){const L=qe(b);await v.downloadFilesFromVideoDB(L,f)}V.length>0&&(We(),await v.downloadTempVideo(V,f))},We=()=>{const l=o.value.some(f=>f.isProcessed);P({maxWidth:l?800:600,title:l?"You are downloading both processed and unprocessed videos":"You are downloading unprocessed video chunks",message:l?`One of the .zip files contains unprocessed video chunks, which are not playable.
      For a playable video, you need to process it first.`:"For a playable video, you need to process it first.",variant:"info"})},ne=async()=>{Ye.value=!0;let l=o.value.length,f=[],b=[];if(await o.value.forEach(V=>{V.isProcessed&&f.push(V.fileName),!V.isProcessed&&V.hash&&b.push(V.hash)}),f.length>0){const V=qe(f);await v.discardProcessedFilesFromVideoDB(V)}b.length>0&&await v.discardUnprocessedFilesFromVideoDB(b),R.value=`${l} video(s) discarded.`,k.value=!0,await Fe(),o.value=_.value.length>0?[_.value[0]]:[],_.value.length===1&&(h.value=!1),Ye.value=!1},Fe=async()=>{D.value=!0,_.value=[];const l=[],f=[];await v.videoStoringDB.iterate((le,re)=>{re.endsWith(".webm")&&l.push((async()=>{const Pe=await v.videoStoringDB.getItem(re);let Se="",Ge=!0;Pe instanceof Blob?(Se=URL.createObjectURL(Pe),M.value.push(Se)):console.error("Video data is not a Blob:",Pe);const gt=await v.videoStorageFileSize(re)??0;return{fileName:re,size:gt,url:Se,isProcessed:Ge}})()),re.endsWith(".ass")&&f.push((async()=>{const Pe=await v.videoStoringDB.getItem(re);let Se="";Pe instanceof Blob?(Se=URL.createObjectURL(Pe),M.value.push(Se)):console.error("Video data is not a Blob:",Pe);const Ge=await v.videoStorageFileSize(re)??0;return{fileName:re,url:Se,size:Ge}})())});const b=await v.unprocessedVideos,V=Object.entries(b).map(async([le,re])=>({...re,hash:le,url:"",isProcessed:!1})),L=await Promise.all(l),n=await Promise.all(f),K=(await Promise.all(V)).filter(le=>le.dateFinish||v.keysFailedUnprocessedVideos.includes(le.hash));_.value=[...L,...K],A.value=n,D.value=!1};return Z(()=>v.currentFileProgress,l=>{H.value=l},{deep:!0}),Z(()=>v.overallProgress,l=>{de.value=l,l>0&&l<100&&($.value=!0,q.value=!0),l===100&&($.value=!1,q.value=!1,setTimeout(()=>{x.value=!1},1e3))}),Z(I,l=>{p("update:openModal",l),l||(ye(),h.value=!1,fe.value=null,q.value=!1)}),Z(()=>O.openModal,async l=>{I.value=l,l===!0&&(await Fe(),q.value=!1)}),Z(o,l=>{if(l.length===1){ve.value&&ye(),fe.value=l[0];const f=l[0].url,b=j.value;b&&(b.src=f,b.load())}},{immediate:!0,deep:!0}),Z(_,()=>{if(fe.value){const l=_.value.find(f=>He(f.fileName)===He(fe.value.fileName));l&&(o.value=[l])}else o.value=_.value.length>0?[_.value[0]]:[]},{deep:!0}),Z(I,()=>{I.value||(fe.value=null)}),Z(_,async()=>{await as(),_.value.forEach(l=>{var b;const f=document.getElementById(`video-library-${l.fileName}`);if(f){(b=Y.value[l.fileName])==null||b.destroy();const V=new It.Manager(f);V.add(new It.Tap),V.add(new It.Press({time:500})),V.on("tap",L=>{const n=o.value.some(K=>K.fileName===l.fileName);if(h.value||L.srcEvent.ctrlKey||L.srcEvent.metaKey){h.value=!0;const K=o.value.findIndex(le=>le.fileName===l.fileName);K>-1?o.value.length>1&&o.value.splice(K,1):o.value.push(l)}else n||(o.value=[l]);if(o.value.length===1&&n){const K=document.getElementById("video-player");K&&(K.load(),K.play().catch(le=>console.error("Error auto-playing video:",le)))}}),V.on("press",()=>{h.value=!0,o.value.some(L=>L.fileName===l.fileName)||o.value.push(l)}),Y.value[l.fileName]=V}})},{immediate:!0,deep:!0}),kt(async()=>{D.value=!0,await Fe()}),os(()=>{z.value="videos",M.value.forEach(l=>URL.revokeObjectURL(l)),M.value=[],Object.values(Y.value).forEach(l=>{l.destroy()})}),(l,f)=>(y(),C(Ae,null,[d(ns,{modelValue:I.value,"onUpdate:modelValue":f[8]||(f[8]=b=>I.value=b),class:"dialog"},{default:m(()=>{var b,V,L;return[u("div",Pa,[u("div",Sa,[u("div",Ca,[u("div",Ia,[(y(),C(Ae,null,ut(vt,n=>u("button",{key:n.name,disabled:n.disabled,class:"flex flex-col justify-center align-center",onClick:F=>z.value=n.name.toLowerCase()},[n.tooltip!==""?(y(),ke(be,{key:0,"open-delay":"600",activator:"parent",location:"top"},{default:m(()=>[w(N(n.tooltip),1)]),_:2},1024)):B("",!0),u("div",{class:pe(["mb-1 text-2xl rounded-full",[n.disabled?"frosted-button-disabled":"frosted-button",z.value===n.name.toLowerCase()?"w-[58px] h-[58px]":"w-[40px] h-[40px]"]])},[d(W,{size:z.value===n.name.toLowerCase()?40:24,class:pe({"ml-1":n.name.toLowerCase()==="videos"})},{default:m(()=>[w(N(n.icon),1)]),_:2},1032,["size","class"])],2),u("div",{class:pe(["text-sm",{"text-white/30":!n.disabled}])},N(n.name),3)],8,Na)),64))]),u("div",null,[u("div",ka,[u("button",{class:"frosted-button text-[#ffffffaa] flex flex-col justify-center align-center w-[28px] h-[28px] rounded-full mb-[4px]",onClick:f[2]||(f[2]=n=>ue.value=!ue.value)},[d(W,{class:"text-[24px]"},{default:m(()=>[w("mdi-help-circle-outline")]),_:1}),d(be,{modelValue:ue.value,"onUpdate:modelValue":f[0]||(f[0]=n=>ue.value=n),"open-on-hover":!1,activator:"parent",location:"top",arrow:"","content-class":"border-[#ffffff55] border-2","onClick:outside":f[1]||(f[1]=n=>ue.value=!1)},{default:m(()=>[u("div",Va,[Aa,Oa,u("div",Da,[u("div",Ma,[d(W,{size:"10",class:"text-green-500 ml-2 mb-[2px] mr-1"},{default:m(()=>[w("mdi-circle")]),_:1}),w(" Processed video ")]),u("div",null,[d(W,{size:"10",class:"text-red-500 mb-[2px] mr-1"},{default:m(()=>[w("mdi-circle")]),_:1}),w(" Unprocessed video ")])])])]),_:1},8,["modelValue"])])]),d(Qe,{class:"opacity-[0.1] ml-[-5px] w-[120%]"}),u("button",{class:"flex flex-col justify-center py-2 mt-4 align-center",onClick:De},[u("div",Ra,[d(W,{class:"text-[18px]"},{default:m(()=>[w("mdi-close")]),_:1})]),Ua])])]),d(Qe,{vertical:"",class:"h-[92%] mt-4 opacity-[0.1]"}),z.value==="videos"?(y(),C(Ae,{key:0},[_.value.length>0?(y(),C("div",La,[u("div",Fa,[(y(!0),C(Ae,null,ut(_.value,n=>(y(),C("div",{key:n.fileName,class:"mb-4 video-container"},[u("div",Ba,[u("video",{id:`video-library-${n.fileName}`,class:pe(["border-4 border-white rounded-md cursor-pointer border-opacity-[0.1] hover:border-opacity-[0.4] transition duration-75 hover:ease-in",o.value.find(F=>F.fileName===n.fileName)?["border-opacity-[0.4]","w-[220px]"]:["border-opacity-[0.1]","w-[190px]"]]),preload:"auto",poster:n.isProcessed?void 0:n.thumbnail},[u("source",{src:n.url,type:"video/webm"},null,8,Ya)],10,za),o.value.find(F=>F.fileName===n.fileName)&&!h.value?(y(),C("div",{key:0,class:"play-button",onClick:F=>n.isProcessed?mt():Me()},[d(W,{size:"40",class:"text-white"},{default:m(()=>[w(N(n.isProcessed?"mdi-play-circle-outline":"mdi-progress-alert"),1)]),_:2},1024)],8,Ha)):B("",!0),h.value?(y(),C("div",{key:1,class:pe(["checkmark-button",o.value.find(F=>F.fileName===n.fileName)?"bg-green":"bg-white"]),onClick:js(F=>J(n),["stop"])},[d(W,{size:"15",class:"text-white"},{default:m(()=>[w(N(o.value.find(F=>F.fileName===n.fileName)?"mdi-check-circle-outline":"mdi-radiobox-blank"),1)]),_:2},1024)],10,Wa)):B("",!0)]),u("div",ja,[d(be,{"open-delay":"500",activator:"parent",location:"top"},{default:m(()=>[w(N(n.isProcessed?"Processed video":"Unprocessed video"),1)]),_:2},1024),w(" "+N(He(n.fileName)??"Cockpit webm")+" ",1),d(W,{size:"10",class:pe(["ml-1 mt-[3px]",n.isProcessed?"text-green-500":"text-red-500"])},{default:m(()=>[w(" mdi-circle ")]),_:2},1032,["class"])])]))),128))]),_.value.length>1?(y(),C("div",Xa,[u("div",null,[d(ze,{variant:"text",size:"small",class:"mt-[5px]",onClick:pt},{default:m(()=>[d(be,{"open-delay":"500",activator:"parent",location:"bottom"},{default:m(()=>[w(" Select "+N(h.value?"single":"multiple")+" files ",1)]),_:1}),w(" "+N(h.value?"Single":"Multi"),1)]),_:1})]),u("div",null,[d(ze,{variant:"text",size:"small",class:"mt-[5px]",onClick:f[3]||(f[3]=n=>o.value.length===_.value.length?Ee():Le())},{default:m(()=>[d(be,{"open-delay":"500",activator:"parent",location:"bottom"},{default:m(()=>[w(" Select "+N(o.value.length===_.value.length?"none":"all files"),1)]),_:1}),w(" "+N(o.value.length===_.value.length?"None":"All"),1)]),_:1})]),u("div",null,[d(ze,{variant:"text",size:"small",class:"mt-[5px]",onClick:f[4]||(f[4]=n=>o.value.every(F=>!F.isProcessed)?we():he())},{default:m(()=>[d(be,{"open-delay":"500",activator:"parent",location:"bottom"},{default:m(()=>[w(N(o.value.every(n=>!n.isProcessed)?"Select all processed videos":"Select all unprocessed videos"),1)]),_:1}),w(" "+N(o.value.every(n=>!n.isProcessed)?"Select Process.":"select Unproc."),1)]),_:1})])])):B("",!0)])):B("",!0),d(Qe,{vertical:"",class:"h-[92%] mt-4 opacity-[0.1]"}),_.value.length>0?(y(),C("div",$a,[u("div",null,[!h.value&&o.value.length===1&&!h.value&&!D.value?(y(),C("video",{key:0,id:"video-player",ref_key:"videoPlayerRef",ref:j,width:"660px",controls:!!o.value[0].isProcessed,preload:o.value[0].isProcessed?"auto":"none",poster:((b=o.value[0])==null?void 0:b.thumbnail)||void 0,class:"border-[14px] border-white border-opacity-10 rounded-lg min-h-[382px] aspect-video"},[u("source",{src:((V=o.value[0])==null?void 0:V.url)||void 0,type:"video/webm"},null,8,Ga)],8,qa)):B("",!0),!D.value&&o.value.length===1&&!o.value[0].isProcessed&&!h.value&&!ve.value?(y(),ke(ze,{key:1,variant:q.value?"text":"outlined",color:"white",size:"large",disabled:q.value,class:"process-button",onClick:Me},{default:m(()=>[w(N(q.value?"Processing...":"Process video"),1)]),_:1},8,["variant","disabled"])):B("",!0),u("div",Za,[q.value&&!x.value?(y(),ke(dt,{key:0,"model-value":ve.value?100:de.value,color:ve.value?"red":"green",height:"8",striped:""},null,8,["model-value","color"])):B("",!0),u("div",Ja,[!D.value&&o.value.length===1&&q.value&&ve.value?(y(),C("button",{key:0,class:"bg-red text-[#ffffffaa] flex flex-col justify-center align-center w-[20px] h-[20px] rounded-full mt-[40px] ml-[-25px]",onClick:f[7]||(f[7]=n=>ie.value=!ie.value)},[d(W,{class:"text-[18px]"},{default:m(()=>[w("mdi-alert-circle-outline")]),_:1}),d(be,{modelValue:ie.value,"onUpdate:modelValue":f[5]||(f[5]=n=>ie.value=n),"open-on-hover":!1,activator:"parent",location:"bottom",arrow:"","content-class":"border-[#ffffff55] border-2","onClick:outside":f[6]||(f[6]=n=>ie.value=!1)},{default:m(()=>[u("div",Ka,[u("div",null,N(R.value),1)])]),_:1},8,["modelValue"])])):B("",!0)])])]),_.value.length>0&&o.value.length>=1&&h.value?(y(),C("div",Qa,[u("div",ei,[(y(!0),C(Ae,null,ut(o.value,n=>(y(),ke(Xs,{key:n.fileName,class:"video-card"},{default:m(()=>[u("div",null,[d($s,null,{default:m(()=>[u("div",ti,N(He(n.fileName)),1)]),_:2},1024),u("div",si,[d(W,{size:"10",class:pe(n.isProcessed?"text-green-500":"text-red-500")},{default:m(()=>[w(" mdi-circle ")]),_:2},1032,["class"])])])]),_:2},1024))),128))]),d(Qe,{class:"mb-[-10px] opacity-[0.1] mx-3"})])):B("",!0),_.value.length>0?(y(),C("div",ai,[u("div",ii,[u("div",oi,N(h.value?`Files selected: ${o.value.length}`:$e((L=o.value[0])==null?void 0:L.fileName)),1),h.value?(y(),C("div",ni,[o.value.every(n=>!n.isProcessed)?(y(),C("div",li,[u("button",{onClick:Ue},"Process selected videos")])):B("",!0)])):B("",!0)]),u("div",ri,[(y(!0),C(Ae,null,ut(ht.value,n=>(y(),C("button",{key:n.name,class:"flex flex-col justify-center ml-6 align-center",disabled:n.disabled||!1,onClick:F=>!n.confirmAction&&n.action()},[u("div",{class:pe([[n.disabled?"frosted-button-disabled":"frosted-button",!n.confirmAction&&"p-2"],"flex flex-col justify-center mb-1 rounded-full frosted-button align-center button"])},[n.tooltip?(y(),ke(be,{key:0,"open-delay":"500",activator:"parent",location:"bottom"},{default:m(()=>[w(N(n.tooltip),1)]),_:2},1024)):B("",!0),n.confirmAction?(y(),ke(qs,{key:1,location:"left center",opacity:"0",transition:"slide-x-reverse-transition"},{activator:m(({props:F,isActive:K})=>[u("div",et({class:"flex items-center justify-center w-full h-full"},F),[d(W,{size:n.size,class:pe([{"rotate-[-45deg]":K,"outline outline-6 outline-[#ffffff55]":K},"rounded-full border-[transparent]"]),style:Gs({borderWidth:`${n.size-4}px`})},{default:m(()=>[w(N(K?"mdi-arrow-up":n.icon),1)]),_:2},1032,["size","class","style"])],16)]),default:m(()=>[d(Zs,{class:"bg-transparent",elevation:"0"},{default:m(()=>[d(Js,null,{append:m(()=>[u("div",ui,[d(ze,{fab:"",small:"",width:"28",height:"28",color:"red",icon:"mdi-close",class:"text-sm outline outline-3 outline-[#ffffff44] hover:outline-[#ffffff77]"},{default:m(()=>[d(be,{"open-delay":"600",activator:"parent",location:"bottom"},{default:m(()=>[w(" Cancel ")]),_:1}),d(W,null,{default:m(()=>[w("mdi-close")]),_:1})]),_:1}),d(ze,{fab:"",small:"",width:"28",height:"28",color:"green",icon:"mdi-check",class:"ml-4 text-sm outline outline-3 outline-[#ffffff44] hover:outline-[#ffffff77]",loading:Ye.value,onClick:F=>n.action()},{default:m(()=>[d(be,{"open-delay":"600",activator:"parent",location:"bottom"},{default:m(()=>[w(" Confirm ")]),_:1}),d(W,null,{default:m(()=>[w("mdi-check")]),_:1})]),_:2},1032,["loading","onClick"])])]),_:2},1024)]),_:2},1024)]),_:2},1024)):(y(),C("div",di,[d(W,{size:n.size},{default:m(()=>[w(N(n.icon),1)]),_:2},1032,["size"])]))],2)],8,ci))),128))])])):B("",!0)])):B("",!0),_.value.length===0?(y(),C("div",fi,N(D.value?"Loading":"No videos on storage"),1)):B("",!0)],64)):B("",!0)])])]}),_:1},8,["modelValue"]),d(wa,{"open-snackbar":k.value,message:R.value,duration:3e3,"close-button":!1,"onUpdate:openSnackbar":f[9]||(f[9]=b=>k.value=b)},null,8,["open-snackbar","message"]),d(Xt,{"show-dialog":te.value,title:oe.value,actions:ge.value,"max-width":600},{content:m(()=>[vi]),_:1},8,["show-dialog","title","actions"]),d(Xt,{"show-dialog":x.value,title:T.value,actions:X.value,"max-width":600},{content:m(()=>[ve.value?B("",!0):(y(),C("div",hi,[u("div",mi,[H.value.length>0?(y(),C("div",pi,[u("div",gi," File "+N(H.value.length)+" of "+N(Oe.value)+": "+N(H.value[H.value.length-1].message),1),u("div",yi,[u("div",_i,N(H.value[H.value.length-1].fileName),1),u("div",Ti,[d(Ks,{width:"1",size:"10",indeterminate:"",class:"mr-1 mb-[2px]"}),w(" "+N(`${H.value[H.value.length-1].progress}%`),1)])]),d(dt,{"model-value":H.value[H.value.length-1].progress,color:"white",height:"6",rounded:"",striped:""},null,8,["model-value"])])):B("",!0),u("div",null,[u("div",xi,[bi,u("div",Ei,N(`${Math.ceil(de.value)}%`),1)]),d(dt,{"model-value":Math.ceil(de.value),color:"blue",height:"6",rounded:"",striped:""},null,8,["model-value"])])])])),ve.value?(y(),C("div",wi,[u("div",Pi,N(`Error processing video file: ${H.value[H.value.length-1].fileName}`),1)])):B("",!0)]),_:1},8,["show-dialog","title","actions"])],64))}}),Ci=cs(Si,[["__scopeId","data-v-ba9013fb"]]),Ii=qt({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:Qs,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...ea(),...Gt({location:"top end"}),...Zt(),...ta(),...Jt(),...sa({transition:"scale-rotate-transition"})},"VBadge"),Ni=Kt()({name:"VBadge",inheritAttrs:!1,props:Ii(),setup(r,S){const{backgroundColorClasses:v,backgroundColorStyles:O}=aa($t(r,"color")),{roundedClasses:p}=es(r),{t:P}=ia(),{textColorClasses:M,textColorStyles:_}=oa($t(r,"textColor")),{themeClasses:A}=na(),{locationStyles:I}=Qt(r,!0,o=>(r.floating?r.dot?2:4:r.dot?8:12)+(["top","bottom"].includes(o)?+(r.offsetY??0):["left","right"].includes(o)?+(r.offsetX??0):0));return ss(()=>{const o=Number(r.content),j=!r.max||isNaN(o)?r.content:o<=+r.max?o:`${r.max}+`,[z,k]=la(S.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return d(r.tag,et({class:["v-badge",{"v-badge--bordered":r.bordered,"v-badge--dot":r.dot,"v-badge--floating":r.floating,"v-badge--inline":r.inline},r.class]},k,{style:r.style}),{default:()=>{var R,h;return[d("div",{class:"v-badge__wrapper"},[(h=(R=S.slots).default)==null?void 0:h.call(R),d(ra,{transition:r.transition},{default:()=>{var ce,ee;return[ca(d("span",et({class:["v-badge__badge",A.value,v.value,p.value,M.value],style:[O.value,_.value,r.inline?{}:I.value],"aria-atomic":"true","aria-label":P(r.label,o),"aria-live":"polite",role:"status"},z),[r.dot?void 0:S.slots.badge?(ee=(ce=S.slots).badge)==null?void 0:ee.call(ce):r.icon?d(W,{icon:r.icon},null):j]),[[ua,r.modelValue]])]}})])]}})}),{}}}),ft=r=>(ls("data-v-8b22c1c9"),r=r(),rs(),r),ki={key:1},Vi={class:"text-xs text-white select-none scroll-text"},Ai={key:3,class:"w-16 text-justify text-slate-100"},Oi={key:4,class:"w-16 text-justify text-slate-100"},Di=ft(()=>u("div",{class:"text-xs text-center text-white select-none flex-nowrap"},"Processing video...",-1)),Mi=[Di],Ri={key:5,class:"flex justify-center w-8"},Ui={class:"p-6 m-5 bg-white rounded-md"},Li=ft(()=>u("p",{class:"text-xl font-semibold"},"Choose a stream to record",-1)),Fi=ft(()=>u("div",{class:"w-auto h-px my-2 bg-grey-lighten-3"},null,-1)),Bi={class:"flex items-center"},zi=ft(()=>u("span",null,"Record",-1)),Yi={key:1,class:"w-5 h-5 ml-2 rounded-full bg-red"},Hi=Vt({__name:"MiniVideoRecorder",props:{miniWidget:{}},setup(r){const S=da(),v=is(),p=fa(r).miniWidget,P=g(),{namesAvailableStreams:M}=va(v),_=g(),{isOutside:A}=ha(_),I=g(!1),o=g(!1),j=g(!1),z=ma({interval:100}),k=g(),R=g(!1),h=g(0);kt(async()=>{await ee()}),pa(async()=>{Object.keys(p.value.options).length===0&&(p.value.options={streamName:void 0}),P.value=p.value.options.streamName}),Z(P,()=>{p.value.options.streamName=P.value,k.value=void 0});const ce=x=>{o.value=x},ee=async()=>{const x=(await v.videoStoringDB.keys()).filter(X=>X.endsWith(".webm")).length,T=Object.keys(v.keysFailedUnprocessedVideos).length;h.value=x+T};function Y(x){if(P.value=x,P.value===void 0){Xe.fire({text:"No stream selected.",icon:"error"});return}if(M.value.includes(P.value))return;const T="The selected stream is not available. Please check its source or select another stream.";throw Xe.fire({text:T,icon:"error"}),new Error(T)}const ue=async()=>{if(D.value){P.value!==void 0&&v.stopRecording(P.value);return}if(P.value===void 0){I.value=!0;return}ie()},ie=()=>{var x;if(P.value&&!((x=v.getStreamData(P.value))!=null&&x.connected)){Xe.fire({title:"Cannot start recording.",text:"Stream is not connected.",icon:"error"});return}Y(P.value),v.startRecording(P.value),I.value=!1},D=Nt(()=>P.value===void 0?!1:v.isRecording(P.value)),te=Nt(()=>{var H,Oe,q,fe;if(P.value===void 0)return"00:00:00";const x=(H=v.getStreamData(P.value))==null?void 0:H.timeRecordingStart;if(x===void 0)return"00:00:00";const T=ga({start:x,end:z.value}),X=((Oe=T.hours)==null?void 0:Oe.toFixed(0).length)===1?`0${T.hours}`:T.hours,$=((q=T.minutes)==null?void 0:q.toFixed(0).length)===1?`0${T.minutes}`:T.minutes,de=((fe=T.seconds)==null?void 0:fe.toFixed(0).length)===1?`0${T.seconds}`:T.seconds;return`${X}:${$}:${de}`}),oe=async x=>{Y(x),k.value=void 0,j.value=!0;let T=0;const X=100,$=3e3;for(;j.value&&T<$;)j.value=k.value===void 0||!k.value.active,await new Promise(de=>setTimeout(de,X)),T+=X;if(j.value){Xe.fire({text:"Could not load media stream.",icon:"error"});return}p.value.options.streamName=x};let ge;return S.isRealMiniWidget(p.value)&&(ge=setInterval(()=>{p.value.options.streamName===void 0&&!M.value.isEmpty()&&(p.value.options.streamName=M.value[0],P.value=p.value.options.streamName,M.value.length>1&&Xe.fire({title:"Multiple streams detected",text:`You have multiple streams available, so we chose one randomly to start with.
          If you want to change it, please open the widget configuration.`,icon:"info",confirmButtonText:"OK"}));const x=v.getMediaStream(p.value.options.streamName);ya(x,k.value)||(k.value=x)},1e3)),os(()=>clearInterval(ge)),Z(()=>v.areThereVideosProcessing,x=>{R.value=x,ee()}),Z(()=>v.keysFailedUnprocessedVideos,()=>ee()),Z(()=>o.value,async x=>{x===!1&&await ee()}),Z(D,()=>{if(!D.value){window.onbeforeunload=null;return}window.onbeforeunload=()=>(Xe.fire({text:`
      You have a video recording ongoing.
      Remember to stop it before closing Cockpit, or the record will be lost.
    `,icon:"warning"}),"I hope the user does not click on the leave button.")}),(x,T)=>{const X=_a("FontAwesomeIcon");return y(),C(Ae,null,[u("div",{ref_key:"recorderWidget",ref:_,class:pe(["flex justify-around px-2 py-1 text-center rounded-lg h-9 align-center bg-slate-800/60",{"w-48":h.value>0,"w-32":h.value<=0}])},[R.value?(y(),C("div",ki,[d(W,{class:"w-6 h-6 animate-spin",color:"white"},{default:m(()=>[w("mdi-loading")]),_:1})])):(y(),C("div",{key:0,class:pe([{"blob red w-5 opacity-100 rounded-sm":D.value,"opacity-30 bg-red-400":Ct(A)&&!D.value},"w-6 transition-all duration-500 rounded-full aspect-square bg-red-lighten-1 hover:cursor-pointer opacity-70 hover:opacity-90"]),onClick:T[0]||(T[0]=$=>ue())},null,2)),!D.value&&!R.value?(y(),C(Ae,{key:2},[P.value?(y(),C("div",{key:0,class:"flex flex-col max-w-[50%] scroll-container transition-all border-blur cursor-pointer",onClick:T[1]||(T[1]=$=>I.value=!0)},[u("div",Vi,N(P.value),1)])):(y(),ke(X,{key:1,icon:"fa-solid fa-video",class:"h-6 text-slate-100"}))],64)):B("",!0),D.value&&!R.value?(y(),C("div",Ai,N(te.value),1)):R.value?(y(),C("div",Oi,Mi)):B("",!0),h.value>0?(y(),C("div",Ri,[d(Qe,{vertical:"",class:"h-6"}),d(Ni,{color:"info",content:h.value,dot:Ct(A)||o.value,class:"cursor-pointer",onClick:T[3]||(T[3]=$=>o.value=!0)},{default:m(()=>[d(W,{class:"w-6 h-6 ml-3 text-slate-100",onClick:T[2]||(T[2]=$=>o.value=!0)},{default:m(()=>[w(" mdi-video-box ")]),_:1})]),_:1},8,["content","dot"])])):B("",!0)],2),d(ns,{modelValue:I.value,"onUpdate:modelValue":T[5]||(T[5]=$=>I.value=$),width:"auto"},{default:m(()=>[u("div",Ui,[Li,Fi,d(Ta,{"model-value":P.value,label:"Stream name",items:Ct(M),"item-title":"name",density:"compact",variant:"outlined","no-data-text":"No streams available.","hide-details":"","return-object":"","onUpdate:modelValue":oe},null,8,["model-value","items"]),u("div",Bi,[u("button",{class:"w-auto p-3 m-2 font-medium transition-all rounded-md shadow-md text-uppercase hover:bg-slate-100",onClick:T[4]||(T[4]=$=>I.value=!1)}," Cancel "),u("button",{class:pe(["flex items-center p-3 mx-2 font-medium transition-all rounded-md shadow-md w-fit text-uppercase hover:bg-slate-100",{"bg-slate-200 opacity-30 pointer-events-none":j.value}]),onClick:ie},[zi,j.value?(y(),ke(W,{key:0,class:"m-2 animate-spin"},{default:m(()=>[w("mdi-loading")]),_:1})):(y(),C("div",Yi))],2)])])]),_:1},8,["modelValue"]),d(Ci,{"open-modal":o.value,"onUpdate:openModal":ce},null,8,["open-modal"])],64)}}}),ji=cs(Hi,[["__scopeId","data-v-8b22c1c9"]]);export{ji as default};
