import{d as V,u as k,a as I,w as i,A as f,b as x,c as C,e as D,r as h,o as E,f as j,h as H,i as L,j as S,k as N,l as u,m,n as t,t as c,F as M,p as U,q as $,T as F,s as b,v as q,x as z,y as O,_ as P}from"./index-DU4ycZZa.js";const R=V("vehicle-alerter",()=>{const s=k(),e=I();i(s.statusText,()=>{s.statusText.text&&e.pushAlert(new f(s.statusText.severity,s.statusText.text))}),i(()=>s.mode,()=>e.pushAlert(new f(x.Info,`Vehicle mode changed to ${s.mode}.`))),i(()=>s.isArmed,l=>{const o=l?"armed":"disarmed";e.pushAlert(new f(x.Info,`Vehicle ${o}`))}),i(()=>s.isVehicleOnline,l=>{const o=l?x.Success:x.Error,n=l?"connected":"disconnected";e.pushAlert(new f(o,`Vehicle ${n}`))})}),G={class:"mx-1 my-1.5 w-[500px]"},J={class:"mx-1 overflow-hidden text-xl font-medium text-gray-100 text-ellipsis"},K={class:"flex flex-col justify-center mx-1 font-mono text-xs font-semibold leading-3 text-right text-gray-100"},Q={class:"flex items-center justify-between whitespace-nowrap"},W={class:"mx-1 overflow-hidden text-lg font-medium leading-none text-ellipsis"},X={class:"flex flex-col justify-center mx-1 font-mono text-xs font-semibold leading-3 text-right text-gray-100"},Y={key:0,class:"h-px mx-1 mb-2 bg-slate-50/30"},Z=10,ee=C({__name:"Alerter",setup(s){R();const e=I(),l=D({interval:1e3}),o=r=>O(r,"HH:mm:ss"),n=h(e.alerts[0]);let _;E(()=>{_=setInterval(()=>{var a;const r=new Date(l.value);if(j(r,((a=e.alerts.last())==null?void 0:a.time_created)||r)>Z){n.value=new f(x.Info,"No recent alerts.");return}n.value=e.alerts.last()},1e3)}),H(()=>{clearInterval(_)});const[p,v]=L(),g=h(),A=S(g),w=h(),y=S(w);i(A,(r,d)=>{d&&!r&&setTimeout(()=>{!y.value&&!A.value&&p.value&&v()},250),!p.value&&v()}),i(y,(r,d)=>{d&&!r&&v()});const B=N(()=>[...e.sortedAlerts].reverse());return(r,d)=>(u(),m("div",G,[t("div",{ref_key:"currentAlertBar",ref:g,class:"flex items-center justify-between p-1 overflow-hidden rounded cursor-pointer select-none whitespace-nowrap bg-slate-800/75"},[t("p",J,c(n.value.message),1),t("div",K,[t("p",null,c(o(n.value.time_created||new Date)),1),t("p",null,c(n.value.level.toUpperCase()),1)])],512),t("div",{ref_key:"expandedAlertsBar",ref:w,class:z(["expanded-alerts-bar absolute w-full p-2 transition-all rounded top-12 max-h-[30vh] overflow-y-auto text-slate-50 scrollbar-hide bg-slate-800/75 select-none flex flex-col",{"opacity-0 invisible":!b(p)}])},[(u(!0),m(M,null,U(B.value,(a,T)=>(u(),m("div",{key:a.time_created.toISOString()},[$((u(),m("div",Q,[t("p",W,c(a.message),1),t("div",X,[t("p",null,c(o(a.time_created||new Date)),1),t("p",null,c(a.level.toUpperCase()),1)])])),[[F,a.message,void 0,{right:!0}]]),T!==b(e).alerts.length-1?(u(),m("div",Y)):q("",!0)]))),128))],2)]))}}),se=P(ee,[["__scopeId","data-v-1eec6a2c"]]);export{se as default};
