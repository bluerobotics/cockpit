import{d as $,b5 as B,am as F,an as O,q as r,ar as I,b6 as h,C as T,l as b,v as z,h as D,o as _,c as W,a as f,j,w as x,al as N,b as n,I as P,aP as A,i as t,H as i,R as H,aD as K,L as y,S,b7 as q,b8 as E,P as M,aM as J,b9 as Y,Y as G,J as Q,ba as X,a1 as Z}from"./index-CJuRviIl.js";import{_ as ee}from"./Snackbar.vue_vue_type_script_setup_true_lang-DrIIcK3H.js";const ae={class:"w-full h-full"},te=["src"],se={class:"flex items-center justify-between"},le=$({__name:"IFrame",props:{widget:{}},setup(k){B(e=>({"1600294c":U.value}));const u=F(),a=O(k).widget,m=r(!1),c=r(0),l=r(a.value.options.source),d=r(!1),p=r(""),v=e=>X(e)?!0:"URL is not valid.",g=()=>{const e=v(l.value);if(e!==!0){p.value=`${e} Please enter a valid URL.`,d.value=!0;return}a.value.options.source=l.value,p.value=`IFrame URL sucessfully updated to '${l.value}'.`,d.value=!0};I(()=>{Object.keys(a.value.options).length===0&&(a.value.options={source:h},l.value=h)});const{width:w,height:V}=T(),C=b(()=>{let e="";return e=e.concat(" ","position: absolute;"),e=e.concat(" ",`left: ${a.value.position.x*w.value}px;`),e=e.concat(" ",`top: ${a.value.position.y*V.value}px;`),e=e.concat(" ",`width: ${a.value.size.width*w.value}px;`),e=e.concat(" ",`height: ${a.value.size.height*V.value}px;`),u.editingMode&&(e=e.concat(" ","pointer-events:none; border:0;")),u.isWidgetVisible(a.value)||(e=e.concat(" ","display: none;")),e}),U=b(()=>(100-c.value)/100);function R(){console.log("Finished loading"),m.value=!0}return z(a,()=>{u.widgetManagerVars(a.value.hash).configMenuOpen===!1&&v(l.value)!==!0&&(l.value=a.value.options.source)},{deep:!0}),(e,s)=>{const L=D("tooltip");return _(),W(Q,null,[f("div",ae,[(_(),j(A,{to:".widgets-view"},[x(f("iframe",{src:n(a).options.source,style:P(C.value),frameborder:"0",onLoad:R},null,44,te),[[N,m.value]])])),t(G,{modelValue:n(u).widgetManagerVars(n(a).hash).configMenuOpen,"onUpdate:modelValue":s[3]||(s[3]=o=>n(u).widgetManagerVars(n(a).hash).configMenuOpen=o),"min-width":"400","max-width":"35%"},{default:i(()=>[t(H,{class:"pa-2"},{default:i(()=>[t(K,null,{default:i(()=>[y("Settings")]),_:1}),t(S,null,{default:i(()=>[f("div",se,[t(q,{modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=o=>l.value=o),label:"Iframe Source",variant:"underlined",outlined:"",rules:[v],onKeydown:E(g,["enter"])},null,8,["modelValue","rules"]),x(t(M,{icon:"mdi-check",class:"mx-1 mb-5",rounded:"lg",flat:"",onClick:g},null,512),[[L,"Set",void 0,{bottom:!0}]])])]),_:1}),t(S,null,{default:i(()=>[t(J,{modelValue:c.value,"onUpdate:modelValue":s[1]||(s[1]=o=>c.value=o),label:"Transparency",min:0,max:90},null,8,["modelValue"])]),_:1}),t(Y,null,{default:i(()=>[t(M,{color:"primary",onClick:s[2]||(s[2]=o=>n(u).widgetManagerVars(n(a).hash).configMenuOpen=!1)},{default:i(()=>[y(" Close ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t(ee,{"open-snackbar":d.value,message:p.value,duration:3e3,"close-button":!1,"onUpdate:openSnackbar":s[4]||(s[4]=o=>d.value=o)},null,8,["open-snackbar","message"])],64)}}}),ue=Z(le,[["__scopeId","data-v-7e7e40dc"]]);export{ue as default};
